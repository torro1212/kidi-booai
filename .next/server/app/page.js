/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "(rsc)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"9b1634e52d04\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcYXBwXFxnbG9iYWxzLmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjliMTYzNGU1MmQwNFwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/globals.css\n");

/***/ }),

/***/ "(rsc)/./app/layout.tsx":
/*!************************!*\
  !*** ./app/layout.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Nunito_arguments_subsets_latin_variable_font_nunito_display_swap_variableName_nunito___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/font/google/target.css?{\"path\":\"app\\\\layout.tsx\",\"import\":\"Nunito\",\"arguments\":[{\"subsets\":[\"latin\"],\"variable\":\"--font-nunito\",\"display\":\"swap\"}],\"variableName\":\"nunito\"} */ \"(rsc)/./node_modules/next/font/google/target.css?{\\\"path\\\":\\\"app\\\\\\\\layout.tsx\\\",\\\"import\\\":\\\"Nunito\\\",\\\"arguments\\\":[{\\\"subsets\\\":[\\\"latin\\\"],\\\"variable\\\":\\\"--font-nunito\\\",\\\"display\\\":\\\"swap\\\"}],\\\"variableName\\\":\\\"nunito\\\"}\");\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Nunito_arguments_subsets_latin_variable_font_nunito_display_swap_variableName_nunito___WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_app_layout_tsx_import_Nunito_arguments_subsets_latin_variable_font_nunito_display_swap_variableName_nunito___WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Fredoka_arguments_subsets_latin_variable_font_fredoka_display_swap_variableName_fredoka___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/font/google/target.css?{\"path\":\"app\\\\layout.tsx\",\"import\":\"Fredoka\",\"arguments\":[{\"subsets\":[\"latin\"],\"variable\":\"--font-fredoka\",\"display\":\"swap\"}],\"variableName\":\"fredoka\"} */ \"(rsc)/./node_modules/next/font/google/target.css?{\\\"path\\\":\\\"app\\\\\\\\layout.tsx\\\",\\\"import\\\":\\\"Fredoka\\\",\\\"arguments\\\":[{\\\"subsets\\\":[\\\"latin\\\"],\\\"variable\\\":\\\"--font-fredoka\\\",\\\"display\\\":\\\"swap\\\"}],\\\"variableName\\\":\\\"fredoka\\\"}\");\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Fredoka_arguments_subsets_latin_variable_font_fredoka_display_swap_variableName_fredoka___WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_app_layout_tsx_import_Fredoka_arguments_subsets_latin_variable_font_fredoka_display_swap_variableName_fredoka___WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Rubik_arguments_subsets_latin_hebrew_variable_font_rubik_display_swap_variableName_rubik___WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/font/google/target.css?{\"path\":\"app\\\\layout.tsx\",\"import\":\"Rubik\",\"arguments\":[{\"subsets\":[\"latin\",\"hebrew\"],\"variable\":\"--font-rubik\",\"display\":\"swap\"}],\"variableName\":\"rubik\"} */ \"(rsc)/./node_modules/next/font/google/target.css?{\\\"path\\\":\\\"app\\\\\\\\layout.tsx\\\",\\\"import\\\":\\\"Rubik\\\",\\\"arguments\\\":[{\\\"subsets\\\":[\\\"latin\\\",\\\"hebrew\\\"],\\\"variable\\\":\\\"--font-rubik\\\",\\\"display\\\":\\\"swap\\\"}],\\\"variableName\\\":\\\"rubik\\\"}\");\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Rubik_arguments_subsets_latin_hebrew_variable_font_rubik_display_swap_variableName_rubik___WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_app_layout_tsx_import_Rubik_arguments_subsets_latin_hebrew_variable_font_rubik_display_swap_variableName_rubik___WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./app/globals.css\");\n\n\n\n\n\nconst metadata = {\n    title: 'KidCraft AI - Create. Learn. Grow.',\n    description: 'Create magical children\\'s books with AI'\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"he\",\n        dir: \"rtl\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            className: `${(next_font_google_target_css_path_app_layout_tsx_import_Nunito_arguments_subsets_latin_variable_font_nunito_display_swap_variableName_nunito___WEBPACK_IMPORTED_MODULE_2___default().variable)} ${(next_font_google_target_css_path_app_layout_tsx_import_Fredoka_arguments_subsets_latin_variable_font_fredoka_display_swap_variableName_fredoka___WEBPACK_IMPORTED_MODULE_3___default().variable)} ${(next_font_google_target_css_path_app_layout_tsx_import_Rubik_arguments_subsets_latin_hebrew_variable_font_rubik_display_swap_variableName_rubik___WEBPACK_IMPORTED_MODULE_4___default().variable)} font-sans`,\n            children: children\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\layout.tsx\",\n            lineNumber: 35,\n            columnNumber: 13\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\layout.tsx\",\n        lineNumber: 34,\n        columnNumber: 9\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGF5b3V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFJTUE7QUFNQUM7QUFNQUM7QUFkZ0I7QUFvQmYsTUFBTUMsV0FBcUI7SUFDOUJDLE9BQU87SUFDUEMsYUFBYTtBQUNqQixFQUFDO0FBRWMsU0FBU0MsV0FBVyxFQUMvQkMsUUFBUSxFQUdYO0lBQ0cscUJBQ0ksOERBQUNDO1FBQUtDLE1BQUs7UUFBS0MsS0FBSTtrQkFDaEIsNEVBQUNDO1lBQUtDLFdBQVcsR0FBR1osOExBQWUsQ0FBQyxDQUFDLEVBQUVDLGlNQUFnQixDQUFDLENBQUMsRUFBRUMsa01BQWMsQ0FBQyxVQUFVLENBQUM7c0JBQ2hGSzs7Ozs7Ozs7Ozs7QUFJakIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcYXBwXFxsYXlvdXQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTWV0YWRhdGEgfSBmcm9tICduZXh0J1xyXG5pbXBvcnQgeyBOdW5pdG8sIEZyZWRva2EsIFJ1YmlrIH0gZnJvbSAnbmV4dC9mb250L2dvb2dsZSdcclxuaW1wb3J0ICcuL2dsb2JhbHMuY3NzJ1xyXG5cclxuY29uc3QgbnVuaXRvID0gTnVuaXRvKHtcclxuICAgIHN1YnNldHM6IFsnbGF0aW4nXSxcclxuICAgIHZhcmlhYmxlOiAnLS1mb250LW51bml0bycsXHJcbiAgICBkaXNwbGF5OiAnc3dhcCcsXHJcbn0pXHJcblxyXG5jb25zdCBmcmVkb2thID0gRnJlZG9rYSh7XHJcbiAgICBzdWJzZXRzOiBbJ2xhdGluJ10sXHJcbiAgICB2YXJpYWJsZTogJy0tZm9udC1mcmVkb2thJyxcclxuICAgIGRpc3BsYXk6ICdzd2FwJyxcclxufSlcclxuXHJcbmNvbnN0IHJ1YmlrID0gUnViaWsoe1xyXG4gICAgc3Vic2V0czogWydsYXRpbicsICdoZWJyZXcnXSxcclxuICAgIHZhcmlhYmxlOiAnLS1mb250LXJ1YmlrJyxcclxuICAgIGRpc3BsYXk6ICdzd2FwJyxcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBtZXRhZGF0YTogTWV0YWRhdGEgPSB7XHJcbiAgICB0aXRsZTogJ0tpZENyYWZ0IEFJIC0gQ3JlYXRlLiBMZWFybi4gR3Jvdy4nLFxyXG4gICAgZGVzY3JpcHRpb246ICdDcmVhdGUgbWFnaWNhbCBjaGlsZHJlblxcJ3MgYm9va3Mgd2l0aCBBSScsXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb3RMYXlvdXQoe1xyXG4gICAgY2hpbGRyZW4sXHJcbn06IHtcclxuICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGVcclxufSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8aHRtbCBsYW5nPVwiaGVcIiBkaXI9XCJydGxcIj5cclxuICAgICAgICAgICAgPGJvZHkgY2xhc3NOYW1lPXtgJHtudW5pdG8udmFyaWFibGV9ICR7ZnJlZG9rYS52YXJpYWJsZX0gJHtydWJpay52YXJpYWJsZX0gZm9udC1zYW5zYH0+XHJcbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICA8L2h0bWw+XHJcbiAgICApXHJcbn1cclxuIl0sIm5hbWVzIjpbIm51bml0byIsImZyZWRva2EiLCJydWJpayIsIm1ldGFkYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiZGlyIiwiYm9keSIsImNsYXNzTmFtZSIsInZhcmlhYmxlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__);\n// This file is generated by the Webpack next-flight-loader.\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"C:\\\\\\\\Users\\\\\\\\LENOVO\\\\\\\\Desktop\\\\\\\\shahar\\\\\\\\bookai\\\\\\\\app\\\\\\\\page.tsx\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEiLCJzb3VyY2VzIjpbIl9OX0UvLi9hcHAvcGFnZS50c3gvX19uZXh0anMtaW50ZXJuYWwtcHJveHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYnkgdGhlIFdlYnBhY2sgbmV4dC1mbGlnaHQtbG9hZGVyLlxuaW1wb3J0IHsgcmVnaXN0ZXJDbGllbnRSZWZlcmVuY2UgfSBmcm9tIFwicmVhY3Qtc2VydmVyLWRvbS13ZWJwYWNrL3NlcnZlclwiO1xuZXhwb3J0IGRlZmF1bHQgcmVnaXN0ZXJDbGllbnRSZWZlcmVuY2UoXG5mdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGNhbGwgdGhlIGRlZmF1bHQgZXhwb3J0IG9mIFxcXCJDOlxcXFxcXFxcVXNlcnNcXFxcXFxcXExFTk9WT1xcXFxcXFxcRGVza3RvcFxcXFxcXFxcc2hhaGFyXFxcXFxcXFxib29rYWlcXFxcXFxcXGFwcFxcXFxcXFxccGFnZS50c3hcXFwiIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0J3Mgb24gdGhlIGNsaWVudC4gSXQncyBub3QgcG9zc2libGUgdG8gaW52b2tlIGEgY2xpZW50IGZ1bmN0aW9uIGZyb20gdGhlIHNlcnZlciwgaXQgY2FuIG9ubHkgYmUgcmVuZGVyZWQgYXMgYSBDb21wb25lbnQgb3IgcGFzc2VkIHRvIHByb3BzIG9mIGEgQ2xpZW50IENvbXBvbmVudC5cIik7IH0sXG5cIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXHNoYWhhclxcXFxib29rYWlcXFxcYXBwXFxcXHBhZ2UudHN4XCIsXG5cImRlZmF1bHRcIixcbik7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/page.tsx\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/module.compiled.js?6a4d\");\n/* harmony import */ var next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/app-render/interop-default */ \"(rsc)/./node_modules/next/dist/server/app-render/interop-default.js\");\n/* harmony import */ var next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/app-render/strip-flight-headers */ \"(rsc)/./node_modules/next/dist/server/app-render/strip-flight-headers.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/lib/experimental/ppr */ \"(rsc)/./node_modules/next/dist/server/lib/experimental/ppr.js\");\n/* harmony import */ var next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/request/fallback-params */ \"(rsc)/./node_modules/next/dist/server/request/fallback-params.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/app-render/encryption-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption-utils.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/streaming-metadata */ \"(rsc)/./node_modules/next/dist/server/lib/streaming-metadata.js\");\n/* harmony import */ var next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/app-render/action-utils */ \"(rsc)/./node_modules/next/dist/server/app-render/action-utils.js\");\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/lib/server-action-request-meta */ \"(rsc)/./node_modules/next/dist/server/lib/server-action-request-meta.js\");\n/* harmony import */ var next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/client/components/app-router-headers */ \"(rsc)/./node_modules/next/dist/client/components/app-router-headers.js\");\n/* harmony import */ var next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/is-bot */ \"next/dist/shared/lib/router/utils/is-bot\");\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/dist/lib/fallback */ \"(rsc)/./node_modules/next/dist/lib/fallback.js\");\n/* harmony import */ var next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! next/dist/server/render-result */ \"(rsc)/./node_modules/next/dist/server/render-result.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! next/dist/server/stream-utils/encoded-tags */ \"(rsc)/./node_modules/next/dist/server/stream-utils/encoded-tags.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! next/dist/server/send-payload */ \"(rsc)/./node_modules/next/dist/server/send-payload.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\");\n/* harmony import */ var next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! next/dist/client/components/redirect-status-code */ \"(rsc)/./node_modules/next/dist/client/components/redirect-status-code.js\");\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"__next_app__\",\"routeModule\",\"handler\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nconst module0 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/layout.tsx */ \"(rsc)/./app/layout.tsx\"));\nconst module1 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\nconst module2 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/not-found.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/not-found.js\", 23));\nconst module3 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/forbidden.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/forbidden.js\", 23));\nconst module4 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/builtin/unauthorized.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/unauthorized.js\", 23));\nconst page5 = () => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(rsc)/./app/page.tsx\"));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page5, \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [module0, \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\layout.tsx\"],\n'global-error': [module1, \"next/dist/client/components/builtin/global-error.js\"],\n'not-found': [module2, \"next/dist/client/components/builtin/not-found.js\"],\n'forbidden': [module3, \"next/dist/client/components/builtin/forbidden.js\"],\n'unauthorized': [module4, \"next/dist/client/components/builtin/unauthorized.js\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\"];\n\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    var _this;\n    let srcPage = \"/page\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const initialPostponed = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'postponed');\n    // TODO: replace with more specific flags\n    const minimalMode = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'minimalMode');\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, query, params, parsedUrl, pageIsDynamic, buildManifest, nextFontManifest, reactLoadableManifest, serverActionsManifest, clientReferenceManifest, subresourceIntegrityManifest, prerenderManifest, isDraftMode, resolvedPathname, revalidateOnlyGenerated, routerServerContext, nextConfig, interceptionRoutePatterns } = prepareResult;\n    const pathname = parsedUrl.pathname || '/';\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_14__.normalizeAppPath)(srcPage);\n    let { isOnDemandRevalidate } = prepareResult;\n    const prerenderInfo = routeModule.match(pathname, prerenderManifest);\n    const isPrerendered = !!prerenderManifest.routes[resolvedPathname];\n    let isSSG = Boolean(prerenderInfo || isPrerendered || prerenderManifest.routes[normalizedSrcPage]);\n    const userAgent = req.headers['user-agent'] || '';\n    const botType = (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.getBotType)(userAgent);\n    const isHtmlBot = (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.isHtmlBotRequest)(req);\n    /**\n   * If true, this indicates that the request being made is for an app\n   * prefetch request.\n   */ const isPrefetchRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isPrefetchRSCRequest') ?? req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_ROUTER_PREFETCH_HEADER] === '1' // exclude runtime prefetches, which use '2'\n    ;\n    // NOTE: Don't delete headers[RSC] yet, it still needs to be used in renderToHTML later\n    const isRSCRequest = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'isRSCRequest') ?? Boolean(req.headers[next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_HEADER]);\n    const isPossibleServerAction = (0,next_dist_server_lib_server_action_request_meta__WEBPACK_IMPORTED_MODULE_15__.getIsPossibleServerAction)(req);\n    /**\n   * If the route being rendered is an app page, and the ppr feature has been\n   * enabled, then the given route _could_ support PPR.\n   */ const couldSupportPPR = (0,next_dist_server_lib_experimental_ppr__WEBPACK_IMPORTED_MODULE_9__.checkIsAppPPREnabled)(nextConfig.experimental.ppr);\n    // When enabled, this will allow the use of the `?__nextppronly` query to\n    // enable debugging of the static shell.\n    const hasDebugStaticShellQuery =  false && 0;\n    // When enabled, this will allow the use of the `?__nextppronly` query\n    // to enable debugging of the fallback shell.\n    const hasDebugFallbackShellQuery = hasDebugStaticShellQuery && query.__nextppronly === 'fallback';\n    // This page supports PPR if it is marked as being `PARTIALLY_STATIC` in the\n    // prerender manifest and this is an app page.\n    const isRoutePPREnabled = couldSupportPPR && (((_this = prerenderManifest.routes[normalizedSrcPage] ?? prerenderManifest.dynamicRoutes[normalizedSrcPage]) == null ? void 0 : _this.renderingMode) === 'PARTIALLY_STATIC' || // Ideally we'd want to check the appConfig to see if this page has PPR\n    // enabled or not, but that would require plumbing the appConfig through\n    // to the server during development. We assume that the page supports it\n    // but only during development.\n    hasDebugStaticShellQuery && (routeModule.isDev === true || (routerServerContext == null ? void 0 : routerServerContext.experimentalTestProxy) === true));\n    const isDebugStaticShell = hasDebugStaticShellQuery && isRoutePPREnabled;\n    // We should enable debugging dynamic accesses when the static shell\n    // debugging has been enabled and we're also in development mode.\n    const isDebugDynamicAccesses = isDebugStaticShell && routeModule.isDev === true;\n    const isDebugFallbackShell = hasDebugFallbackShellQuery && isRoutePPREnabled;\n    // If we're in minimal mode, then try to get the postponed information from\n    // the request metadata. If available, use it for resuming the postponed\n    // render.\n    const minimalPostponed = isRoutePPREnabled ? initialPostponed : undefined;\n    // If PPR is enabled, and this is a RSC request (but not a prefetch), then\n    // we can use this fact to only generate the flight data for the request\n    // because we can't cache the HTML (as it's also dynamic).\n    const isDynamicRSCRequest = isRoutePPREnabled && isRSCRequest && !isPrefetchRSCRequest;\n    // Need to read this before it's stripped by stripFlightHeaders. We don't\n    // need to transfer it to the request meta because it's only read\n    // within this function; the static segment data should have already been\n    // generated, so we will always either return a static response or a 404.\n    const segmentPrefetchHeader = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'segmentPrefetchRSCRequest');\n    // TODO: investigate existing bug with shouldServeStreamingMetadata always\n    // being true for a revalidate due to modifying the base-server this.renderOpts\n    // when fixing this to correct logic it causes hydration issue since we set\n    // serveStreamingMetadata to true during export\n    let serveStreamingMetadata = !userAgent ? true : (0,next_dist_server_lib_streaming_metadata__WEBPACK_IMPORTED_MODULE_12__.shouldServeStreamingMetadata)(userAgent, nextConfig.htmlLimitedBots);\n    if (isHtmlBot && isRoutePPREnabled) {\n        isSSG = false;\n        serveStreamingMetadata = false;\n    }\n    // In development, we always want to generate dynamic HTML.\n    let supportsDynamicResponse = // If we're in development, we always support dynamic HTML, unless it's\n    // a data request, in which case we only produce static HTML.\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isSSG || // If this request has provided postponed data, it supports dynamic\n    // HTML.\n    typeof initialPostponed === 'string' || // If this is a dynamic RSC request, then this render supports dynamic\n    // HTML (it's dynamic).\n    isDynamicRSCRequest;\n    // When html bots request PPR page, perform the full dynamic rendering.\n    const shouldWaitOnAllReady = isHtmlBot && isRoutePPREnabled;\n    let ssgCacheKey = null;\n    if (!isDraftMode && isSSG && !supportsDynamicResponse && !isPossibleServerAction && !minimalPostponed && !isDynamicRSCRequest) {\n        ssgCacheKey = resolvedPathname;\n    }\n    // the staticPathKey differs from ssgCacheKey since\n    // ssgCacheKey is null in dev since we're always in \"dynamic\"\n    // mode in dev to bypass the cache, but we still need to honor\n    // dynamicParams = false in dev mode\n    let staticPathKey = ssgCacheKey;\n    if (!staticPathKey && routeModule.isDev) {\n        staticPathKey = resolvedPathname;\n    }\n    // If this is a request for an app path that should be statically generated\n    // and we aren't in the edge runtime, strip the flight headers so it will\n    // generate the static response.\n    if (!routeModule.isDev && !isDraftMode && isSSG && isRSCRequest && !isDynamicRSCRequest) {\n        (0,next_dist_server_app_render_strip_flight_headers__WEBPACK_IMPORTED_MODULE_7__.stripFlightHeaders)(req.headers);\n    }\n    const ComponentMod = {\n        ...next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_26__,\n        tree,\n        pages,\n        GlobalError: (next_dist_client_components_builtin_global_error_js__WEBPACK_IMPORTED_MODULE_25___default()),\n        handler,\n        routeModule,\n        __next_app__\n    };\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_11__.setReferenceManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: (0,next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_13__.createServerModuleMap)({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    try {\n        const varyHeader = routeModule.getVaryHeader(resolvedPathname, interceptionRoutePatterns);\n        res.setHeader('Vary', varyHeader);\n        const invokeRouteModule = async (span, context)=>{\n            const nextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextRequest(req);\n            const nextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextResponse(res);\n            // TODO: adapt for putting the RDC inside the postponed data\n            // If we're in dev, and this isn't a prefetch or a server action,\n            // we should seed the resume data cache.\n            if (true) {\n                if (nextConfig.experimental.cacheComponents && !isPrefetchRSCRequest && !context.renderOpts.isPossibleServerAction) {\n                    const warmup = await routeModule.warmup(nextReq, nextRes, context);\n                    // If the warmup is successful, we should use the resume data\n                    // cache from the warmup.\n                    if (warmup.metadata.renderResumeDataCache) {\n                        context.renderOpts.renderResumeDataCache = warmup.metadata.renderResumeDataCache;\n                    }\n                }\n            }\n            return routeModule.render(nextReq, nextRes, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const doRender = async ({ span, postponed, fallbackRouteParams })=>{\n            const context = {\n                query,\n                params,\n                page: normalizedSrcPage,\n                sharedContext: {\n                    buildId\n                },\n                serverComponentsHmrCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'serverComponentsHmrCache'),\n                fallbackRouteParams,\n                renderOpts: {\n                    App: ()=>null,\n                    Document: ()=>null,\n                    pageConfig: {},\n                    ComponentMod,\n                    Component: (0,next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__.interopDefault)(ComponentMod),\n                    params,\n                    routeModule,\n                    page: srcPage,\n                    postponed,\n                    shouldWaitOnAllReady,\n                    serveStreamingMetadata,\n                    supportsDynamicResponse: typeof postponed === 'string' || supportsDynamicResponse,\n                    buildManifest,\n                    nextFontManifest,\n                    reactLoadableManifest,\n                    subresourceIntegrityManifest,\n                    serverActionsManifest,\n                    clientReferenceManifest,\n                    setIsrStatus: routerServerContext == null ? void 0 : routerServerContext.setIsrStatus,\n                    dir:  true ? (__webpack_require__(/*! path */ \"path\").join)(/* turbopackIgnore: true */ process.cwd(), routeModule.relativeProjectDir) : 0,\n                    isDraftMode,\n                    isRevalidate: isSSG && !postponed && !isDynamicRSCRequest,\n                    botType,\n                    isOnDemandRevalidate,\n                    isPossibleServerAction,\n                    assetPrefix: nextConfig.assetPrefix,\n                    nextConfigOutput: nextConfig.output,\n                    crossOrigin: nextConfig.crossOrigin,\n                    trailingSlash: nextConfig.trailingSlash,\n                    previewProps: prerenderManifest.preview,\n                    deploymentId: nextConfig.deploymentId,\n                    enableTainting: nextConfig.experimental.taint,\n                    htmlLimitedBots: nextConfig.htmlLimitedBots,\n                    devtoolSegmentExplorer: nextConfig.experimental.devtoolSegmentExplorer,\n                    reactMaxHeadersLength: nextConfig.reactMaxHeadersLength,\n                    multiZoneDraftMode,\n                    incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'incrementalCache'),\n                    cacheLifeProfiles: nextConfig.experimental.cacheLife,\n                    basePath: nextConfig.basePath,\n                    serverActions: nextConfig.experimental.serverActions,\n                    ...isDebugStaticShell || isDebugDynamicAccesses ? {\n                        nextExport: true,\n                        supportsDynamicResponse: false,\n                        isStaticGeneration: true,\n                        isRevalidate: true,\n                        isDebugDynamicAccesses: isDebugDynamicAccesses\n                    } : {},\n                    experimental: {\n                        isRoutePPREnabled,\n                        expireTime: nextConfig.expireTime,\n                        staleTimes: nextConfig.experimental.staleTimes,\n                        cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                        clientSegmentCache: Boolean(nextConfig.experimental.clientSegmentCache),\n                        clientParamParsing: Boolean(nextConfig.experimental.clientParamParsing),\n                        dynamicOnHover: Boolean(nextConfig.experimental.dynamicOnHover),\n                        inlineCss: Boolean(nextConfig.experimental.inlineCss),\n                        authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n                        clientTraceMetadata: nextConfig.experimental.clientTraceMetadata || []\n                    },\n                    waitUntil: ctx.waitUntil,\n                    onClose: (cb)=>{\n                        res.on('close', cb);\n                    },\n                    onAfterTaskError: ()=>{},\n                    onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext),\n                    err: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'invokeError'),\n                    dev: routeModule.isDev\n                }\n            };\n            const result = await invokeRouteModule(span, context);\n            const { metadata } = result;\n            const { cacheControl, headers = {}, // Add any fetch tags that were on the page to the response headers.\n            fetchTags: cacheTags } = metadata;\n            if (cacheTags) {\n                headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n            }\n            // Pull any fetch metrics from the render onto the request.\n            ;\n            req.fetchMetrics = metadata.fetchMetrics;\n            // we don't throw static to dynamic errors in dev as isSSG\n            // is a best guess in dev since we don't have the prerender pass\n            // to know whether the path is actually static or not\n            if (isSSG && (cacheControl == null ? void 0 : cacheControl.revalidate) === 0 && !routeModule.isDev && !isRoutePPREnabled) {\n                const staticBailoutInfo = metadata.staticBailoutInfo;\n                const err = Object.defineProperty(new Error(`Page changed from static to dynamic at runtime ${resolvedPathname}${(staticBailoutInfo == null ? void 0 : staticBailoutInfo.description) ? `, reason: ${staticBailoutInfo.description}` : ``}` + `\\nsee more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E132\",\n                    enumerable: false,\n                    configurable: true\n                });\n                if (staticBailoutInfo == null ? void 0 : staticBailoutInfo.stack) {\n                    const stack = staticBailoutInfo.stack;\n                    err.stack = err.message + stack.substring(stack.indexOf('\\n'));\n                }\n                throw err;\n            }\n            return {\n                value: {\n                    kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE,\n                    html: result,\n                    headers,\n                    rscData: metadata.flightData,\n                    postponed: metadata.postponed,\n                    status: metadata.statusCode,\n                    segmentData: metadata.segmentData\n                },\n                cacheControl\n            };\n        };\n        const responseGenerator = async ({ hasResolved, previousCacheEntry, isRevalidating, span })=>{\n            const isProduction = routeModule.isDev === false;\n            const didRespond = hasResolved || res.writableEnded;\n            // skip on-demand revalidate if cache is not present and\n            // revalidate-if-generated is set\n            if (isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry && !minimalMode) {\n                if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n                    await routerServerContext.render404(req, res);\n                } else {\n                    res.statusCode = 404;\n                    res.end('This page could not be found');\n                }\n                return null;\n            }\n            let fallbackMode;\n            if (prerenderInfo) {\n                fallbackMode = (0,next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.parseFallbackField)(prerenderInfo.fallback);\n            }\n            // When serving a HTML bot request, we want to serve a blocking render and\n            // not the prerendered page. This ensures that the correct content is served\n            // to the bot in the head.\n            if (fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.PRERENDER && (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_17__.isBot)(userAgent)) {\n                if (!isRoutePPREnabled || isHtmlBot) {\n                    fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n                }\n            }\n            if ((previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) === -1) {\n                isOnDemandRevalidate = true;\n            }\n            // TODO: adapt for PPR\n            // only allow on-demand revalidate for fallback: true/blocking\n            // or for prerendered fallback: false paths\n            if (isOnDemandRevalidate && (fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND || previousCacheEntry)) {\n                fallbackMode = next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER;\n            }\n            if (!minimalMode && fallbackMode !== next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.BLOCKING_STATIC_RENDER && staticPathKey && !didRespond && !isDraftMode && pageIsDynamic && (isProduction || !isPrerendered)) {\n                // if the page has dynamicParams: false and this pathname wasn't\n                // prerendered trigger the no fallback handling\n                if (// In development, fall through to render to handle missing\n                // getStaticPaths.\n                (isProduction || prerenderInfo) && // When fallback isn't present, abort this render so we 404\n                fallbackMode === next_dist_lib_fallback__WEBPACK_IMPORTED_MODULE_19__.FallbackMode.NOT_FOUND) {\n                    throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError();\n                }\n                let fallbackResponse;\n                if (isRoutePPREnabled && !isRSCRequest) {\n                    const cacheKey = typeof (prerenderInfo == null ? void 0 : prerenderInfo.fallback) === 'string' ? prerenderInfo.fallback : isProduction ? normalizedSrcPage : null;\n                    // We use the response cache here to handle the revalidation and\n                    // management of the fallback shell.\n                    fallbackResponse = await routeModule.handleResponse({\n                        cacheKey,\n                        req,\n                        nextConfig,\n                        routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                        isFallback: true,\n                        prerenderManifest,\n                        isRoutePPREnabled,\n                        responseGenerator: async ()=>doRender({\n                                span,\n                                // We pass `undefined` as rendering a fallback isn't resumed\n                                // here.\n                                postponed: undefined,\n                                fallbackRouteParams: // If we're in production or we're debugging the fallback\n                                // shell then we should postpone when dynamic params are\n                                // accessed.\n                                isProduction || isDebugFallbackShell ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(normalizedSrcPage) : null\n                            }),\n                        waitUntil: ctx.waitUntil\n                    });\n                    // If the fallback response was set to null, then we should return null.\n                    if (fallbackResponse === null) return null;\n                    // Otherwise, if we did get a fallback response, we should return it.\n                    if (fallbackResponse) {\n                        // Remove the cache control from the response to prevent it from being\n                        // used in the surrounding cache.\n                        delete fallbackResponse.cacheControl;\n                        return fallbackResponse;\n                    }\n                }\n            }\n            // Only requests that aren't revalidating can be resumed. If we have the\n            // minimal postponed data, then we should resume the render with it.\n            const postponed = !isOnDemandRevalidate && !isRevalidating && minimalPostponed ? minimalPostponed : undefined;\n            // When we're in minimal mode, if we're trying to debug the static shell,\n            // we should just return nothing instead of resuming the dynamic render.\n            if ((isDebugStaticShell || isDebugDynamicAccesses) && typeof postponed !== 'undefined') {\n                return {\n                    cacheControl: {\n                        revalidate: 1,\n                        expire: undefined\n                    },\n                    value: {\n                        kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.PAGES,\n                        html: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                        pageData: {},\n                        headers: undefined,\n                        status: undefined\n                    }\n                };\n            }\n            // If this is a dynamic route with PPR enabled and the default route\n            // matches were set, then we should pass the fallback route params to\n            // the renderer as this is a fallback revalidation request.\n            const fallbackRouteParams = pageIsDynamic && isRoutePPREnabled && ((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'renderFallbackShell') || isDebugFallbackShell) ? (0,next_dist_server_request_fallback_params__WEBPACK_IMPORTED_MODULE_10__.getFallbackRouteParams)(pathname) : null;\n            // Perform the render.\n            return doRender({\n                span,\n                postponed,\n                fallbackRouteParams\n            });\n        };\n        const handleResponse = async (span)=>{\n            var _cacheEntry_value, _cachedData_headers;\n            const cacheEntry = await routeModule.handleResponse({\n                cacheKey: ssgCacheKey,\n                responseGenerator: (c)=>responseGenerator({\n                        span,\n                        ...c\n                    }),\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n                isOnDemandRevalidate,\n                isRoutePPREnabled,\n                req,\n                nextConfig,\n                prerenderManifest,\n                waitUntil: ctx.waitUntil\n            });\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            // In dev, we should not cache pages for any reason.\n            if (routeModule.isDev) {\n                res.setHeader('Cache-Control', 'no-store, must-revalidate');\n            }\n            if (!cacheEntry) {\n                if (ssgCacheKey) {\n                    // A cache entry might not be generated if a response is written\n                    // in `getInitialProps` or `getServerSideProps`, but those shouldn't\n                    // have a cache key. If we do have a cache key but we don't end up\n                    // with a cache entry, then either Next.js or the application has a\n                    // bug that needs fixing.\n                    throw Object.defineProperty(new Error('invariant: cache entry required but not generated'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E62\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                return null;\n            }\n            if (((_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant app-page handler received invalid cache entry ${(_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E707\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            const didPostpone = typeof cacheEntry.value.postponed === 'string';\n            if (isSSG && // We don't want to send a cache header for requests that contain dynamic\n            // data. If this is a Dynamic RSC request or wasn't a Prefetch RSC\n            // request, then we should set the cache header.\n            !isDynamicRSCRequest && (!didPostpone || isPrefetchRSCRequest)) {\n                if (!minimalMode) {\n                    // set x-nextjs-cache header to match the header\n                    // we set for the image-optimizer\n                    res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n                }\n                // Set a header used by the client router to signal the response is static\n                // and should respect the `static` cache staleTime value.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_IS_PRERENDER_HEADER, '1');\n            }\n            const { value: cachedData } = cacheEntry;\n            // Coerce the cache control parameter from the render.\n            let cacheControl;\n            // If this is a resume request in minimal mode it is streamed with dynamic\n            // content and should not be cached.\n            if (minimalPostponed) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (minimalMode && isRSCRequest && !isPrefetchRSCRequest && isRoutePPREnabled) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (!routeModule.isDev) {\n                // If this is a preview mode request, we shouldn't cache it\n                if (isDraftMode) {\n                    cacheControl = {\n                        revalidate: 0,\n                        expire: undefined\n                    };\n                } else if (!isSSG) {\n                    if (!res.getHeader('Cache-Control')) {\n                        cacheControl = {\n                            revalidate: 0,\n                            expire: undefined\n                        };\n                    }\n                } else if (cacheEntry.cacheControl) {\n                    // If the cache entry has a cache control with a revalidate value that's\n                    // a number, use it.\n                    if (typeof cacheEntry.cacheControl.revalidate === 'number') {\n                        var _cacheEntry_cacheControl;\n                        if (cacheEntry.cacheControl.revalidate < 1) {\n                            throw Object.defineProperty(new Error(`Invalid revalidate configuration provided: ${cacheEntry.cacheControl.revalidate} < 1`), \"__NEXT_ERROR_CODE\", {\n                                value: \"E22\",\n                                enumerable: false,\n                                configurable: true\n                            });\n                        }\n                        cacheControl = {\n                            revalidate: cacheEntry.cacheControl.revalidate,\n                            expire: ((_cacheEntry_cacheControl = cacheEntry.cacheControl) == null ? void 0 : _cacheEntry_cacheControl.expire) ?? nextConfig.expireTime\n                        };\n                    } else {\n                        cacheControl = {\n                            revalidate: next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.CACHE_ONE_YEAR,\n                            expire: undefined\n                        };\n                    }\n                }\n            }\n            cacheEntry.cacheControl = cacheControl;\n            if (typeof segmentPrefetchHeader === 'string' && (cachedData == null ? void 0 : cachedData.kind) === next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE && cachedData.segmentData) {\n                var _cachedData_headers1;\n                // This is a prefetch request issued by the client Segment Cache. These\n                // should never reach the application layer (lambda). We should either\n                // respond from the cache (HIT) or respond with 204 No Content (MISS).\n                // Set a header to indicate that PPR is enabled for this route. This\n                // lets the client distinguish between a regular cache miss and a cache\n                // miss due to PPR being disabled. In other contexts this header is used\n                // to indicate that the response contains dynamic data, but here we're\n                // only using it to indicate that the feature is enabled  the segment\n                // response itself contains whether the data is dynamic.\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '2');\n                // Add the cache tags header to the response if it exists and we're in\n                // minimal mode while rendering a static page.\n                const tags = (_cachedData_headers1 = cachedData.headers) == null ? void 0 : _cachedData_headers1[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                    res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n                }\n                const matchedSegment = cachedData.segmentData.get(segmentPrefetchHeader);\n                if (matchedSegment !== undefined) {\n                    // Cache hit\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(matchedSegment, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                        cacheControl: cacheEntry.cacheControl\n                    });\n                }\n                // Cache miss. Either a cache entry for this route has not been generated\n                // (which technically should not be possible when PPR is enabled, because\n                // at a minimum there should always be a fallback entry) or there's no\n                // match for the requested segment. Respond with a 204 No Content. We\n                // don't bother to respond with 404, because these requests are only\n                // issued as part of a prefetch.\n                res.statusCode = 204;\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].EMPTY,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If there's a callback for `onCacheEntry`, call it with the cache entry\n            // and the revalidate options.\n            const onCacheEntry = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'onCacheEntry');\n            if (onCacheEntry) {\n                const finished = await onCacheEntry({\n                    ...cacheEntry,\n                    // TODO: remove this when upstream doesn't\n                    // always expect this value to be \"PAGE\"\n                    value: {\n                        ...cacheEntry.value,\n                        kind: 'PAGE'\n                    }\n                }, {\n                    url: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_4__.getRequestMeta)(req, 'initURL')\n                });\n                if (finished) {\n                    // TODO: maybe we have to end the request?\n                    return null;\n                }\n            }\n            // If the request has a postponed state and it's a resume request we\n            // should error.\n            if (didPostpone && minimalPostponed) {\n                throw Object.defineProperty(new Error('Invariant: postponed state should not be present on a resume request'), \"__NEXT_ERROR_CODE\", {\n                    value: \"E396\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (cachedData.headers) {\n                const headers = {\n                    ...cachedData.headers\n                };\n                if (!minimalMode || !isSSG) {\n                    delete headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n                }\n                for (let [key, value] of Object.entries(headers)){\n                    if (typeof value === 'undefined') continue;\n                    if (Array.isArray(value)) {\n                        for (const v of value){\n                            res.appendHeader(key, v);\n                        }\n                    } else if (typeof value === 'number') {\n                        value = value.toString();\n                        res.appendHeader(key, value);\n                    } else {\n                        res.appendHeader(key, value);\n                    }\n                }\n            }\n            // Add the cache tags header to the response if it exists and we're in\n            // minimal mode while rendering a static page.\n            const tags = (_cachedData_headers = cachedData.headers) == null ? void 0 : _cachedData_headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER];\n            if (minimalMode && isSSG && tags && typeof tags === 'string') {\n                res.setHeader(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_21__.NEXT_CACHE_TAGS_HEADER, tags);\n            }\n            // If the request is a data request, then we shouldn't set the status code\n            // from the response because it should always be 200. This should be gated\n            // behind the experimental PPR flag.\n            if (cachedData.status && (!isRSCRequest || !isRoutePPREnabled)) {\n                res.statusCode = cachedData.status;\n            }\n            // Redirect information is encoded in RSC payload, so we don't need to use redirect status codes\n            if (!minimalMode && cachedData.status && next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_27__.RedirectStatusCode[cachedData.status] && isRSCRequest) {\n                res.statusCode = 200;\n            }\n            // Mark that the request did postpone.\n            if (didPostpone) {\n                res.setHeader(next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.NEXT_DID_POSTPONE_HEADER, '1');\n            }\n            // we don't go through this block when preview mode is true\n            // as preview mode is a dynamic request (bypasses cache) and doesn't\n            // generate both HTML and payloads in the same request so continue to just\n            // return the generated payload\n            if (isRSCRequest && !isDraftMode) {\n                // If this is a dynamic RSC request, then stream the response.\n                if (typeof cachedData.rscData === 'undefined') {\n                    if (cachedData.postponed) {\n                        throw Object.defineProperty(new Error('Invariant: Expected postponed to be undefined'), \"__NEXT_ERROR_CODE\", {\n                            value: \"E372\",\n                            enumerable: false,\n                            configurable: true\n                        });\n                    }\n                    return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                        req,\n                        res,\n                        generateEtags: nextConfig.generateEtags,\n                        poweredByHeader: nextConfig.poweredByHeader,\n                        result: cachedData.html,\n                        // Dynamic RSC responses cannot be cached, even if they're\n                        // configured with `force-static` because we have no way of\n                        // distinguishing between `force-static` and pages that have no\n                        // postponed state.\n                        // TODO: distinguish `force-static` from pages with no postponed state (static)\n                        cacheControl: isDynamicRSCRequest ? {\n                            revalidate: 0,\n                            expire: undefined\n                        } : cacheEntry.cacheControl\n                    });\n                }\n                // As this isn't a prefetch request, we should serve the static flight\n                // data.\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_20__[\"default\"].fromStatic(cachedData.rscData, next_dist_client_components_app_router_headers__WEBPACK_IMPORTED_MODULE_16__.RSC_CONTENT_TYPE_HEADER),\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // This is a request for HTML data.\n            let body = cachedData.html;\n            // If there's no postponed state, we should just serve the HTML. This\n            // should also be the case for a resume request because it's completed\n            // as a server render (rather than a static render).\n            if (!didPostpone || minimalMode || isRSCRequest) {\n                // If we're in test mode, we should add a sentinel chunk to the response\n                // that's between the static and dynamic parts so we can compare the\n                // chunks and add assertions.\n                if (false) {}\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: cacheEntry.cacheControl\n                });\n            }\n            // If we're debugging the static shell or the dynamic API accesses, we\n            // should just serve the HTML without resuming the render. The returned\n            // HTML will be the static shell so all the Dynamic API's will be used\n            // during static generation.\n            if (isDebugStaticShell || isDebugDynamicAccesses) {\n                // Since we're not resuming the render, we need to at least add the\n                // closing body and html tags to create valid HTML.\n                body.push(new ReadableStream({\n                    start (controller) {\n                        controller.enqueue(next_dist_server_stream_utils_encoded_tags__WEBPACK_IMPORTED_MODULE_22__.ENCODED_TAGS.CLOSED.BODY_AND_HTML);\n                        controller.close();\n                    }\n                }));\n                return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                    req,\n                    res,\n                    generateEtags: nextConfig.generateEtags,\n                    poweredByHeader: nextConfig.poweredByHeader,\n                    result: body,\n                    cacheControl: {\n                        revalidate: 0,\n                        expire: undefined\n                    }\n                });\n            }\n            // If we're in test mode, we should add a sentinel chunk to the response\n            // that's between the static and dynamic parts so we can compare the\n            // chunks and add assertions.\n            if (false) {}\n            // This request has postponed, so let's create a new transformer that the\n            // dynamic data can pipe to that will attach the dynamic data to the end\n            // of the response.\n            const transformer = new TransformStream();\n            body.push(transformer.readable);\n            // Perform the render again, but this time, provide the postponed state.\n            // We don't await because we want the result to start streaming now, and\n            // we've already chained the transformer's readable to the render result.\n            doRender({\n                span,\n                postponed: cachedData.postponed,\n                // This is a resume render, not a fallback render, so we don't need to\n                // set this.\n                fallbackRouteParams: null\n            }).then(async (result)=>{\n                var _result_value;\n                if (!result) {\n                    throw Object.defineProperty(new Error('Invariant: expected a result to be returned'), \"__NEXT_ERROR_CODE\", {\n                        value: \"E463\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                if (((_result_value = result.value) == null ? void 0 : _result_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_18__.CachedRouteKind.APP_PAGE) {\n                    var _result_value1;\n                    throw Object.defineProperty(new Error(`Invariant: expected a page response, got ${(_result_value1 = result.value) == null ? void 0 : _result_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                        value: \"E305\",\n                        enumerable: false,\n                        configurable: true\n                    });\n                }\n                // Pipe the resume result to the transformer.\n                await result.value.html.pipeTo(transformer.writable);\n            }).catch((err)=>{\n                // An error occurred during piping or preparing the render, abort\n                // the transformers writer so we can terminate the stream.\n                transformer.writable.abort(err).catch((e)=>{\n                    console.error(\"couldn't abort transformer\", e);\n                });\n            });\n            return (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_23__.sendRenderResult)({\n                req,\n                res,\n                generateEtags: nextConfig.generateEtags,\n                poweredByHeader: nextConfig.poweredByHeader,\n                result: body,\n                // We don't want to cache the response if it has postponed data because\n                // the response being sent to the client it's dynamic parts are streamed\n                // to the client on the same request.\n                cacheControl: {\n                    revalidate: 0,\n                    expire: undefined\n                }\n            });\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            return await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_5__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_24__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: srcPage,\n                routeType: 'render',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_2__.getRevalidateReason)({\n                    isRevalidate: isSSG,\n                    isOnDemandRevalidate\n                })\n            }, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        throw err;\n    }\n}\n// TODO: omit this from production builds, only test builds should include it\n/**\n * Creates a readable stream that emits a PPR boundary sentinel.\n *\n * @returns A readable stream that emits a PPR boundary sentinel.\n */ function createPPRBoundarySentinel() {\n    return new ReadableStream({\n        start (controller) {\n            controller.enqueue(new TextEncoder().encode('<!-- PPR_BOUNDARY_SENTINEL -->'));\n            controller.close();\n        }\n    });\n}\n\n//# sourceMappingURL=app-page.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPUMlM0ElNUNVc2VycyU1Q0xFTk9WTyU1Q0Rlc2t0b3AlNUNzaGFoYXIlNUNib29rYWklNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0xFTk9WTyU1Q0Rlc2t0b3AlNUNzaGFoYXIlNUNib29rYWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0JBQXNCLDRJQUFnRztBQUN0SCxzQkFBc0IsdU9BQXdGO0FBQzlHLHNCQUFzQixpT0FBcUY7QUFDM0csc0JBQXNCLGlPQUFxRjtBQUMzRyxzQkFBc0IsdU9BQXdGO0FBQzlHLG9CQUFvQix3SUFBOEY7QUFHaEg7QUFHQTtBQUMyRTtBQUNMO0FBQ1Q7QUFDTztBQUNPO0FBQ1M7QUFDRjtBQUNQO0FBQ0s7QUFDWTtBQUNXO0FBQ3hCO0FBQ0Y7QUFDYTtBQUMwRjtBQUN6RztBQUNYO0FBQ1E7QUFDaEI7QUFDaUQ7QUFDakM7QUFDVDtBQUNpQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFD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QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb2R1bGUwID0gKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXGFwcFxcXFxsYXlvdXQudHN4XCIpO1xuY29uc3QgbW9kdWxlMSA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZ2xvYmFsLWVycm9yLmpzXCIpO1xuY29uc3QgbW9kdWxlMiA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vbm90LWZvdW5kLmpzXCIpO1xuY29uc3QgbW9kdWxlMyA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZm9yYmlkZGVuLmpzXCIpO1xuY29uc3QgbW9kdWxlNCA9ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vdW5hdXRob3JpemVkLmpzXCIpO1xuY29uc3QgcGFnZTUgPSAoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXHNoYWhhclxcXFxib29rYWlcXFxcYXBwXFxcXHBhZ2UudHN4XCIpO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcGFnZS9tb2R1bGUuY29tcGlsZWRcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zc3InXG59O1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBpbnRlcm9wRGVmYXVsdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvaW50ZXJvcC1kZWZhdWx0XCI7XG5pbXBvcnQgeyBzdHJpcEZsaWdodEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL3N0cmlwLWZsaWdodC1oZWFkZXJzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgY2hlY2tJc0FwcFBQUkVuYWJsZWQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvZXhwZXJpbWVudGFsL3BwclwiO1xuaW1wb3J0IHsgZ2V0RmFsbGJhY2tSb3V0ZVBhcmFtcyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QvZmFsbGJhY2stcGFyYW1zXCI7XG5pbXBvcnQgeyBzZXRSZWZlcmVuY2VNYW5pZmVzdHNTaW5nbGV0b24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VuY3J5cHRpb24tdXRpbHNcIjtcbmltcG9ydCB7IGlzSHRtbEJvdFJlcXVlc3QsIHNob3VsZFNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvc3RyZWFtaW5nLW1ldGFkYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJNb2R1bGVNYXAgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2FjdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBnZXRJc1Bvc3NpYmxlU2VydmVyQWN0aW9uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3NlcnZlci1hY3Rpb24tcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBSU0NfSEVBREVSLCBORVhUX1JPVVRFUl9QUkVGRVRDSF9IRUFERVIsIE5FWFRfSVNfUFJFUkVOREVSX0hFQURFUiwgTkVYVF9ESURfUE9TVFBPTkVfSEVBREVSLCBSU0NfQ09OVEVOVF9UWVBFX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYXBwLXJvdXRlci1oZWFkZXJzXCI7XG5pbXBvcnQgeyBnZXRCb3RUeXBlLCBpc0JvdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvaXMtYm90XCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0IHsgRmFsbGJhY2tNb2RlLCBwYXJzZUZhbGxiYWNrRmllbGQgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9mYWxsYmFja1wiO1xuaW1wb3J0IFJlbmRlclJlc3VsdCBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZW5kZXItcmVzdWx0XCI7XG5pbXBvcnQgeyBDQUNIRV9PTkVfWUVBUiwgSFRNTF9DT05URU5UX1RZUEVfSEVBREVSLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBFTkNPREVEX1RBR1MgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zdHJlYW0tdXRpbHMvZW5jb2RlZC10YWdzXCI7XG5pbXBvcnQgeyBzZW5kUmVuZGVyUmVzdWx0IH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1wYXlsb2FkXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbi8vIFdlIGluamVjdCB0aGUgdHJlZSBhbmQgcGFnZXMgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IHRyZWUgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICcnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbJ19fUEFHRV9fJywge30sIHtcbiAgICAgICAgICBwYWdlOiBbcGFnZTUsIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxhcHBcXFxccGFnZS50c3hcIl0sXG4gICAgICAgICAgXG4gICAgICAgIH1dXG4gICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICdsYXlvdXQnOiBbbW9kdWxlMCwgXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXGFwcFxcXFxsYXlvdXQudHN4XCJdLFxuJ2dsb2JhbC1lcnJvcic6IFttb2R1bGUxLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9idWlsdGluL2dsb2JhbC1lcnJvci5qc1wiXSxcbidub3QtZm91bmQnOiBbbW9kdWxlMiwgXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvYnVpbHRpbi9ub3QtZm91bmQuanNcIl0sXG4nZm9yYmlkZGVuJzogW21vZHVsZTMsIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2J1aWx0aW4vZm9yYmlkZGVuLmpzXCJdLFxuJ3VuYXV0aG9yaXplZCc6IFttb2R1bGU0LCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9idWlsdGluL3VuYXV0aG9yaXplZC5qc1wiXSxcbiAgICAgICAgXG4gICAgICB9XG4gICAgICBdXG4gICAgICB9LmNoaWxkcmVuO1xuY29uc3QgcGFnZXMgPSBbXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXGFwcFxcXFxwYWdlLnRzeFwiXTtcbmV4cG9ydCB7IHRyZWUsIHBhZ2VzIH07XG5pbXBvcnQgR2xvYmFsRXJyb3IgZnJvbSBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9idWlsdGluL2dsb2JhbC1lcnJvci5qc1wiIHdpdGgge1xuICAgICd0dXJib3BhY2stdHJhbnNpdGlvbic6ICduZXh0LXNlcnZlci11dGlsaXR5J1xufTtcbmV4cG9ydCB7IEdsb2JhbEVycm9yIH07XG5jb25zdCBfX25leHRfYXBwX3JlcXVpcmVfXyA9IF9fd2VicGFja19yZXF1aXJlX19cbmNvbnN0IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcbmV4cG9ydCBjb25zdCBfX25leHRfYXBwX18gPSB7XG4gICAgcmVxdWlyZTogX19uZXh0X2FwcF9yZXF1aXJlX18sXG4gICAgbG9hZENodW5rOiBfX25leHRfYXBwX2xvYWRfY2h1bmtfX1xufTtcbmltcG9ydCAqIGFzIGVudHJ5QmFzZSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VudHJ5LWJhc2VcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zZXJ2ZXItdXRpbGl0eSdcbn07XG5pbXBvcnQgeyBSZWRpcmVjdFN0YXR1c0NvZGUgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlZGlyZWN0LXN0YXR1cy1jb2RlXCI7XG5leHBvcnQgKiBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VudHJ5LWJhc2VcIiB3aXRoIHtcbiAgICAndHVyYm9wYWNrLXRyYW5zaXRpb24nOiAnbmV4dC1zZXJ2ZXItdXRpbGl0eSdcbn07XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBQYWdlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICBwYWdlOiBcIi9wYWdlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnLFxuICAgICAgICBhcHBQYXRoczogW11cbiAgICB9LFxuICAgIHVzZXJsYW5kOiB7XG4gICAgICAgIGxvYWRlclRyZWU6IHRyZWVcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF90aGlzO1xuICAgIGxldCBzcmNQYWdlID0gXCIvcGFnZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IGluaXRpYWxQb3N0cG9uZWQgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdwb3N0cG9uZWQnKTtcbiAgICAvLyBUT0RPOiByZXBsYWNlIHdpdGggbW9yZSBzcGVjaWZpYyBmbGFnc1xuICAgIGNvbnN0IG1pbmltYWxNb2RlID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKTtcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlLFxuICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGVcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYnVpbGRJZCwgcXVlcnksIHBhcmFtcywgcGFyc2VkVXJsLCBwYWdlSXNEeW5hbWljLCBidWlsZE1hbmlmZXN0LCBuZXh0Rm9udE1hbmlmZXN0LCByZWFjdExvYWRhYmxlTWFuaWZlc3QsIHNlcnZlckFjdGlvbnNNYW5pZmVzdCwgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QsIHN1YnJlc291cmNlSW50ZWdyaXR5TWFuaWZlc3QsIHByZXJlbmRlck1hbmlmZXN0LCBpc0RyYWZ0TW9kZSwgcmVzb2x2ZWRQYXRobmFtZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJvdXRlclNlcnZlckNvbnRleHQsIG5leHRDb25maWcsIGludGVyY2VwdGlvblJvdXRlUGF0dGVybnMgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3QgcGF0aG5hbWUgPSBwYXJzZWRVcmwucGF0aG5hbWUgfHwgJy8nO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgeyBpc09uRGVtYW5kUmV2YWxpZGF0ZSB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcm91dGVNb2R1bGUubWF0Y2gocGF0aG5hbWUsIHByZXJlbmRlck1hbmlmZXN0KTtcbiAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gISFwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV07XG4gICAgbGV0IGlzU1NHID0gQm9vbGVhbihwcmVyZW5kZXJJbmZvIHx8IGlzUHJlcmVuZGVyZWQgfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSk7XG4gICAgY29uc3QgdXNlckFnZW50ID0gcmVxLmhlYWRlcnNbJ3VzZXItYWdlbnQnXSB8fCAnJztcbiAgICBjb25zdCBib3RUeXBlID0gZ2V0Qm90VHlwZSh1c2VyQWdlbnQpO1xuICAgIGNvbnN0IGlzSHRtbEJvdCA9IGlzSHRtbEJvdFJlcXVlc3QocmVxKTtcbiAgICAvKipcbiAgICogSWYgdHJ1ZSwgdGhpcyBpbmRpY2F0ZXMgdGhhdCB0aGUgcmVxdWVzdCBiZWluZyBtYWRlIGlzIGZvciBhbiBhcHBcbiAgICogcHJlZmV0Y2ggcmVxdWVzdC5cbiAgICovIGNvbnN0IGlzUHJlZmV0Y2hSU0NSZXF1ZXN0ID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAnaXNQcmVmZXRjaFJTQ1JlcXVlc3QnKSA/PyByZXEuaGVhZGVyc1tORVhUX1JPVVRFUl9QUkVGRVRDSF9IRUFERVJdID09PSAnMScgLy8gZXhjbHVkZSBydW50aW1lIHByZWZldGNoZXMsIHdoaWNoIHVzZSAnMidcbiAgICA7XG4gICAgLy8gTk9URTogRG9uJ3QgZGVsZXRlIGhlYWRlcnNbUlNDXSB5ZXQsIGl0IHN0aWxsIG5lZWRzIHRvIGJlIHVzZWQgaW4gcmVuZGVyVG9IVE1MIGxhdGVyXG4gICAgY29uc3QgaXNSU0NSZXF1ZXN0ID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAnaXNSU0NSZXF1ZXN0JykgPz8gQm9vbGVhbihyZXEuaGVhZGVyc1tSU0NfSEVBREVSXSk7XG4gICAgY29uc3QgaXNQb3NzaWJsZVNlcnZlckFjdGlvbiA9IGdldElzUG9zc2libGVTZXJ2ZXJBY3Rpb24ocmVxKTtcbiAgICAvKipcbiAgICogSWYgdGhlIHJvdXRlIGJlaW5nIHJlbmRlcmVkIGlzIGFuIGFwcCBwYWdlLCBhbmQgdGhlIHBwciBmZWF0dXJlIGhhcyBiZWVuXG4gICAqIGVuYWJsZWQsIHRoZW4gdGhlIGdpdmVuIHJvdXRlIF9jb3VsZF8gc3VwcG9ydCBQUFIuXG4gICAqLyBjb25zdCBjb3VsZFN1cHBvcnRQUFIgPSBjaGVja0lzQXBwUFBSRW5hYmxlZChuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5wcHIpO1xuICAgIC8vIFdoZW4gZW5hYmxlZCwgdGhpcyB3aWxsIGFsbG93IHRoZSB1c2Ugb2YgdGhlIGA/X19uZXh0cHByb25seWAgcXVlcnkgdG9cbiAgICAvLyBlbmFibGUgZGVidWdnaW5nIG9mIHRoZSBzdGF0aWMgc2hlbGwuXG4gICAgY29uc3QgaGFzRGVidWdTdGF0aWNTaGVsbFF1ZXJ5ID0gcHJvY2Vzcy5lbnYuX19ORVhUX0VYUEVSSU1FTlRBTF9TVEFUSUNfU0hFTExfREVCVUdHSU5HID09PSAnMScgJiYgdHlwZW9mIHF1ZXJ5Ll9fbmV4dHBwcm9ubHkgIT09ICd1bmRlZmluZWQnICYmIGNvdWxkU3VwcG9ydFBQUjtcbiAgICAvLyBXaGVuIGVuYWJsZWQsIHRoaXMgd2lsbCBhbGxvdyB0aGUgdXNlIG9mIHRoZSBgP19fbmV4dHBwcm9ubHlgIHF1ZXJ5XG4gICAgLy8gdG8gZW5hYmxlIGRlYnVnZ2luZyBvZiB0aGUgZmFsbGJhY2sgc2hlbGwuXG4gICAgY29uc3QgaGFzRGVidWdGYWxsYmFja1NoZWxsUXVlcnkgPSBoYXNEZWJ1Z1N0YXRpY1NoZWxsUXVlcnkgJiYgcXVlcnkuX19uZXh0cHByb25seSA9PT0gJ2ZhbGxiYWNrJztcbiAgICAvLyBUaGlzIHBhZ2Ugc3VwcG9ydHMgUFBSIGlmIGl0IGlzIG1hcmtlZCBhcyBiZWluZyBgUEFSVElBTExZX1NUQVRJQ2AgaW4gdGhlXG4gICAgLy8gcHJlcmVuZGVyIG1hbmlmZXN0IGFuZCB0aGlzIGlzIGFuIGFwcCBwYWdlLlxuICAgIGNvbnN0IGlzUm91dGVQUFJFbmFibGVkID0gY291bGRTdXBwb3J0UFBSICYmICgoKF90aGlzID0gcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSA/PyBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF90aGlzLnJlbmRlcmluZ01vZGUpID09PSAnUEFSVElBTExZX1NUQVRJQycgfHwgLy8gSWRlYWxseSB3ZSdkIHdhbnQgdG8gY2hlY2sgdGhlIGFwcENvbmZpZyB0byBzZWUgaWYgdGhpcyBwYWdlIGhhcyBQUFJcbiAgICAvLyBlbmFibGVkIG9yIG5vdCwgYnV0IHRoYXQgd291bGQgcmVxdWlyZSBwbHVtYmluZyB0aGUgYXBwQ29uZmlnIHRocm91Z2hcbiAgICAvLyB0byB0aGUgc2VydmVyIGR1cmluZyBkZXZlbG9wbWVudC4gV2UgYXNzdW1lIHRoYXQgdGhlIHBhZ2Ugc3VwcG9ydHMgaXRcbiAgICAvLyBidXQgb25seSBkdXJpbmcgZGV2ZWxvcG1lbnQuXG4gICAgaGFzRGVidWdTdGF0aWNTaGVsbFF1ZXJ5ICYmIChyb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAocm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5leHBlcmltZW50YWxUZXN0UHJveHkpID09PSB0cnVlKSk7XG4gICAgY29uc3QgaXNEZWJ1Z1N0YXRpY1NoZWxsID0gaGFzRGVidWdTdGF0aWNTaGVsbFF1ZXJ5ICYmIGlzUm91dGVQUFJFbmFibGVkO1xuICAgIC8vIFdlIHNob3VsZCBlbmFibGUgZGVidWdnaW5nIGR5bmFtaWMgYWNjZXNzZXMgd2hlbiB0aGUgc3RhdGljIHNoZWxsXG4gICAgLy8gZGVidWdnaW5nIGhhcyBiZWVuIGVuYWJsZWQgYW5kIHdlJ3JlIGFsc28gaW4gZGV2ZWxvcG1lbnQgbW9kZS5cbiAgICBjb25zdCBpc0RlYnVnRHluYW1pY0FjY2Vzc2VzID0gaXNEZWJ1Z1N0YXRpY1NoZWxsICYmIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlO1xuICAgIGNvbnN0IGlzRGVidWdGYWxsYmFja1NoZWxsID0gaGFzRGVidWdGYWxsYmFja1NoZWxsUXVlcnkgJiYgaXNSb3V0ZVBQUkVuYWJsZWQ7XG4gICAgLy8gSWYgd2UncmUgaW4gbWluaW1hbCBtb2RlLCB0aGVuIHRyeSB0byBnZXQgdGhlIHBvc3Rwb25lZCBpbmZvcm1hdGlvbiBmcm9tXG4gICAgLy8gdGhlIHJlcXVlc3QgbWV0YWRhdGEuIElmIGF2YWlsYWJsZSwgdXNlIGl0IGZvciByZXN1bWluZyB0aGUgcG9zdHBvbmVkXG4gICAgLy8gcmVuZGVyLlxuICAgIGNvbnN0IG1pbmltYWxQb3N0cG9uZWQgPSBpc1JvdXRlUFBSRW5hYmxlZCA/IGluaXRpYWxQb3N0cG9uZWQgOiB1bmRlZmluZWQ7XG4gICAgLy8gSWYgUFBSIGlzIGVuYWJsZWQsIGFuZCB0aGlzIGlzIGEgUlNDIHJlcXVlc3QgKGJ1dCBub3QgYSBwcmVmZXRjaCksIHRoZW5cbiAgICAvLyB3ZSBjYW4gdXNlIHRoaXMgZmFjdCB0byBvbmx5IGdlbmVyYXRlIHRoZSBmbGlnaHQgZGF0YSBmb3IgdGhlIHJlcXVlc3RcbiAgICAvLyBiZWNhdXNlIHdlIGNhbid0IGNhY2hlIHRoZSBIVE1MIChhcyBpdCdzIGFsc28gZHluYW1pYykuXG4gICAgY29uc3QgaXNEeW5hbWljUlNDUmVxdWVzdCA9IGlzUm91dGVQUFJFbmFibGVkICYmIGlzUlNDUmVxdWVzdCAmJiAhaXNQcmVmZXRjaFJTQ1JlcXVlc3Q7XG4gICAgLy8gTmVlZCB0byByZWFkIHRoaXMgYmVmb3JlIGl0J3Mgc3RyaXBwZWQgYnkgc3RyaXBGbGlnaHRIZWFkZXJzLiBXZSBkb24ndFxuICAgIC8vIG5lZWQgdG8gdHJhbnNmZXIgaXQgdG8gdGhlIHJlcXVlc3QgbWV0YSBiZWNhdXNlIGl0J3Mgb25seSByZWFkXG4gICAgLy8gd2l0aGluIHRoaXMgZnVuY3Rpb247IHRoZSBzdGF0aWMgc2VnbWVudCBkYXRhIHNob3VsZCBoYXZlIGFscmVhZHkgYmVlblxuICAgIC8vIGdlbmVyYXRlZCwgc28gd2Ugd2lsbCBhbHdheXMgZWl0aGVyIHJldHVybiBhIHN0YXRpYyByZXNwb25zZSBvciBhIDQwNC5cbiAgICBjb25zdCBzZWdtZW50UHJlZmV0Y2hIZWFkZXIgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdzZWdtZW50UHJlZmV0Y2hSU0NSZXF1ZXN0Jyk7XG4gICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgZXhpc3RpbmcgYnVnIHdpdGggc2hvdWxkU2VydmVTdHJlYW1pbmdNZXRhZGF0YSBhbHdheXNcbiAgICAvLyBiZWluZyB0cnVlIGZvciBhIHJldmFsaWRhdGUgZHVlIHRvIG1vZGlmeWluZyB0aGUgYmFzZS1zZXJ2ZXIgdGhpcy5yZW5kZXJPcHRzXG4gICAgLy8gd2hlbiBmaXhpbmcgdGhpcyB0byBjb3JyZWN0IGxvZ2ljIGl0IGNhdXNlcyBoeWRyYXRpb24gaXNzdWUgc2luY2Ugd2Ugc2V0XG4gICAgLy8gc2VydmVTdHJlYW1pbmdNZXRhZGF0YSB0byB0cnVlIGR1cmluZyBleHBvcnRcbiAgICBsZXQgc2VydmVTdHJlYW1pbmdNZXRhZGF0YSA9ICF1c2VyQWdlbnQgPyB0cnVlIDogc2hvdWxkU2VydmVTdHJlYW1pbmdNZXRhZGF0YSh1c2VyQWdlbnQsIG5leHRDb25maWcuaHRtbExpbWl0ZWRCb3RzKTtcbiAgICBpZiAoaXNIdG1sQm90ICYmIGlzUm91dGVQUFJFbmFibGVkKSB7XG4gICAgICAgIGlzU1NHID0gZmFsc2U7XG4gICAgICAgIHNlcnZlU3RyZWFtaW5nTWV0YWRhdGEgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gSW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyB3YW50IHRvIGdlbmVyYXRlIGR5bmFtaWMgSFRNTC5cbiAgICBsZXQgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MLCB1bmxlc3MgaXQnc1xuICAgIC8vIGEgZGF0YSByZXF1ZXN0LCBpbiB3aGljaCBjYXNlIHdlIG9ubHkgcHJvZHVjZSBzdGF0aWMgSFRNTC5cbiAgICByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAvLyBJZiB0aGlzIGlzIG5vdCBTU0cgb3IgZG9lcyBub3QgaGF2ZSBzdGF0aWMgcGF0aHMsIHRoZW4gaXQgc3VwcG9ydHNcbiAgICAvLyBkeW5hbWljIEhUTUwuXG4gICAgIWlzU1NHIHx8IC8vIElmIHRoaXMgcmVxdWVzdCBoYXMgcHJvdmlkZWQgcG9zdHBvbmVkIGRhdGEsIGl0IHN1cHBvcnRzIGR5bmFtaWNcbiAgICAvLyBIVE1MLlxuICAgIHR5cGVvZiBpbml0aWFsUG9zdHBvbmVkID09PSAnc3RyaW5nJyB8fCAvLyBJZiB0aGlzIGlzIGEgZHluYW1pYyBSU0MgcmVxdWVzdCwgdGhlbiB0aGlzIHJlbmRlciBzdXBwb3J0cyBkeW5hbWljXG4gICAgLy8gSFRNTCAoaXQncyBkeW5hbWljKS5cbiAgICBpc0R5bmFtaWNSU0NSZXF1ZXN0O1xuICAgIC8vIFdoZW4gaHRtbCBib3RzIHJlcXVlc3QgUFBSIHBhZ2UsIHBlcmZvcm0gdGhlIGZ1bGwgZHluYW1pYyByZW5kZXJpbmcuXG4gICAgY29uc3Qgc2hvdWxkV2FpdE9uQWxsUmVhZHkgPSBpc0h0bWxCb3QgJiYgaXNSb3V0ZVBQUkVuYWJsZWQ7XG4gICAgbGV0IHNzZ0NhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoIWlzRHJhZnRNb2RlICYmIGlzU1NHICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSAmJiAhaXNQb3NzaWJsZVNlcnZlckFjdGlvbiAmJiAhbWluaW1hbFBvc3Rwb25lZCAmJiAhaXNEeW5hbWljUlNDUmVxdWVzdCkge1xuICAgICAgICBzc2dDYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgfVxuICAgIC8vIHRoZSBzdGF0aWNQYXRoS2V5IGRpZmZlcnMgZnJvbSBzc2dDYWNoZUtleSBzaW5jZVxuICAgIC8vIHNzZ0NhY2hlS2V5IGlzIG51bGwgaW4gZGV2IHNpbmNlIHdlJ3JlIGFsd2F5cyBpbiBcImR5bmFtaWNcIlxuICAgIC8vIG1vZGUgaW4gZGV2IHRvIGJ5cGFzcyB0aGUgY2FjaGUsIGJ1dCB3ZSBzdGlsbCBuZWVkIHRvIGhvbm9yXG4gICAgLy8gZHluYW1pY1BhcmFtcyA9IGZhbHNlIGluIGRldiBtb2RlXG4gICAgbGV0IHN0YXRpY1BhdGhLZXkgPSBzc2dDYWNoZUtleTtcbiAgICBpZiAoIXN0YXRpY1BhdGhLZXkgJiYgcm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgc3RhdGljUGF0aEtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgfVxuICAgIC8vIElmIHRoaXMgaXMgYSByZXF1ZXN0IGZvciBhbiBhcHAgcGF0aCB0aGF0IHNob3VsZCBiZSBzdGF0aWNhbGx5IGdlbmVyYXRlZFxuICAgIC8vIGFuZCB3ZSBhcmVuJ3QgaW4gdGhlIGVkZ2UgcnVudGltZSwgc3RyaXAgdGhlIGZsaWdodCBoZWFkZXJzIHNvIGl0IHdpbGxcbiAgICAvLyBnZW5lcmF0ZSB0aGUgc3RhdGljIHJlc3BvbnNlLlxuICAgIGlmICghcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlICYmIGlzU1NHICYmIGlzUlNDUmVxdWVzdCAmJiAhaXNEeW5hbWljUlNDUmVxdWVzdCkge1xuICAgICAgICBzdHJpcEZsaWdodEhlYWRlcnMocmVxLmhlYWRlcnMpO1xuICAgIH1cbiAgICBjb25zdCBDb21wb25lbnRNb2QgPSB7XG4gICAgICAgIC4uLmVudHJ5QmFzZSxcbiAgICAgICAgdHJlZSxcbiAgICAgICAgcGFnZXMsXG4gICAgICAgIEdsb2JhbEVycm9yLFxuICAgICAgICBoYW5kbGVyLFxuICAgICAgICByb3V0ZU1vZHVsZSxcbiAgICAgICAgX19uZXh0X2FwcF9fXG4gICAgfTtcbiAgICAvLyBCZWZvcmUgcmVuZGVyaW5nICh3aGljaCBpbml0aWFsaXplcyBjb21wb25lbnQgdHJlZSBtb2R1bGVzKSwgd2UgaGF2ZSB0b1xuICAgIC8vIHNldCB0aGUgcmVmZXJlbmNlIG1hbmlmZXN0cyB0byBvdXIgZ2xvYmFsIHN0b3JlIHNvIFNlcnZlciBBY3Rpb24nc1xuICAgIC8vIGVuY3J5cHRpb24gdXRpbCBjYW4gYWNjZXNzIHRvIHRoZW0gYXQgdGhlIHRvcCBsZXZlbCBvZiB0aGUgcGFnZSBtb2R1bGUuXG4gICAgaWYgKHNlcnZlckFjdGlvbnNNYW5pZmVzdCAmJiBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCkge1xuICAgICAgICBzZXRSZWZlcmVuY2VNYW5pZmVzdHNTaW5nbGV0b24oe1xuICAgICAgICAgICAgcGFnZTogc3JjUGFnZSxcbiAgICAgICAgICAgIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0LFxuICAgICAgICAgICAgc2VydmVyQWN0aW9uc01hbmlmZXN0LFxuICAgICAgICAgICAgc2VydmVyTW9kdWxlTWFwOiBjcmVhdGVTZXJ2ZXJNb2R1bGVNYXAoe1xuICAgICAgICAgICAgICAgIHNlcnZlckFjdGlvbnNNYW5pZmVzdFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB2YXJ5SGVhZGVyID0gcm91dGVNb2R1bGUuZ2V0VmFyeUhlYWRlcihyZXNvbHZlZFBhdGhuYW1lLCBpbnRlcmNlcHRpb25Sb3V0ZVBhdHRlcm5zKTtcbiAgICAgICAgcmVzLnNldEhlYWRlcignVmFyeScsIHZhcnlIZWFkZXIpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuLCBjb250ZXh0KT0+e1xuICAgICAgICAgICAgY29uc3QgbmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgICAgICAgICAgLy8gVE9ETzogYWRhcHQgZm9yIHB1dHRpbmcgdGhlIFJEQyBpbnNpZGUgdGhlIHBvc3Rwb25lZCBkYXRhXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiBkZXYsIGFuZCB0aGlzIGlzbid0IGEgcHJlZmV0Y2ggb3IgYSBzZXJ2ZXIgYWN0aW9uLFxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIHNlZWQgdGhlIHJlc3VtZSBkYXRhIGNhY2hlLlxuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlQ29tcG9uZW50cyAmJiAhaXNQcmVmZXRjaFJTQ1JlcXVlc3QgJiYgIWNvbnRleHQucmVuZGVyT3B0cy5pc1Bvc3NpYmxlU2VydmVyQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhcm11cCA9IGF3YWl0IHJvdXRlTW9kdWxlLndhcm11cChuZXh0UmVxLCBuZXh0UmVzLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHdhcm11cCBpcyBzdWNjZXNzZnVsLCB3ZSBzaG91bGQgdXNlIHRoZSByZXN1bWUgZGF0YVxuICAgICAgICAgICAgICAgICAgICAvLyBjYWNoZSBmcm9tIHRoZSB3YXJtdXAuXG4gICAgICAgICAgICAgICAgICAgIGlmICh3YXJtdXAubWV0YWRhdGEucmVuZGVyUmVzdW1lRGF0YUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlbmRlck9wdHMucmVuZGVyUmVzdW1lRGF0YUNhY2hlID0gd2FybXVwLm1ldGFkYXRhLnJlbmRlclJlc3VtZURhdGFDYWNoZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5yZW5kZXIobmV4dFJlcSwgbmV4dFJlcywgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBkb1JlbmRlciA9IGFzeW5jICh7IHNwYW4sIHBvc3Rwb25lZCwgZmFsbGJhY2tSb3V0ZVBhcmFtcyB9KT0+e1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgcGFnZTogbm9ybWFsaXplZFNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBidWlsZElkXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJDb21wb25lbnRzSG1yQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ3NlcnZlckNvbXBvbmVudHNIbXJDYWNoZScpLFxuICAgICAgICAgICAgICAgIGZhbGxiYWNrUm91dGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAgICAgICAgICAgICBBcHA6ICgpPT5udWxsLFxuICAgICAgICAgICAgICAgICAgICBEb2N1bWVudDogKCk9Pm51bGwsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VDb25maWc6IHt9LFxuICAgICAgICAgICAgICAgICAgICBDb21wb25lbnRNb2QsXG4gICAgICAgICAgICAgICAgICAgIENvbXBvbmVudDogaW50ZXJvcERlZmF1bHQoQ29tcG9uZW50TW9kKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZU1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgcG9zdHBvbmVkLFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRXYWl0T25BbGxSZWFkeSxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVTdHJlYW1pbmdNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U6IHR5cGVvZiBwb3N0cG9uZWQgPT09ICdzdHJpbmcnIHx8IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBidWlsZE1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICBuZXh0Rm9udE1hbmlmZXN0LFxuICAgICAgICAgICAgICAgICAgICByZWFjdExvYWRhYmxlTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIHN1YnJlc291cmNlSW50ZWdyaXR5TWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckFjdGlvbnNNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgIHNldElzclN0YXR1czogcm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5zZXRJc3JTdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGRpcjogcHJvY2Vzcy5lbnYuTkVYVF9SVU5USU1FID09PSAnbm9kZWpzJyA/IHJlcXVpcmUoJ3BhdGgnKS5qb2luKC8qIHR1cmJvcGFja0lnbm9yZTogdHJ1ZSAqLyBwcm9jZXNzLmN3ZCgpLCByb3V0ZU1vZHVsZS5yZWxhdGl2ZVByb2plY3REaXIpIDogYCR7cHJvY2Vzcy5jd2QoKX0vJHtyb3V0ZU1vZHVsZS5yZWxhdGl2ZVByb2plY3REaXJ9YCxcbiAgICAgICAgICAgICAgICAgICAgaXNEcmFmdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZTogaXNTU0cgJiYgIXBvc3Rwb25lZCAmJiAhaXNEeW5hbWljUlNDUmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgYm90VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzUG9zc2libGVTZXJ2ZXJBY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0UHJlZml4OiBuZXh0Q29uZmlnLmFzc2V0UHJlZml4LFxuICAgICAgICAgICAgICAgICAgICBuZXh0Q29uZmlnT3V0cHV0OiBuZXh0Q29uZmlnLm91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgY3Jvc3NPcmlnaW46IG5leHRDb25maWcuY3Jvc3NPcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgIHRyYWlsaW5nU2xhc2g6IG5leHRDb25maWcudHJhaWxpbmdTbGFzaCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlld1Byb3BzOiBwcmVyZW5kZXJNYW5pZmVzdC5wcmV2aWV3LFxuICAgICAgICAgICAgICAgICAgICBkZXBsb3ltZW50SWQ6IG5leHRDb25maWcuZGVwbG95bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVUYWludGluZzogbmV4dENvbmZpZy5leHBlcmltZW50YWwudGFpbnQsXG4gICAgICAgICAgICAgICAgICAgIGh0bWxMaW1pdGVkQm90czogbmV4dENvbmZpZy5odG1sTGltaXRlZEJvdHMsXG4gICAgICAgICAgICAgICAgICAgIGRldnRvb2xTZWdtZW50RXhwbG9yZXI6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLmRldnRvb2xTZWdtZW50RXhwbG9yZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0TWF4SGVhZGVyc0xlbmd0aDogbmV4dENvbmZpZy5yZWFjdE1heEhlYWRlcnNMZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUxpZmVQcm9maWxlczogbmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgICAgICAgICBiYXNlUGF0aDogbmV4dENvbmZpZy5iYXNlUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyQWN0aW9uczogbmV4dENvbmZpZy5leHBlcmltZW50YWwuc2VydmVyQWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgLi4uaXNEZWJ1Z1N0YXRpY1NoZWxsIHx8IGlzRGVidWdEeW5hbWljQWNjZXNzZXMgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0RXhwb3J0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdGF0aWNHZW5lcmF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWJ1Z0R5bmFtaWNBY2Nlc3NlczogaXNEZWJ1Z0R5bmFtaWNBY2Nlc3Nlc1xuICAgICAgICAgICAgICAgICAgICB9IDoge30sXG4gICAgICAgICAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVUaW1lOiBuZXh0Q29uZmlnLmV4cGlyZVRpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFsZVRpbWVzOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5zdGFsZVRpbWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb21wb25lbnRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRTZWdtZW50Q2FjaGU6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2xpZW50U2VnbWVudENhY2hlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFBhcmFtUGFyc2luZzogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jbGllbnRQYXJhbVBhcnNpbmcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY09uSG92ZXI6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuZHluYW1pY09uSG92ZXIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ3NzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmlubGluZUNzcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRUcmFjZU1ldGFkYXRhOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jbGllbnRUcmFjZU1ldGFkYXRhIHx8IFtdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogKCk9Pnt9LFxuICAgICAgICAgICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgZXJyOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbnZva2VFcnJvcicpLFxuICAgICAgICAgICAgICAgICAgICBkZXY6IHJvdXRlTW9kdWxlLmlzRGV2XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKHNwYW4sIGNvbnRleHQpO1xuICAgICAgICAgICAgY29uc3QgeyBtZXRhZGF0YSB9ID0gcmVzdWx0O1xuICAgICAgICAgICAgY29uc3QgeyBjYWNoZUNvbnRyb2wsIGhlYWRlcnMgPSB7fSwgLy8gQWRkIGFueSBmZXRjaCB0YWdzIHRoYXQgd2VyZSBvbiB0aGUgcGFnZSB0byB0aGUgcmVzcG9uc2UgaGVhZGVycy5cbiAgICAgICAgICAgIGZldGNoVGFnczogY2FjaGVUYWdzIH0gPSBtZXRhZGF0YTtcbiAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUHVsbCBhbnkgZmV0Y2ggbWV0cmljcyBmcm9tIHRoZSByZW5kZXIgb250byB0aGUgcmVxdWVzdC5cbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBtZXRhZGF0YS5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCB0aHJvdyBzdGF0aWMgdG8gZHluYW1pYyBlcnJvcnMgaW4gZGV2IGFzIGlzU1NHXG4gICAgICAgICAgICAvLyBpcyBhIGJlc3QgZ3Vlc3MgaW4gZGV2IHNpbmNlIHdlIGRvbid0IGhhdmUgdGhlIHByZXJlbmRlciBwYXNzXG4gICAgICAgICAgICAvLyB0byBrbm93IHdoZXRoZXIgdGhlIHBhdGggaXMgYWN0dWFsbHkgc3RhdGljIG9yIG5vdFxuICAgICAgICAgICAgaWYgKGlzU1NHICYmIChjYWNoZUNvbnRyb2wgPT0gbnVsbCA/IHZvaWQgMCA6IGNhY2hlQ29udHJvbC5yZXZhbGlkYXRlKSA9PT0gMCAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzUm91dGVQUFJFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGljQmFpbG91dEluZm8gPSBtZXRhZGF0YS5zdGF0aWNCYWlsb3V0SW5mbztcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBQYWdlIGNoYW5nZWQgZnJvbSBzdGF0aWMgdG8gZHluYW1pYyBhdCBydW50aW1lICR7cmVzb2x2ZWRQYXRobmFtZX0keyhzdGF0aWNCYWlsb3V0SW5mbyA9PSBudWxsID8gdm9pZCAwIDogc3RhdGljQmFpbG91dEluZm8uZGVzY3JpcHRpb24pID8gYCwgcmVhc29uOiAke3N0YXRpY0JhaWxvdXRJbmZvLmRlc2NyaXB0aW9ufWAgOiBgYH1gICsgYFxcbnNlZSBtb3JlIGhlcmUgaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvbWVzc2FnZXMvYXBwLXN0YXRpYy10by1keW5hbWljLWVycm9yYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFMTMyXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGljQmFpbG91dEluZm8gPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRpY0JhaWxvdXRJbmZvLnN0YWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gc3RhdGljQmFpbG91dEluZm8uc3RhY2s7XG4gICAgICAgICAgICAgICAgICAgIGVyci5zdGFjayA9IGVyci5tZXNzYWdlICsgc3RhY2suc3Vic3RyaW5nKHN0YWNrLmluZGV4T2YoJ1xcbicpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgICAgICAgICAgICAgIGh0bWw6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICAgICAgcnNjRGF0YTogbWV0YWRhdGEuZmxpZ2h0RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcG9zdHBvbmVkOiBtZXRhZGF0YS5wb3N0cG9uZWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogbWV0YWRhdGEuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudERhdGE6IG1ldGFkYXRhLnNlZ21lbnREYXRhXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2xcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgaGFzUmVzb2x2ZWQsIHByZXZpb3VzQ2FjaGVFbnRyeSwgaXNSZXZhbGlkYXRpbmcsIHNwYW4gfSk9PntcbiAgICAgICAgICAgIGNvbnN0IGlzUHJvZHVjdGlvbiA9IHJvdXRlTW9kdWxlLmlzRGV2ID09PSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGRpZFJlc3BvbmQgPSBoYXNSZXNvbHZlZCB8fCByZXMud3JpdGFibGVFbmRlZDtcbiAgICAgICAgICAgIC8vIHNraXAgb24tZGVtYW5kIHJldmFsaWRhdGUgaWYgY2FjaGUgaXMgbm90IHByZXNlbnQgYW5kXG4gICAgICAgICAgICAvLyByZXZhbGlkYXRlLWlmLWdlbmVyYXRlZCBpcyBzZXRcbiAgICAgICAgICAgIGlmIChpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5ICYmICFtaW5pbWFsTW9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZXJTZXJ2ZXJDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTZXJ2ZXJDb250ZXh0LnJlbmRlcjQwNCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZXJTZXJ2ZXJDb250ZXh0LnJlbmRlcjQwNChyZXEsIHJlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZmFsbGJhY2tNb2RlO1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgICAgICBmYWxsYmFja01vZGUgPSBwYXJzZUZhbGxiYWNrRmllbGQocHJlcmVuZGVySW5mby5mYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXaGVuIHNlcnZpbmcgYSBIVE1MIGJvdCByZXF1ZXN0LCB3ZSB3YW50IHRvIHNlcnZlIGEgYmxvY2tpbmcgcmVuZGVyIGFuZFxuICAgICAgICAgICAgLy8gbm90IHRoZSBwcmVyZW5kZXJlZCBwYWdlLiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgY29ycmVjdCBjb250ZW50IGlzIHNlcnZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIGJvdCBpbiB0aGUgaGVhZC5cbiAgICAgICAgICAgIGlmIChmYWxsYmFja01vZGUgPT09IEZhbGxiYWNrTW9kZS5QUkVSRU5ERVIgJiYgaXNCb3QodXNlckFnZW50KSkge1xuICAgICAgICAgICAgICAgIGlmICghaXNSb3V0ZVBQUkVuYWJsZWQgfHwgaXNIdG1sQm90KSB7XG4gICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrTW9kZSA9IEZhbGxiYWNrTW9kZS5CTE9DS0lOR19TVEFUSUNfUkVOREVSO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETzogYWRhcHQgZm9yIFBQUlxuICAgICAgICAgICAgLy8gb25seSBhbGxvdyBvbi1kZW1hbmQgcmV2YWxpZGF0ZSBmb3IgZmFsbGJhY2s6IHRydWUvYmxvY2tpbmdcbiAgICAgICAgICAgIC8vIG9yIGZvciBwcmVyZW5kZXJlZCBmYWxsYmFjazogZmFsc2UgcGF0aHNcbiAgICAgICAgICAgIGlmIChpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiAoZmFsbGJhY2tNb2RlICE9PSBGYWxsYmFja01vZGUuTk9UX0ZPVU5EIHx8IHByZXZpb3VzQ2FjaGVFbnRyeSkpIHtcbiAgICAgICAgICAgICAgICBmYWxsYmFja01vZGUgPSBGYWxsYmFja01vZGUuQkxPQ0tJTkdfU1RBVElDX1JFTkRFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWluaW1hbE1vZGUgJiYgZmFsbGJhY2tNb2RlICE9PSBGYWxsYmFja01vZGUuQkxPQ0tJTkdfU1RBVElDX1JFTkRFUiAmJiBzdGF0aWNQYXRoS2V5ICYmICFkaWRSZXNwb25kICYmICFpc0RyYWZ0TW9kZSAmJiBwYWdlSXNEeW5hbWljICYmIChpc1Byb2R1Y3Rpb24gfHwgIWlzUHJlcmVuZGVyZWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHBhZ2UgaGFzIGR5bmFtaWNQYXJhbXM6IGZhbHNlIGFuZCB0aGlzIHBhdGhuYW1lIHdhc24ndFxuICAgICAgICAgICAgICAgIC8vIHByZXJlbmRlcmVkIHRyaWdnZXIgdGhlIG5vIGZhbGxiYWNrIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgaWYgKC8vIEluIGRldmVsb3BtZW50LCBmYWxsIHRocm91Z2ggdG8gcmVuZGVyIHRvIGhhbmRsZSBtaXNzaW5nXG4gICAgICAgICAgICAgICAgLy8gZ2V0U3RhdGljUGF0aHMuXG4gICAgICAgICAgICAgICAgKGlzUHJvZHVjdGlvbiB8fCBwcmVyZW5kZXJJbmZvKSAmJiAvLyBXaGVuIGZhbGxiYWNrIGlzbid0IHByZXNlbnQsIGFib3J0IHRoaXMgcmVuZGVyIHNvIHdlIDQwNFxuICAgICAgICAgICAgICAgIGZhbGxiYWNrTW9kZSA9PT0gRmFsbGJhY2tNb2RlLk5PVF9GT1VORCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBmYWxsYmFja1Jlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGlmIChpc1JvdXRlUFBSRW5hYmxlZCAmJiAhaXNSU0NSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdHlwZW9mIChwcmVyZW5kZXJJbmZvID09IG51bGwgPyB2b2lkIDAgOiBwcmVyZW5kZXJJbmZvLmZhbGxiYWNrKSA9PT0gJ3N0cmluZycgPyBwcmVyZW5kZXJJbmZvLmZhbGxiYWNrIDogaXNQcm9kdWN0aW9uID8gbm9ybWFsaXplZFNyY1BhZ2UgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIHJlc3BvbnNlIGNhY2hlIGhlcmUgdG8gaGFuZGxlIHRoZSByZXZhbGlkYXRpb24gYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hbmFnZW1lbnQgb2YgdGhlIGZhbGxiYWNrIHNoZWxsLlxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yOiBhc3luYyAoKT0+ZG9SZW5kZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBwYXNzIGB1bmRlZmluZWRgIGFzIHJlbmRlcmluZyBhIGZhbGxiYWNrIGlzbid0IHJlc3VtZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdHBvbmVkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbGxiYWNrUm91dGVQYXJhbXM6IC8vIElmIHdlJ3JlIGluIHByb2R1Y3Rpb24gb3Igd2UncmUgZGVidWdnaW5nIHRoZSBmYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaGVsbCB0aGVuIHdlIHNob3VsZCBwb3N0cG9uZSB3aGVuIGR5bmFtaWMgcGFyYW1zIGFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3NlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQcm9kdWN0aW9uIHx8IGlzRGVidWdGYWxsYmFja1NoZWxsID8gZ2V0RmFsbGJhY2tSb3V0ZVBhcmFtcyhub3JtYWxpemVkU3JjUGFnZSkgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmYWxsYmFjayByZXNwb25zZSB3YXMgc2V0IHRvIG51bGwsIHRoZW4gd2Ugc2hvdWxkIHJldHVybiBudWxsLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tSZXNwb25zZSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgaWYgd2UgZGlkIGdldCBhIGZhbGxiYWNrIHJlc3BvbnNlLCB3ZSBzaG91bGQgcmV0dXJuIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYWNoZSBjb250cm9sIGZyb20gdGhlIHJlc3BvbnNlIHRvIHByZXZlbnQgaXQgZnJvbSBiZWluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBpbiB0aGUgc3Vycm91bmRpbmcgY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmFsbGJhY2tSZXNwb25zZS5jYWNoZUNvbnRyb2w7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9ubHkgcmVxdWVzdHMgdGhhdCBhcmVuJ3QgcmV2YWxpZGF0aW5nIGNhbiBiZSByZXN1bWVkLiBJZiB3ZSBoYXZlIHRoZVxuICAgICAgICAgICAgLy8gbWluaW1hbCBwb3N0cG9uZWQgZGF0YSwgdGhlbiB3ZSBzaG91bGQgcmVzdW1lIHRoZSByZW5kZXIgd2l0aCBpdC5cbiAgICAgICAgICAgIGNvbnN0IHBvc3Rwb25lZCA9ICFpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiAhaXNSZXZhbGlkYXRpbmcgJiYgbWluaW1hbFBvc3Rwb25lZCA/IG1pbmltYWxQb3N0cG9uZWQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAvLyBXaGVuIHdlJ3JlIGluIG1pbmltYWwgbW9kZSwgaWYgd2UncmUgdHJ5aW5nIHRvIGRlYnVnIHRoZSBzdGF0aWMgc2hlbGwsXG4gICAgICAgICAgICAvLyB3ZSBzaG91bGQganVzdCByZXR1cm4gbm90aGluZyBpbnN0ZWFkIG9mIHJlc3VtaW5nIHRoZSBkeW5hbWljIHJlbmRlci5cbiAgICAgICAgICAgIGlmICgoaXNEZWJ1Z1N0YXRpY1NoZWxsIHx8IGlzRGVidWdEeW5hbWljQWNjZXNzZXMpICYmIHR5cGVvZiBwb3N0cG9uZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IENhY2hlZFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IFJlbmRlclJlc3VsdC5FTVBUWSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VEYXRhOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhIGR5bmFtaWMgcm91dGUgd2l0aCBQUFIgZW5hYmxlZCBhbmQgdGhlIGRlZmF1bHQgcm91dGVcbiAgICAgICAgICAgIC8vIG1hdGNoZXMgd2VyZSBzZXQsIHRoZW4gd2Ugc2hvdWxkIHBhc3MgdGhlIGZhbGxiYWNrIHJvdXRlIHBhcmFtcyB0b1xuICAgICAgICAgICAgLy8gdGhlIHJlbmRlcmVyIGFzIHRoaXMgaXMgYSBmYWxsYmFjayByZXZhbGlkYXRpb24gcmVxdWVzdC5cbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrUm91dGVQYXJhbXMgPSBwYWdlSXNEeW5hbWljICYmIGlzUm91dGVQUFJFbmFibGVkICYmIChnZXRSZXF1ZXN0TWV0YShyZXEsICdyZW5kZXJGYWxsYmFja1NoZWxsJykgfHwgaXNEZWJ1Z0ZhbGxiYWNrU2hlbGwpID8gZ2V0RmFsbGJhY2tSb3V0ZVBhcmFtcyhwYXRobmFtZSkgOiBudWxsO1xuICAgICAgICAgICAgLy8gUGVyZm9ybSB0aGUgcmVuZGVyLlxuICAgICAgICAgICAgcmV0dXJuIGRvUmVuZGVyKHtcbiAgICAgICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgICAgIHBvc3Rwb25lZCxcbiAgICAgICAgICAgICAgICBmYWxsYmFja1JvdXRlUGFyYW1zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZSwgX2NhY2hlZERhdGFfaGVhZGVycztcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgY2FjaGVLZXk6IHNzZ0NhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yOiAoYyk9PnJlc3BvbnNlR2VuZXJhdG9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkLFxuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEluIGRldiwgd2Ugc2hvdWxkIG5vdCBjYWNoZSBwYWdlcyBmb3IgYW55IHJlYXNvbi5cbiAgICAgICAgICAgIGlmIChyb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNzZ0NhY2hlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgY2FjaGUgZW50cnkgbWlnaHQgbm90IGJlIGdlbmVyYXRlZCBpZiBhIHJlc3BvbnNlIGlzIHdyaXR0ZW5cbiAgICAgICAgICAgICAgICAgICAgLy8gaW4gYGdldEluaXRpYWxQcm9wc2Agb3IgYGdldFNlcnZlclNpZGVQcm9wc2AsIGJ1dCB0aG9zZSBzaG91bGRuJ3RcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGNhY2hlIGtleS4gSWYgd2UgZG8gaGF2ZSBhIGNhY2hlIGtleSBidXQgd2UgZG9uJ3QgZW5kIHVwXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggYSBjYWNoZSBlbnRyeSwgdGhlbiBlaXRoZXIgTmV4dC5qcyBvciB0aGUgYXBwbGljYXRpb24gaGFzIGFcbiAgICAgICAgICAgICAgICAgICAgLy8gYnVnIHRoYXQgbmVlZHMgZml4aW5nLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKCdpbnZhcmlhbnQ6IGNhY2hlIGVudHJ5IHJlcXVpcmVkIGJ1dCBub3QgZ2VuZXJhdGVkJyksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTYyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9QQUdFKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQgYXBwLXBhZ2UgaGFuZGxlciByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7KF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU3MDdcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGlkUG9zdHBvbmUgPSB0eXBlb2YgY2FjaGVFbnRyeS52YWx1ZS5wb3N0cG9uZWQgPT09ICdzdHJpbmcnO1xuICAgICAgICAgICAgaWYgKGlzU1NHICYmIC8vIFdlIGRvbid0IHdhbnQgdG8gc2VuZCBhIGNhY2hlIGhlYWRlciBmb3IgcmVxdWVzdHMgdGhhdCBjb250YWluIGR5bmFtaWNcbiAgICAgICAgICAgIC8vIGRhdGEuIElmIHRoaXMgaXMgYSBEeW5hbWljIFJTQyByZXF1ZXN0IG9yIHdhc24ndCBhIFByZWZldGNoIFJTQ1xuICAgICAgICAgICAgLy8gcmVxdWVzdCwgdGhlbiB3ZSBzaG91bGQgc2V0IHRoZSBjYWNoZSBoZWFkZXIuXG4gICAgICAgICAgICAhaXNEeW5hbWljUlNDUmVxdWVzdCAmJiAoIWRpZFBvc3Rwb25lIHx8IGlzUHJlZmV0Y2hSU0NSZXF1ZXN0KSkge1xuICAgICAgICAgICAgICAgIGlmICghbWluaW1hbE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHgtbmV4dGpzLWNhY2hlIGhlYWRlciB0byBtYXRjaCB0aGUgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIHNldCBmb3IgdGhlIGltYWdlLW9wdGltaXplclxuICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU2V0IGEgaGVhZGVyIHVzZWQgYnkgdGhlIGNsaWVudCByb3V0ZXIgdG8gc2lnbmFsIHRoZSByZXNwb25zZSBpcyBzdGF0aWNcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2hvdWxkIHJlc3BlY3QgdGhlIGBzdGF0aWNgIGNhY2hlIHN0YWxlVGltZSB2YWx1ZS5cbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKE5FWFRfSVNfUFJFUkVOREVSX0hFQURFUiwgJzEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdmFsdWU6IGNhY2hlZERhdGEgfSA9IGNhY2hlRW50cnk7XG4gICAgICAgICAgICAvLyBDb2VyY2UgdGhlIGNhY2hlIGNvbnRyb2wgcGFyYW1ldGVyIGZyb20gdGhlIHJlbmRlci5cbiAgICAgICAgICAgIGxldCBjYWNoZUNvbnRyb2w7XG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcmVzdW1lIHJlcXVlc3QgaW4gbWluaW1hbCBtb2RlIGl0IGlzIHN0cmVhbWVkIHdpdGggZHluYW1pY1xuICAgICAgICAgICAgLy8gY29udGVudCBhbmQgc2hvdWxkIG5vdCBiZSBjYWNoZWQuXG4gICAgICAgICAgICBpZiAobWluaW1hbFBvc3Rwb25lZCkge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtaW5pbWFsTW9kZSAmJiBpc1JTQ1JlcXVlc3QgJiYgIWlzUHJlZmV0Y2hSU0NSZXF1ZXN0ICYmIGlzUm91dGVQUFJFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFyb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBwcmV2aWV3IG1vZGUgcmVxdWVzdCwgd2Ugc2hvdWxkbid0IGNhY2hlIGl0XG4gICAgICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU1NHKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNhY2hlIGVudHJ5IGhhcyBhIGNhY2hlIGNvbnRyb2wgd2l0aCBhIHJldmFsaWRhdGUgdmFsdWUgdGhhdCdzXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbnVtYmVyLCB1c2UgaXQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV9jYWNoZUNvbnRyb2w7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhbGlkIHJldmFsaWRhdGUgY29uZmlndXJhdGlvbiBwcm92aWRlZDogJHtjYWNoZUVudHJ5LmNhY2hlQ29udHJvbC5yZXZhbGlkYXRlfSA8IDFgKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUyMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6ICgoX2NhY2hlRW50cnlfY2FjaGVDb250cm9sID0gY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV9jYWNoZUNvbnRyb2wuZXhwaXJlKSA/PyBuZXh0Q29uZmlnLmV4cGlyZVRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogQ0FDSEVfT05FX1lFQVIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCA9IGNhY2hlQ29udHJvbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VnbWVudFByZWZldGNoSGVhZGVyID09PSAnc3RyaW5nJyAmJiAoY2FjaGVkRGF0YSA9PSBudWxsID8gdm9pZCAwIDogY2FjaGVkRGF0YS5raW5kKSA9PT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9QQUdFICYmIGNhY2hlZERhdGEuc2VnbWVudERhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlZERhdGFfaGVhZGVyczE7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHByZWZldGNoIHJlcXVlc3QgaXNzdWVkIGJ5IHRoZSBjbGllbnQgU2VnbWVudCBDYWNoZS4gVGhlc2VcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgbmV2ZXIgcmVhY2ggdGhlIGFwcGxpY2F0aW9uIGxheWVyIChsYW1iZGEpLiBXZSBzaG91bGQgZWl0aGVyXG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uZCBmcm9tIHRoZSBjYWNoZSAoSElUKSBvciByZXNwb25kIHdpdGggMjA0IE5vIENvbnRlbnQgKE1JU1MpLlxuICAgICAgICAgICAgICAgIC8vIFNldCBhIGhlYWRlciB0byBpbmRpY2F0ZSB0aGF0IFBQUiBpcyBlbmFibGVkIGZvciB0aGlzIHJvdXRlLiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gbGV0cyB0aGUgY2xpZW50IGRpc3Rpbmd1aXNoIGJldHdlZW4gYSByZWd1bGFyIGNhY2hlIG1pc3MgYW5kIGEgY2FjaGVcbiAgICAgICAgICAgICAgICAvLyBtaXNzIGR1ZSB0byBQUFIgYmVpbmcgZGlzYWJsZWQuIEluIG90aGVyIGNvbnRleHRzIHRoaXMgaGVhZGVyIGlzIHVzZWRcbiAgICAgICAgICAgICAgICAvLyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZXNwb25zZSBjb250YWlucyBkeW5hbWljIGRhdGEsIGJ1dCBoZXJlIHdlJ3JlXG4gICAgICAgICAgICAgICAgLy8gb25seSB1c2luZyBpdCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBmZWF0dXJlIGlzIGVuYWJsZWQg4oCUIHRoZSBzZWdtZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uc2UgaXRzZWxmIGNvbnRhaW5zIHdoZXRoZXIgdGhlIGRhdGEgaXMgZHluYW1pYy5cbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKE5FWFRfRElEX1BPU1RQT05FX0hFQURFUiwgJzInKTtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNhY2hlIHRhZ3MgaGVhZGVyIHRvIHRoZSByZXNwb25zZSBpZiBpdCBleGlzdHMgYW5kIHdlJ3JlIGluXG4gICAgICAgICAgICAgICAgLy8gbWluaW1hbCBtb2RlIHdoaWxlIHJlbmRlcmluZyBhIHN0YXRpYyBwYWdlLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSAoX2NhY2hlZERhdGFfaGVhZGVyczEgPSBjYWNoZWREYXRhLmhlYWRlcnMpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVkRGF0YV9oZWFkZXJzMVtORVhUX0NBQ0hFX1RBR1NfSEVBREVSXTtcbiAgICAgICAgICAgICAgICBpZiAobWluaW1hbE1vZGUgJiYgaXNTU0cgJiYgdGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0NBQ0hFX1RBR1NfSEVBREVSLCB0YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlZFNlZ21lbnQgPSBjYWNoZWREYXRhLnNlZ21lbnREYXRhLmdldChzZWdtZW50UHJlZmV0Y2hIZWFkZXIpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkU2VnbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENhY2hlIGhpdFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBSZW5kZXJSZXN1bHQuZnJvbVN0YXRpYyhtYXRjaGVkU2VnbWVudCwgUlNDX0NPTlRFTlRfVFlQRV9IRUFERVIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQ2FjaGUgbWlzcy4gRWl0aGVyIGEgY2FjaGUgZW50cnkgZm9yIHRoaXMgcm91dGUgaGFzIG5vdCBiZWVuIGdlbmVyYXRlZFxuICAgICAgICAgICAgICAgIC8vICh3aGljaCB0ZWNobmljYWxseSBzaG91bGQgbm90IGJlIHBvc3NpYmxlIHdoZW4gUFBSIGlzIGVuYWJsZWQsIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAvLyBhdCBhIG1pbmltdW0gdGhlcmUgc2hvdWxkIGFsd2F5cyBiZSBhIGZhbGxiYWNrIGVudHJ5KSBvciB0aGVyZSdzIG5vXG4gICAgICAgICAgICAgICAgLy8gbWF0Y2ggZm9yIHRoZSByZXF1ZXN0ZWQgc2VnbWVudC4gUmVzcG9uZCB3aXRoIGEgMjA0IE5vIENvbnRlbnQuIFdlXG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgYm90aGVyIHRvIHJlc3BvbmQgd2l0aCA0MDQsIGJlY2F1c2UgdGhlc2UgcmVxdWVzdHMgYXJlIG9ubHlcbiAgICAgICAgICAgICAgICAvLyBpc3N1ZWQgYXMgcGFydCBvZiBhIHByZWZldGNoLlxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gMjA0O1xuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBSZW5kZXJSZXN1bHQuRU1QVFksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBjYWxsYmFjayBmb3IgYG9uQ2FjaGVFbnRyeWAsIGNhbGwgaXQgd2l0aCB0aGUgY2FjaGUgZW50cnlcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgcmV2YWxpZGF0ZSBvcHRpb25zLlxuICAgICAgICAgICAgY29uc3Qgb25DYWNoZUVudHJ5ID0gZ2V0UmVxdWVzdE1ldGEocmVxLCAnb25DYWNoZUVudHJ5Jyk7XG4gICAgICAgICAgICBpZiAob25DYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmluaXNoZWQgPSBhd2FpdCBvbkNhY2hlRW50cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5jYWNoZUVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyB3aGVuIHVwc3RyZWFtIGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIGV4cGVjdCB0aGlzIHZhbHVlIHRvIGJlIFwiUEFHRVwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jYWNoZUVudHJ5LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAga2luZDogJ1BBR0UnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5pdFVSTCcpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IG1heWJlIHdlIGhhdmUgdG8gZW5kIHRoZSByZXF1ZXN0P1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBoYXMgYSBwb3N0cG9uZWQgc3RhdGUgYW5kIGl0J3MgYSByZXN1bWUgcmVxdWVzdCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkIGVycm9yLlxuICAgICAgICAgICAgaWYgKGRpZFBvc3Rwb25lICYmIG1pbmltYWxQb3N0cG9uZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKCdJbnZhcmlhbnQ6IHBvc3Rwb25lZCBzdGF0ZSBzaG91bGQgbm90IGJlIHByZXNlbnQgb24gYSByZXN1bWUgcmVxdWVzdCcpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTM5NlwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FjaGVkRGF0YS5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVkRGF0YS5oZWFkZXJzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoIW1pbmltYWxNb2RlIHx8ICFpc1NTRykge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGhlYWRlcnMpKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmFwcGVuZEhlYWRlcihrZXksIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5hcHBlbmRIZWFkZXIoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuYXBwZW5kSGVhZGVyKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIHRoZSBjYWNoZSB0YWdzIGhlYWRlciB0byB0aGUgcmVzcG9uc2UgaWYgaXQgZXhpc3RzIGFuZCB3ZSdyZSBpblxuICAgICAgICAgICAgLy8gbWluaW1hbCBtb2RlIHdoaWxlIHJlbmRlcmluZyBhIHN0YXRpYyBwYWdlLlxuICAgICAgICAgICAgY29uc3QgdGFncyA9IChfY2FjaGVkRGF0YV9oZWFkZXJzID0gY2FjaGVkRGF0YS5oZWFkZXJzKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlZERhdGFfaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXTtcbiAgICAgICAgICAgIGlmIChtaW5pbWFsTW9kZSAmJiBpc1NTRyAmJiB0YWdzICYmIHR5cGVvZiB0YWdzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoTkVYVF9DQUNIRV9UQUdTX0hFQURFUiwgdGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBhIGRhdGEgcmVxdWVzdCwgdGhlbiB3ZSBzaG91bGRuJ3Qgc2V0IHRoZSBzdGF0dXMgY29kZVxuICAgICAgICAgICAgLy8gZnJvbSB0aGUgcmVzcG9uc2UgYmVjYXVzZSBpdCBzaG91bGQgYWx3YXlzIGJlIDIwMC4gVGhpcyBzaG91bGQgYmUgZ2F0ZWRcbiAgICAgICAgICAgIC8vIGJlaGluZCB0aGUgZXhwZXJpbWVudGFsIFBQUiBmbGFnLlxuICAgICAgICAgICAgaWYgKGNhY2hlZERhdGEuc3RhdHVzICYmICghaXNSU0NSZXF1ZXN0IHx8ICFpc1JvdXRlUFBSRW5hYmxlZCkpIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IGNhY2hlZERhdGEuc3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVkaXJlY3QgaW5mb3JtYXRpb24gaXMgZW5jb2RlZCBpbiBSU0MgcGF5bG9hZCwgc28gd2UgZG9uJ3QgbmVlZCB0byB1c2UgcmVkaXJlY3Qgc3RhdHVzIGNvZGVzXG4gICAgICAgICAgICBpZiAoIW1pbmltYWxNb2RlICYmIGNhY2hlZERhdGEuc3RhdHVzICYmIFJlZGlyZWN0U3RhdHVzQ29kZVtjYWNoZWREYXRhLnN0YXR1c10gJiYgaXNSU0NSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSAyMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYXJrIHRoYXQgdGhlIHJlcXVlc3QgZGlkIHBvc3Rwb25lLlxuICAgICAgICAgICAgaWYgKGRpZFBvc3Rwb25lKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcihORVhUX0RJRF9QT1NUUE9ORV9IRUFERVIsICcxJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBnbyB0aHJvdWdoIHRoaXMgYmxvY2sgd2hlbiBwcmV2aWV3IG1vZGUgaXMgdHJ1ZVxuICAgICAgICAgICAgLy8gYXMgcHJldmlldyBtb2RlIGlzIGEgZHluYW1pYyByZXF1ZXN0IChieXBhc3NlcyBjYWNoZSkgYW5kIGRvZXNuJ3RcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIGJvdGggSFRNTCBhbmQgcGF5bG9hZHMgaW4gdGhlIHNhbWUgcmVxdWVzdCBzbyBjb250aW51ZSB0byBqdXN0XG4gICAgICAgICAgICAvLyByZXR1cm4gdGhlIGdlbmVyYXRlZCBwYXlsb2FkXG4gICAgICAgICAgICBpZiAoaXNSU0NSZXF1ZXN0ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSBkeW5hbWljIFJTQyByZXF1ZXN0LCB0aGVuIHN0cmVhbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWNoZWREYXRhLnJzY0RhdGEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZWREYXRhLnBvc3Rwb25lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignSW52YXJpYW50OiBFeHBlY3RlZCBwb3N0cG9uZWQgdG8gYmUgdW5kZWZpbmVkJyksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUzNzJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGNhY2hlZERhdGEuaHRtbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIER5bmFtaWMgUlNDIHJlc3BvbnNlcyBjYW5ub3QgYmUgY2FjaGVkLCBldmVuIGlmIHRoZXkncmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyZWQgd2l0aCBgZm9yY2Utc3RhdGljYCBiZWNhdXNlIHdlIGhhdmUgbm8gd2F5IG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXN0aW5ndWlzaGluZyBiZXR3ZWVuIGBmb3JjZS1zdGF0aWNgIGFuZCBwYWdlcyB0aGF0IGhhdmUgbm9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3Rwb25lZCBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IGRpc3Rpbmd1aXNoIGBmb3JjZS1zdGF0aWNgIGZyb20gcGFnZXMgd2l0aCBubyBwb3N0cG9uZWQgc3RhdGUgKHN0YXRpYylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogaXNEeW5hbWljUlNDUmVxdWVzdCA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFzIHRoaXMgaXNuJ3QgYSBwcmVmZXRjaCByZXF1ZXN0LCB3ZSBzaG91bGQgc2VydmUgdGhlIHN0YXRpYyBmbGlnaHRcbiAgICAgICAgICAgICAgICAvLyBkYXRhLlxuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlRXRhZ3M6IG5leHRDb25maWcuZ2VuZXJhdGVFdGFncyxcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBSZW5kZXJSZXN1bHQuZnJvbVN0YXRpYyhjYWNoZWREYXRhLnJzY0RhdGEsIFJTQ19DT05URU5UX1RZUEVfSEVBREVSKSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBjYWNoZUVudHJ5LmNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJlcXVlc3QgZm9yIEhUTUwgZGF0YS5cbiAgICAgICAgICAgIGxldCBib2R5ID0gY2FjaGVkRGF0YS5odG1sO1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBwb3N0cG9uZWQgc3RhdGUsIHdlIHNob3VsZCBqdXN0IHNlcnZlIHRoZSBIVE1MLiBUaGlzXG4gICAgICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSB0aGUgY2FzZSBmb3IgYSByZXN1bWUgcmVxdWVzdCBiZWNhdXNlIGl0J3MgY29tcGxldGVkXG4gICAgICAgICAgICAvLyBhcyBhIHNlcnZlciByZW5kZXIgKHJhdGhlciB0aGFuIGEgc3RhdGljIHJlbmRlcikuXG4gICAgICAgICAgICBpZiAoIWRpZFBvc3Rwb25lIHx8IG1pbmltYWxNb2RlIHx8IGlzUlNDUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIGluIHRlc3QgbW9kZSwgd2Ugc2hvdWxkIGFkZCBhIHNlbnRpbmVsIGNodW5rIHRvIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQncyBiZXR3ZWVuIHRoZSBzdGF0aWMgYW5kIGR5bmFtaWMgcGFydHMgc28gd2UgY2FuIGNvbXBhcmUgdGhlXG4gICAgICAgICAgICAgICAgLy8gY2h1bmtzIGFuZCBhZGQgYXNzZXJ0aW9ucy5cbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuX19ORVhUX1RFU1RfTU9ERSAmJiBtaW5pbWFsTW9kZSAmJiBpc1JvdXRlUFBSRW5hYmxlZCAmJiBib2R5LmNvbnRlbnRUeXBlID09PSBIVE1MX0NPTlRFTlRfVFlQRV9IRUFERVIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXMgd2UncmUgaW4gbWluaW1hbCBtb2RlLCB0aGUgc3RhdGljIHBhcnQgd291bGQgaGF2ZSBhbHJlYWR5IGJlZW5cbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyZWFtZWQgZmlyc3QuIFRoZSBvbmx5IHBhcnQgdGhhdCB0aGlzIHN0cmVhbXMgaXMgdGhlIGR5bmFtaWMgcGFydFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSBzaG91bGQgRklSU1Qgc3RyZWFtIHRoZSBzZW50aW5lbCBhbmQgVEhFTiB0aGUgZHluYW1pYyBwYXJ0LlxuICAgICAgICAgICAgICAgICAgICBib2R5LnVuc2hpZnQoY3JlYXRlUFBSQm91bmRhcnlTZW50aW5lbCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgICAgICBwb3dlcmVkQnlIZWFkZXI6IG5leHRDb25maWcucG93ZXJlZEJ5SGVhZGVyLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGJvZHksXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2xcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGRlYnVnZ2luZyB0aGUgc3RhdGljIHNoZWxsIG9yIHRoZSBkeW5hbWljIEFQSSBhY2Nlc3Nlcywgd2VcbiAgICAgICAgICAgIC8vIHNob3VsZCBqdXN0IHNlcnZlIHRoZSBIVE1MIHdpdGhvdXQgcmVzdW1pbmcgdGhlIHJlbmRlci4gVGhlIHJldHVybmVkXG4gICAgICAgICAgICAvLyBIVE1MIHdpbGwgYmUgdGhlIHN0YXRpYyBzaGVsbCBzbyBhbGwgdGhlIER5bmFtaWMgQVBJJ3Mgd2lsbCBiZSB1c2VkXG4gICAgICAgICAgICAvLyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24uXG4gICAgICAgICAgICBpZiAoaXNEZWJ1Z1N0YXRpY1NoZWxsIHx8IGlzRGVidWdEeW5hbWljQWNjZXNzZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSdyZSBub3QgcmVzdW1pbmcgdGhlIHJlbmRlciwgd2UgbmVlZCB0byBhdCBsZWFzdCBhZGQgdGhlXG4gICAgICAgICAgICAgICAgLy8gY2xvc2luZyBib2R5IGFuZCBodG1sIHRhZ3MgdG8gY3JlYXRlIHZhbGlkIEhUTUwuXG4gICAgICAgICAgICAgICAgYm9keS5wdXNoKG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0IChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoRU5DT0RFRF9UQUdTLkNMT1NFRC5CT0RZX0FORF9IVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZFJlbmRlclJlc3VsdCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYm9keSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UncmUgaW4gdGVzdCBtb2RlLCB3ZSBzaG91bGQgYWRkIGEgc2VudGluZWwgY2h1bmsgdG8gdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAvLyB0aGF0J3MgYmV0d2VlbiB0aGUgc3RhdGljIGFuZCBkeW5hbWljIHBhcnRzIHNvIHdlIGNhbiBjb21wYXJlIHRoZVxuICAgICAgICAgICAgLy8gY2h1bmtzIGFuZCBhZGQgYXNzZXJ0aW9ucy5cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5fX05FWFRfVEVTVF9NT0RFKSB7XG4gICAgICAgICAgICAgICAgYm9keS5wdXNoKGNyZWF0ZVBQUkJvdW5kYXJ5U2VudGluZWwoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIHJlcXVlc3QgaGFzIHBvc3Rwb25lZCwgc28gbGV0J3MgY3JlYXRlIGEgbmV3IHRyYW5zZm9ybWVyIHRoYXQgdGhlXG4gICAgICAgICAgICAvLyBkeW5hbWljIGRhdGEgY2FuIHBpcGUgdG8gdGhhdCB3aWxsIGF0dGFjaCB0aGUgZHluYW1pYyBkYXRhIHRvIHRoZSBlbmRcbiAgICAgICAgICAgIC8vIG9mIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IFRyYW5zZm9ybVN0cmVhbSgpO1xuICAgICAgICAgICAgYm9keS5wdXNoKHRyYW5zZm9ybWVyLnJlYWRhYmxlKTtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gdGhlIHJlbmRlciBhZ2FpbiwgYnV0IHRoaXMgdGltZSwgcHJvdmlkZSB0aGUgcG9zdHBvbmVkIHN0YXRlLlxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgYXdhaXQgYmVjYXVzZSB3ZSB3YW50IHRoZSByZXN1bHQgdG8gc3RhcnQgc3RyZWFtaW5nIG5vdywgYW5kXG4gICAgICAgICAgICAvLyB3ZSd2ZSBhbHJlYWR5IGNoYWluZWQgdGhlIHRyYW5zZm9ybWVyJ3MgcmVhZGFibGUgdG8gdGhlIHJlbmRlciByZXN1bHQuXG4gICAgICAgICAgICBkb1JlbmRlcih7XG4gICAgICAgICAgICAgICAgc3BhbixcbiAgICAgICAgICAgICAgICBwb3N0cG9uZWQ6IGNhY2hlZERhdGEucG9zdHBvbmVkLFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSByZXN1bWUgcmVuZGVyLCBub3QgYSBmYWxsYmFjayByZW5kZXIsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhpcy5cbiAgICAgICAgICAgICAgICBmYWxsYmFja1JvdXRlUGFyYW1zOiBudWxsXG4gICAgICAgICAgICB9KS50aGVuKGFzeW5jIChyZXN1bHQpPT57XG4gICAgICAgICAgICAgICAgdmFyIF9yZXN1bHRfdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcignSW52YXJpYW50OiBleHBlY3RlZCBhIHJlc3VsdCB0byBiZSByZXR1cm5lZCcpLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU0NjNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKChfcmVzdWx0X3ZhbHVlID0gcmVzdWx0LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX3Jlc3VsdF92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9QQUdFKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfcmVzdWx0X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBleHBlY3RlZCBhIHBhZ2UgcmVzcG9uc2UsIGdvdCAkeyhfcmVzdWx0X3ZhbHVlMSA9IHJlc3VsdC52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9yZXN1bHRfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTMwNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFBpcGUgdGhlIHJlc3VtZSByZXN1bHQgdG8gdGhlIHRyYW5zZm9ybWVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc3VsdC52YWx1ZS5odG1sLnBpcGVUbyh0cmFuc2Zvcm1lci53cml0YWJsZSk7XG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAgICAgICAgIC8vIEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBwaXBpbmcgb3IgcHJlcGFyaW5nIHRoZSByZW5kZXIsIGFib3J0XG4gICAgICAgICAgICAgICAgLy8gdGhlIHRyYW5zZm9ybWVycyB3cml0ZXIgc28gd2UgY2FuIHRlcm1pbmF0ZSB0aGUgc3RyZWFtLlxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVyLndyaXRhYmxlLmFib3J0KGVycikuY2F0Y2goKGUpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjb3VsZG4ndCBhYm9ydCB0cmFuc2Zvcm1lclwiLCBlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHNlbmRSZW5kZXJSZXN1bHQoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICByZXMsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVFdGFnczogbmV4dENvbmZpZy5nZW5lcmF0ZUV0YWdzLFxuICAgICAgICAgICAgICAgIHBvd2VyZWRCeUhlYWRlcjogbmV4dENvbmZpZy5wb3dlcmVkQnlIZWFkZXIsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBib2R5LFxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gY2FjaGUgdGhlIHJlc3BvbnNlIGlmIGl0IGhhcyBwb3N0cG9uZWQgZGF0YSBiZWNhdXNlXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJlc3BvbnNlIGJlaW5nIHNlbnQgdG8gdGhlIGNsaWVudCBpdCdzIGR5bmFtaWMgcGFydHMgYXJlIHN0cmVhbWVkXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGNsaWVudCBvbiB0aGUgc2FtZSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JlbmRlcicsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZTogaXNTU0csXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0sIHJvdXRlclNlcnZlckNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldGhyb3cgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIHNlcnZpbmcgZXJyb3IgcGFnZVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxufVxuLy8gVE9ETzogb21pdCB0aGlzIGZyb20gcHJvZHVjdGlvbiBidWlsZHMsIG9ubHkgdGVzdCBidWlsZHMgc2hvdWxkIGluY2x1ZGUgaXRcbi8qKlxuICogQ3JlYXRlcyBhIHJlYWRhYmxlIHN0cmVhbSB0aGF0IGVtaXRzIGEgUFBSIGJvdW5kYXJ5IHNlbnRpbmVsLlxuICpcbiAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIHRoYXQgZW1pdHMgYSBQUFIgYm91bmRhcnkgc2VudGluZWwuXG4gKi8gZnVuY3Rpb24gY3JlYXRlUFBSQm91bmRhcnlTZW50aW5lbCgpIHtcbiAgICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgc3RhcnQgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoJzwhLS0gUFBSX0JPVU5EQVJZX1NFTlRJTkVMIC0tPicpKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcGFnZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(rsc)/./app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNhcHAlNUMlNUNwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsd0lBQThGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXGFwcFxcXFxwYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(rsc)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(rsc)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(rsc)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(rsc)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(rsc)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(rsc)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(rsc)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(rsc)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(rsc)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(rsc)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNidWlsdGluJTVDJTVDZ2xvYmFsLWVycm9yLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDVXNlcnMlNUMlNUNMRU5PVk8lNUMlNUNEZXNrdG9wJTVDJTVDc2hhaGFyJTVDJTVDYm9va2FpJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNjbGllbnQlNUMlNUNjb21wb25lbnRzJTVDJTVDY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2h0dHAtYWNjZXNzLWZhbGxiYWNrJTVDJTVDZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2xheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q21ldGFkYXRhJTVDJTVDYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDbGliJTVDJTVDZnJhbWV3b3JrJTVDJTVDYm91bmRhcnktY29tcG9uZW50cy5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDVXNlcnMlNUMlNUNMRU5PVk8lNUMlNUNEZXNrdG9wJTVDJTVDc2hhaGFyJTVDJTVDYm9va2FpJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNsaWIlNUMlNUNtZXRhZGF0YSU1QyU1Q2dlbmVyYXRlJTVDJTVDaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q25leHQtZGV2dG9vbHMlNUMlNUN1c2Vyc3BhY2UlNUMlNUNhcHAlNUMlNUNzZWdtZW50LWV4cGxvcmVyLW5vZGUuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLHNQQUF1SjtBQUN2SjtBQUNBLG9PQUE2STtBQUM3STtBQUNBLDBPQUFnSjtBQUNoSjtBQUNBLG9SQUFzSztBQUN0SztBQUNBLHdPQUErSTtBQUMvSTtBQUNBLDRQQUEwSjtBQUMxSjtBQUNBLHNRQUE4SjtBQUM5SjtBQUNBLDRPQUFpSjtBQUNqSjtBQUNBLHdPQUFnSjtBQUNoSjtBQUNBLDRRQUFrSyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGJ1aWx0aW5cXFxcZ2xvYmFsLWVycm9yLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXHNoYWhhclxcXFxib29rYWlcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxjbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGh0dHAtYWNjZXNzLWZhbGxiYWNrXFxcXGVycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcbGF5b3V0LXJvdXRlci5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG1ldGFkYXRhXFxcXGFzeW5jLW1ldGFkYXRhLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxmcmFtZXdvcmtcXFxcYm91bmRhcnktY29tcG9uZW50cy5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxtZXRhZGF0YVxcXFxnZW5lcmF0ZVxcXFxpY29uLW1hcmsuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXHNoYWhhclxcXFxib29rYWlcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxuZXh0LWRldnRvb2xzXFxcXHVzZXJzcGFjZVxcXFxhcHBcXFxcc2VnbWVudC1leHBsb3Jlci1ub2RlLmpzXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Nunito%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-nunito%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22nunito%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Fredoka%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-fredoka%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22fredoka%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Rubik%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%2C%5C%22hebrew%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-rubik%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22rubik%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Nunito%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-nunito%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22nunito%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Fredoka%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-fredoka%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22fredoka%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Rubik%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%2C%5C%22hebrew%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-rubik%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22rubik%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_Header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/Header */ \"(ssr)/./components/Header.tsx\");\n/* harmony import */ var _components_Hero__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/Hero */ \"(ssr)/./components/Hero.tsx\");\n/* harmony import */ var _components_CreationForm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/CreationForm */ \"(ssr)/./components/CreationForm.tsx\");\n/* harmony import */ var _components_BookViewer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/BookViewer */ \"(ssr)/./components/BookViewer.tsx\");\n/* harmony import */ var _components_BookEditor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/BookEditor */ \"(ssr)/./components/BookEditor.tsx\");\n/* harmony import */ var _components_ApiKeyModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ApiKeyModal */ \"(ssr)/./components/ApiKeyModal.tsx\");\n/* harmony import */ var _components_BooksGallery__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/BooksGallery */ \"(ssr)/./components/BooksGallery.tsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/types */ \"(ssr)/./types.ts\");\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/services/geminiService */ \"(ssr)/./services/geminiService.ts\");\n/* harmony import */ var _services_apiKeyManager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/services/apiKeyManager */ \"(ssr)/./services/apiKeyManager.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n\n\n\nfunction Home() {\n    const [currentView, setCurrentView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_types__WEBPACK_IMPORTED_MODULE_9__.AppView.HOME);\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_types__WEBPACK_IMPORTED_MODULE_9__.GenerationStatus.IDLE);\n    const [currentBook, setCurrentBook] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasApiKey, setHasApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showGallery, setShowGallery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Check for API key on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Home.useEffect\": ()=>{\n            setHasApiKey(_services_apiKeyManager__WEBPACK_IMPORTED_MODULE_11__.apiKeyManager.hasKey());\n        }\n    }[\"Home.useEffect\"], []);\n    const handleApiKeySubmit = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Home.useCallback[handleApiKeySubmit]\": (key)=>{\n            _services_apiKeyManager__WEBPACK_IMPORTED_MODULE_11__.apiKeyManager.setKey(key);\n            setHasApiKey(true);\n        }\n    }[\"Home.useCallback[handleApiKeySubmit]\"], []);\n    const handleChangeKey = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Home.useCallback[handleChangeKey]\": ()=>{\n            _services_apiKeyManager__WEBPACK_IMPORTED_MODULE_11__.apiKeyManager.removeKey();\n            setHasApiKey(false);\n        }\n    }[\"Home.useCallback[handleChangeKey]\"], []);\n    const handleNavigate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Home.useCallback[handleNavigate]\": (view)=>{\n            setCurrentView(view);\n            if (view === _types__WEBPACK_IMPORTED_MODULE_9__.AppView.CREATE) {\n                setStatus(_types__WEBPACK_IMPORTED_MODULE_9__.GenerationStatus.IDLE);\n            }\n        }\n    }[\"Home.useCallback[handleNavigate]\"], []);\n    const handleCreateBook = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Home.useCallback[handleCreateBook]\": async (request)=>{\n            setStatus(_types__WEBPACK_IMPORTED_MODULE_9__.GenerationStatus.GENERATING_TEXT);\n            try {\n                const book = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_10__.generateBookContent)(request);\n                setCurrentBook(book);\n                setStatus(_types__WEBPACK_IMPORTED_MODULE_9__.GenerationStatus.SUCCESS);\n                setCurrentView(_types__WEBPACK_IMPORTED_MODULE_9__.AppView.EDITOR);\n            } catch (error) {\n                console.error(error);\n                setStatus(_types__WEBPACK_IMPORTED_MODULE_9__.GenerationStatus.ERROR);\n                // Show copyright error or general error\n                if (error.message?.includes('')) {\n                    alert(error.message);\n                } else {\n                    alert('Oops! Something went wrong while crafting your story. Please try again.');\n                }\n            }\n        }\n    }[\"Home.useCallback[handleCreateBook]\"], []);\n    const handleUpdateBook = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"Home.useCallback[handleUpdateBook]\": (updatedBook)=>{\n            setCurrentBook(updatedBook);\n        }\n    }[\"Home.useCallback[handleUpdateBook]\"], []);\n    // Show loading state while checking for API key\n    if (hasApiKey === null) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ApiKeyModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                isVisible: !hasApiKey,\n                onKeySubmit: handleApiKeySubmit\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                lineNumber: 75,\n                columnNumber: 13\n            }, this),\n            showGallery && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BooksGallery__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                onClose: ()=>setShowGallery(false)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                lineNumber: 82,\n                columnNumber: 17\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-screen flex flex-col font-sans text-slate-800\",\n                children: [\n                    currentView !== _types__WEBPACK_IMPORTED_MODULE_9__.AppView.READING && currentView !== _types__WEBPACK_IMPORTED_MODULE_9__.AppView.EDITOR && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Header__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                        onNavigate: handleNavigate,\n                        onChangeKey: handleChangeKey,\n                        onShowGallery: ()=>setShowGallery(true)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                        lineNumber: 88,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                        className: \"flex-grow\",\n                        children: [\n                            currentView === _types__WEBPACK_IMPORTED_MODULE_9__.AppView.HOME && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Hero__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                onStart: ()=>setCurrentView(_types__WEBPACK_IMPORTED_MODULE_9__.AppView.CREATE)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                                lineNumber: 97,\n                                columnNumber: 25\n                            }, this),\n                            currentView === _types__WEBPACK_IMPORTED_MODULE_9__.AppView.CREATE && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CreationForm__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                onSubmit: handleCreateBook,\n                                isLoading: status === _types__WEBPACK_IMPORTED_MODULE_9__.GenerationStatus.GENERATING_TEXT\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                                lineNumber: 101,\n                                columnNumber: 25\n                            }, this),\n                            currentView === _types__WEBPACK_IMPORTED_MODULE_9__.AppView.EDITOR && currentBook && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BookEditor__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                book: currentBook,\n                                onUpdateBook: handleUpdateBook,\n                                onPreview: ()=>setCurrentView(_types__WEBPACK_IMPORTED_MODULE_9__.AppView.READING),\n                                onBack: ()=>setCurrentView(_types__WEBPACK_IMPORTED_MODULE_9__.AppView.CREATE)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                                lineNumber: 108,\n                                columnNumber: 25\n                            }, this),\n                            currentView === _types__WEBPACK_IMPORTED_MODULE_9__.AppView.READING && currentBook && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BookViewer__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                book: currentBook,\n                                onUpdateBook: handleUpdateBook,\n                                onClose: ()=>setCurrentView(_types__WEBPACK_IMPORTED_MODULE_9__.AppView.EDITOR)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                                lineNumber: 117,\n                                columnNumber: 25\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                        lineNumber: 95,\n                        columnNumber: 17\n                    }, this),\n                    currentView === _types__WEBPACK_IMPORTED_MODULE_9__.AppView.HOME && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                        className: \"bg-white py-8 border-t border-slate-100\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"max-w-7xl mx-auto px-4 text-center text-slate-400\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: [\n                                    \"\\xa9 \",\n                                    new Date().getFullYear(),\n                                    \" KidCraft AI. Making learning magical.\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                                lineNumber: 128,\n                                columnNumber: 29\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                            lineNumber: 127,\n                            columnNumber: 25\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                        lineNumber: 126,\n                        columnNumber: 21\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\app\\\\page.tsx\",\n                lineNumber: 85,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGVBQWVOLDJDQUFPQSxDQUFDeUIsTUFBTTs7Ozs7OzRCQUdyRHBCLGdCQUFnQkwsMkNBQU9BLENBQUN5QixNQUFNLGtCQUMzQiw4REFBQzlCLGdFQUFZQTtnQ0FDVHdELFVBQVV6QjtnQ0FDVjBCLFdBQVc1QyxXQUFXUCxvREFBZ0JBLENBQUMyQixlQUFlOzs7Ozs7NEJBSTdEdkIsZ0JBQWdCTCwyQ0FBT0EsQ0FBQytCLE1BQU0sSUFBSXBCLDZCQUMvQiw4REFBQ2QsOERBQVVBO2dDQUNQZ0MsTUFBTWxCO2dDQUNOMEMsY0FBY2Y7Z0NBQ2RnQixXQUFXLElBQU1oRCxlQUFlTiwyQ0FBT0EsQ0FBQzZDLE9BQU87Z0NBQy9DVSxRQUFRLElBQU1qRCxlQUFlTiwyQ0FBT0EsQ0FBQ3lCLE1BQU07Ozs7Ozs0QkFJbERwQixnQkFBZ0JMLDJDQUFPQSxDQUFDNkMsT0FBTyxJQUFJbEMsNkJBQ2hDLDhEQUFDZiw4REFBVUE7Z0NBQ1BpQyxNQUFNbEI7Z0NBQ04wQyxjQUFjZjtnQ0FDZEksU0FBUyxJQUFNcEMsZUFBZU4sMkNBQU9BLENBQUMrQixNQUFNOzs7Ozs7Ozs7Ozs7b0JBS3ZEMUIsZ0JBQWdCTCwyQ0FBT0EsQ0FBQ08sSUFBSSxrQkFDekIsOERBQUNpRDt3QkFBT1osV0FBVTtrQ0FDZCw0RUFBQ0Q7NEJBQUlDLFdBQVU7c0NBQ1gsNEVBQUNhOztvQ0FBRTtvQ0FBRyxJQUFJQyxPQUFPQyxXQUFXO29DQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzNEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExFTk9WT1xcRGVza3RvcFxcc2hhaGFyXFxib29rYWlcXGFwcFxccGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXHJcblxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IEhlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvSGVhZGVyJ1xyXG5pbXBvcnQgSGVybyBmcm9tICdAL2NvbXBvbmVudHMvSGVybydcclxuaW1wb3J0IENyZWF0aW9uRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvQ3JlYXRpb25Gb3JtJ1xyXG5pbXBvcnQgQm9va1ZpZXdlciBmcm9tICdAL2NvbXBvbmVudHMvQm9va1ZpZXdlcidcclxuaW1wb3J0IEJvb2tFZGl0b3IgZnJvbSAnQC9jb21wb25lbnRzL0Jvb2tFZGl0b3InXHJcbmltcG9ydCBBcGlLZXlNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvQXBpS2V5TW9kYWwnXHJcbmltcG9ydCBCb29rc0dhbGxlcnkgZnJvbSAnQC9jb21wb25lbnRzL0Jvb2tzR2FsbGVyeSdcclxuaW1wb3J0IHsgQXBwVmlldywgQm9vaywgQm9va1JlcXVlc3QsIEdlbmVyYXRpb25TdGF0dXMgfSBmcm9tICdAL3R5cGVzJ1xyXG5pbXBvcnQgeyBnZW5lcmF0ZUJvb2tDb250ZW50IH0gZnJvbSAnQC9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlJ1xyXG5pbXBvcnQgeyBhcGlLZXlNYW5hZ2VyIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGlLZXlNYW5hZ2VyJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZSgpIHtcclxuICAgIGNvbnN0IFtjdXJyZW50Vmlldywgc2V0Q3VycmVudFZpZXddID0gdXNlU3RhdGU8QXBwVmlldz4oQXBwVmlldy5IT01FKVxyXG4gICAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlPEdlbmVyYXRpb25TdGF0dXM+KEdlbmVyYXRpb25TdGF0dXMuSURMRSlcclxuICAgIGNvbnN0IFtjdXJyZW50Qm9vaywgc2V0Q3VycmVudEJvb2tdID0gdXNlU3RhdGU8Qm9vayB8IG51bGw+KG51bGwpXHJcbiAgICBjb25zdCBbaGFzQXBpS2V5LCBzZXRIYXNBcGlLZXldID0gdXNlU3RhdGU8Ym9vbGVhbiB8IG51bGw+KG51bGwpXHJcbiAgICBjb25zdCBbc2hvd0dhbGxlcnksIHNldFNob3dHYWxsZXJ5XSA9IHVzZVN0YXRlKGZhbHNlKVxyXG5cclxuICAgIC8vIENoZWNrIGZvciBBUEkga2V5IG9uIG1vdW50XHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIHNldEhhc0FwaUtleShhcGlLZXlNYW5hZ2VyLmhhc0tleSgpKVxyXG4gICAgfSwgW10pXHJcblxyXG4gICAgY29uc3QgaGFuZGxlQXBpS2V5U3VibWl0ID0gdXNlQ2FsbGJhY2soKGtleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgYXBpS2V5TWFuYWdlci5zZXRLZXkoa2V5KVxyXG4gICAgICAgIHNldEhhc0FwaUtleSh0cnVlKVxyXG4gICAgfSwgW10pXHJcblxyXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlS2V5ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgICAgIGFwaUtleU1hbmFnZXIucmVtb3ZlS2V5KClcclxuICAgICAgICBzZXRIYXNBcGlLZXkoZmFsc2UpXHJcbiAgICB9LCBbXSlcclxuXHJcbiAgICBjb25zdCBoYW5kbGVOYXZpZ2F0ZSA9IHVzZUNhbGxiYWNrKCh2aWV3OiBBcHBWaWV3KSA9PiB7XHJcbiAgICAgICAgc2V0Q3VycmVudFZpZXcodmlldylcclxuICAgICAgICBpZiAodmlldyA9PT0gQXBwVmlldy5DUkVBVEUpIHtcclxuICAgICAgICAgICAgc2V0U3RhdHVzKEdlbmVyYXRpb25TdGF0dXMuSURMRSlcclxuICAgICAgICB9XHJcbiAgICB9LCBbXSlcclxuXHJcbiAgICBjb25zdCBoYW5kbGVDcmVhdGVCb29rID0gdXNlQ2FsbGJhY2soYXN5bmMgKHJlcXVlc3Q6IEJvb2tSZXF1ZXN0KSA9PiB7XHJcbiAgICAgICAgc2V0U3RhdHVzKEdlbmVyYXRpb25TdGF0dXMuR0VORVJBVElOR19URVhUKVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCBnZW5lcmF0ZUJvb2tDb250ZW50KHJlcXVlc3QpXHJcbiAgICAgICAgICAgIHNldEN1cnJlbnRCb29rKGJvb2spXHJcbiAgICAgICAgICAgIHNldFN0YXR1cyhHZW5lcmF0aW9uU3RhdHVzLlNVQ0NFU1MpXHJcbiAgICAgICAgICAgIHNldEN1cnJlbnRWaWV3KEFwcFZpZXcuRURJVE9SKVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICAgICAgc2V0U3RhdHVzKEdlbmVyYXRpb25TdGF0dXMuRVJST1IpXHJcbiAgICAgICAgICAgIC8vIFNob3cgY29weXJpZ2h0IGVycm9yIG9yIGdlbmVyYWwgZXJyb3JcclxuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCfXnteV15LXnycpKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChlcnJvci5tZXNzYWdlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ09vcHMhIFNvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGNyYWZ0aW5nIHlvdXIgc3RvcnkuIFBsZWFzZSB0cnkgYWdhaW4uJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKVxyXG5cclxuICAgIGNvbnN0IGhhbmRsZVVwZGF0ZUJvb2sgPSB1c2VDYWxsYmFjaygodXBkYXRlZEJvb2s6IEJvb2spID0+IHtcclxuICAgICAgICBzZXRDdXJyZW50Qm9vayh1cGRhdGVkQm9vaylcclxuICAgIH0sIFtdKVxyXG5cclxuICAgIC8vIFNob3cgbG9hZGluZyBzdGF0ZSB3aGlsZSBjaGVja2luZyBmb3IgQVBJIGtleVxyXG4gICAgaWYgKGhhc0FwaUtleSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8PlxyXG4gICAgICAgICAgICB7LyogQVBJIEtleSBNb2RhbCAqL31cclxuICAgICAgICAgICAgPEFwaUtleU1vZGFsXHJcbiAgICAgICAgICAgICAgICBpc1Zpc2libGU9eyFoYXNBcGlLZXl9XHJcbiAgICAgICAgICAgICAgICBvbktleVN1Ym1pdD17aGFuZGxlQXBpS2V5U3VibWl0fVxyXG4gICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgey8qIEJvb2tzIEdhbGxlcnkgTW9kYWwgKi99XHJcbiAgICAgICAgICAgIHtzaG93R2FsbGVyeSAmJiAoXHJcbiAgICAgICAgICAgICAgICA8Qm9va3NHYWxsZXJ5IG9uQ2xvc2U9eygpID0+IHNldFNob3dHYWxsZXJ5KGZhbHNlKX0gLz5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggZmxleC1jb2wgZm9udC1zYW5zIHRleHQtc2xhdGUtODAwXCI+XHJcbiAgICAgICAgICAgICAgICB7LyogSGlkZSBIZWFkZXIgaW4gRWRpdG9yL1JlYWRpbmcgbW9kZXMgZm9yIGltbWVyc2lvbi9mb2N1cyAqL31cclxuICAgICAgICAgICAgICAgIHtjdXJyZW50VmlldyAhPT0gQXBwVmlldy5SRUFESU5HICYmIGN1cnJlbnRWaWV3ICE9PSBBcHBWaWV3LkVESVRPUiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk5hdmlnYXRlPXtoYW5kbGVOYXZpZ2F0ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VLZXk9e2hhbmRsZUNoYW5nZUtleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25TaG93R2FsbGVyeT17KCkgPT4gc2V0U2hvd0dhbGxlcnkodHJ1ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwiZmxleC1ncm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRWaWV3ID09PSBBcHBWaWV3LkhPTUUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SGVybyBvblN0YXJ0PXsoKSA9PiBzZXRDdXJyZW50VmlldyhBcHBWaWV3LkNSRUFURSl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRWaWV3ID09PSBBcHBWaWV3LkNSRUFURSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDcmVhdGlvbkZvcm1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VibWl0PXtoYW5kbGVDcmVhdGVCb29rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nPXtzdGF0dXMgPT09IEdlbmVyYXRpb25TdGF0dXMuR0VORVJBVElOR19URVhUfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHtjdXJyZW50VmlldyA9PT0gQXBwVmlldy5FRElUT1IgJiYgY3VycmVudEJvb2sgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Qm9va0VkaXRvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vaz17Y3VycmVudEJvb2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZUJvb2s9e2hhbmRsZVVwZGF0ZUJvb2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblByZXZpZXc9eygpID0+IHNldEN1cnJlbnRWaWV3KEFwcFZpZXcuUkVBRElORyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s9eygpID0+IHNldEN1cnJlbnRWaWV3KEFwcFZpZXcuQ1JFQVRFKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7Y3VycmVudFZpZXcgPT09IEFwcFZpZXcuUkVBRElORyAmJiBjdXJyZW50Qm9vayAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxCb29rVmlld2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib29rPXtjdXJyZW50Qm9va31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlQm9vaz17aGFuZGxlVXBkYXRlQm9va31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldEN1cnJlbnRWaWV3KEFwcFZpZXcuRURJVE9SKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9tYWluPlxyXG5cclxuICAgICAgICAgICAgICAgIHtjdXJyZW50VmlldyA9PT0gQXBwVmlldy5IT01FICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8Zm9vdGVyIGNsYXNzTmFtZT1cImJnLXdoaXRlIHB5LTggYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LTd4bCBteC1hdXRvIHB4LTQgdGV4dC1jZW50ZXIgdGV4dC1zbGF0ZS00MDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPsKpIHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9IEtpZENyYWZ0IEFJLiBNYWtpbmcgbGVhcm5pbmcgbWFnaWNhbC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZm9vdGVyPlxyXG4gICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC8+XHJcbiAgICApXHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsIkhlYWRlciIsIkhlcm8iLCJDcmVhdGlvbkZvcm0iLCJCb29rVmlld2VyIiwiQm9va0VkaXRvciIsIkFwaUtleU1vZGFsIiwiQm9va3NHYWxsZXJ5IiwiQXBwVmlldyIsIkdlbmVyYXRpb25TdGF0dXMiLCJnZW5lcmF0ZUJvb2tDb250ZW50IiwiYXBpS2V5TWFuYWdlciIsIkhvbWUiLCJjdXJyZW50VmlldyIsInNldEN1cnJlbnRWaWV3IiwiSE9NRSIsInN0YXR1cyIsInNldFN0YXR1cyIsIklETEUiLCJjdXJyZW50Qm9vayIsInNldEN1cnJlbnRCb29rIiwiaGFzQXBpS2V5Iiwic2V0SGFzQXBpS2V5Iiwic2hvd0dhbGxlcnkiLCJzZXRTaG93R2FsbGVyeSIsImhhc0tleSIsImhhbmRsZUFwaUtleVN1Ym1pdCIsImtleSIsInNldEtleSIsImhhbmRsZUNoYW5nZUtleSIsInJlbW92ZUtleSIsImhhbmRsZU5hdmlnYXRlIiwidmlldyIsIkNSRUFURSIsImhhbmRsZUNyZWF0ZUJvb2siLCJyZXF1ZXN0IiwiR0VORVJBVElOR19URVhUIiwiYm9vayIsIlNVQ0NFU1MiLCJFRElUT1IiLCJlcnJvciIsImNvbnNvbGUiLCJFUlJPUiIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImFsZXJ0IiwiaGFuZGxlVXBkYXRlQm9vayIsInVwZGF0ZWRCb29rIiwiaXNWaXNpYmxlIiwib25LZXlTdWJtaXQiLCJvbkNsb3NlIiwiZGl2IiwiY2xhc3NOYW1lIiwiUkVBRElORyIsIm9uTmF2aWdhdGUiLCJvbkNoYW5nZUtleSIsIm9uU2hvd0dhbGxlcnkiLCJtYWluIiwib25TdGFydCIsIm9uU3VibWl0IiwiaXNMb2FkaW5nIiwib25VcGRhdGVCb29rIiwib25QcmV2aWV3Iiwib25CYWNrIiwiZm9vdGVyIiwicCIsIkRhdGUiLCJnZXRGdWxsWWVhciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/page.tsx\n");

/***/ }),

/***/ "(ssr)/./components/ApiKeyModal.tsx":
/*!************************************!*\
  !*** ./components/ApiKeyModal.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\nconst ApiKeyModal = ({ onKeySubmit, isVisible })=>{\n    const [apiKey, setApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        if (!apiKey.trim()) {\n            setError('   API');\n            return;\n        }\n        if (!apiKey.startsWith('AIza')) {\n            setError(' API  .  Gemini  -AIza');\n            return;\n        }\n        setIsLoading(true);\n        setError('');\n        // Small delay for UX\n        await new Promise((resolve)=>setTimeout(resolve, 500));\n        onKeySubmit(apiKey.trim());\n        setIsLoading(false);\n    };\n    if (!isVisible) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-gradient-to-br from-sky-100 via-blue-50 to-teal-50 z-[200] flex items-center justify-center p-6\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 border-4 border-kid-blue/20 animate-fade-in\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-6xl mb-4\",\n                            children: \"\\uD83D\\uDD11\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 45,\n                            columnNumber: 21\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                            className: \"text-3xl font-black text-slate-800 mb-2\",\n                            children: \"! \"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 46,\n                            columnNumber: 21\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-slate-600 leading-relaxed\",\n                            children: \"    ,     -API  Gemini \"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 47,\n                            columnNumber: 21\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                    lineNumber: 44,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleSubmit,\n                    className: \"space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"apiKey\",\n                                    className: \"block text-sm font-bold text-slate-700 mb-2 text-right\",\n                                    children: \"Gemini API Key\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                                    lineNumber: 54,\n                                    columnNumber: 25\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    id: \"apiKey\",\n                                    type: \"password\",\n                                    value: apiKey,\n                                    onChange: (e)=>setApiKey(e.target.value),\n                                    placeholder: \"AIza...\",\n                                    className: \"w-full bg-slate-50 border-2 border-slate-200 rounded-xl p-4 text-lg focus:border-kid-blue focus:ring-0 outline-none transition-colors text-left font-mono\",\n                                    dir: \"ltr\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                                    lineNumber: 57,\n                                    columnNumber: 25\n                                }, undefined),\n                                error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-red-500 text-sm mt-2 text-right\",\n                                    children: error\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                                    lineNumber: 67,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 53,\n                            columnNumber: 21\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"submit\",\n                            disabled: isLoading,\n                            className: \"w-full bg-kid-blue hover:bg-teal-400 text-white font-bold py-4 rounded-2xl shadow-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\",\n                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                                        lineNumber: 78,\n                                        columnNumber: 33\n                                    }, undefined),\n                                    \"...\"\n                                ]\n                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: \"  \"\n                            }, void 0, false)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 71,\n                            columnNumber: 21\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                    lineNumber: 52,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-8 pt-6 border-t border-slate-100\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-slate-400 text-center leading-relaxed\",\n                            children: [\n                                \"  ?\",\n                                ' ',\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                    href: \"https://aistudio.google.com/app/apikey\",\n                                    target: \"_blank\",\n                                    rel: \"noopener noreferrer\",\n                                    className: \"text-kid-blue underline hover:text-teal-500 font-bold\",\n                                    children: \"   -Google AI Studio\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                                    lineNumber: 92,\n                                    columnNumber: 25\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 90,\n                            columnNumber: 21\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-xs text-slate-300 mt-3 text-center\",\n                            children: \"\\uD83D\\uDD12         \"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                            lineNumber: 101,\n                            columnNumber: 21\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n                    lineNumber: 89,\n                    columnNumber: 17\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n            lineNumber: 43,\n            columnNumber: 13\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\ApiKeyModal.tsx\",\n        lineNumber: 42,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ApiKeyModal);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL0FwaUtleU1vZGFsLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFdUM7QUFRdkMsTUFBTUUsY0FBMEMsQ0FBQyxFQUFFQyxXQUFXLEVBQUVDLFNBQVMsRUFBRTtJQUN2RSxNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR0wsK0NBQVFBLENBQUM7SUFDckMsTUFBTSxDQUFDTSxXQUFXQyxhQUFhLEdBQUdQLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ1EsT0FBT0MsU0FBUyxHQUFHVCwrQ0FBUUEsQ0FBQztJQUVuQyxNQUFNVSxlQUFlLE9BQU9DO1FBQ3hCQSxFQUFFQyxjQUFjO1FBRWhCLElBQUksQ0FBQ1IsT0FBT1MsSUFBSSxJQUFJO1lBQ2hCSixTQUFTO1lBQ1Q7UUFDSjtRQUVBLElBQUksQ0FBQ0wsT0FBT1UsVUFBVSxDQUFDLFNBQVM7WUFDNUJMLFNBQVM7WUFDVDtRQUNKO1FBRUFGLGFBQWE7UUFDYkUsU0FBUztRQUVULHFCQUFxQjtRQUNyQixNQUFNLElBQUlNLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVM7UUFFakRkLFlBQVlFLE9BQU9TLElBQUk7UUFDdkJOLGFBQWE7SUFDakI7SUFFQSxJQUFJLENBQUNKLFdBQVcsT0FBTztJQUV2QixxQkFDSSw4REFBQ2U7UUFBSUMsV0FBVTtrQkFDWCw0RUFBQ0Q7WUFBSUMsV0FBVTs7OEJBQ1gsOERBQUNEO29CQUFJQyxXQUFVOztzQ0FDWCw4REFBQ0Q7NEJBQUlDLFdBQVU7c0NBQWdCOzs7Ozs7c0NBQy9CLDhEQUFDQzs0QkFBR0QsV0FBVTtzQ0FBMEM7Ozs7OztzQ0FDeEQsOERBQUNFOzRCQUFFRixXQUFVO3NDQUFpQzs7Ozs7Ozs7Ozs7OzhCQUtsRCw4REFBQ0c7b0JBQUtDLFVBQVViO29CQUFjUyxXQUFVOztzQ0FDcEMsOERBQUNEOzs4Q0FDRyw4REFBQ007b0NBQU1DLFNBQVE7b0NBQVNOLFdBQVU7OENBQXlEOzs7Ozs7OENBRzNGLDhEQUFDTztvQ0FDR0MsSUFBRztvQ0FDSEMsTUFBSztvQ0FDTEMsT0FBT3pCO29DQUNQMEIsVUFBVSxDQUFDbkIsSUFBTU4sVUFBVU0sRUFBRW9CLE1BQU0sQ0FBQ0YsS0FBSztvQ0FDekNHLGFBQVk7b0NBQ1piLFdBQVU7b0NBQ1ZjLEtBQUk7Ozs7OztnQ0FFUHpCLHVCQUNHLDhEQUFDYTtvQ0FBRUYsV0FBVTs4Q0FBd0NYOzs7Ozs7Ozs7Ozs7c0NBSTdELDhEQUFDMEI7NEJBQ0dOLE1BQUs7NEJBQ0xPLFVBQVU3Qjs0QkFDVmEsV0FBVTtzQ0FFVGIsMEJBQ0c7O2tEQUNJLDhEQUFDWTt3Q0FBSUMsV0FBVTs7Ozs7O29DQUFxRjs7NkRBSXhHOzBDQUFFOzs7Ozs7Ozs7Ozs7OzhCQU9kLDhEQUFDRDtvQkFBSUMsV0FBVTs7c0NBQ1gsOERBQUNFOzRCQUFFRixXQUFVOztnQ0FBcUQ7Z0NBQ2pEOzhDQUNiLDhEQUFDaUI7b0NBQ0dDLE1BQUs7b0NBQ0xOLFFBQU87b0NBQ1BPLEtBQUk7b0NBQ0puQixXQUFVOzhDQUNiOzs7Ozs7Ozs7Ozs7c0NBSUwsOERBQUNFOzRCQUFFRixXQUFVO3NDQUEwQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPM0U7QUFFQSxpRUFBZWxCLFdBQVdBLEVBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcY29tcG9uZW50c1xcQXBpS2V5TW9kYWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXHJcblxyXG5pbnRlcmZhY2UgQXBpS2V5TW9kYWxQcm9wcyB7XHJcbiAgICBvbktleVN1Ym1pdDogKGtleTogc3RyaW5nKSA9PiB2b2lkXHJcbiAgICBvbkNoYW5nZUtleT86ICgpID0+IHZvaWRcclxuICAgIGlzVmlzaWJsZTogYm9vbGVhblxyXG59XHJcblxyXG5jb25zdCBBcGlLZXlNb2RhbDogUmVhY3QuRkM8QXBpS2V5TW9kYWxQcm9wcz4gPSAoeyBvbktleVN1Ym1pdCwgaXNWaXNpYmxlIH0pID0+IHtcclxuICAgIGNvbnN0IFthcGlLZXksIHNldEFwaUtleV0gPSB1c2VTdGF0ZSgnJylcclxuICAgIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcclxuICAgIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpXHJcblxyXG4gICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgICAgICBpZiAoIWFwaUtleS50cmltKCkpIHtcclxuICAgICAgICAgICAgc2V0RXJyb3IoJ9eg15Ag15zXlNeW15nXnyDXntek16rXlyBBUEknKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXBpS2V5LnN0YXJ0c1dpdGgoJ0FJemEnKSkge1xyXG4gICAgICAgICAgICBzZXRFcnJvcign157XpNeq15cgQVBJINec15Ag16rXp9eZ158uINee16TXqteXIEdlbWluaSDXnteq15fXmdecINeRLUFJemEnKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKVxyXG4gICAgICAgIHNldEVycm9yKCcnKVxyXG5cclxuICAgICAgICAvLyBTbWFsbCBkZWxheSBmb3IgVVhcclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSlcclxuXHJcbiAgICAgICAgb25LZXlTdWJtaXQoYXBpS2V5LnRyaW0oKSlcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFpc1Zpc2libGUpIHJldHVybiBudWxsXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1za3ktMTAwIHZpYS1ibHVlLTUwIHRvLXRlYWwtNTAgei1bMjAwXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTZcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy1tZCB3LWZ1bGwgYmctd2hpdGUgcm91bmRlZC1bMi41cmVtXSBzaGFkb3ctMnhsIHAtMTAgYm9yZGVyLTQgYm9yZGVyLWtpZC1ibHVlLzIwIGFuaW1hdGUtZmFkZS1pblwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi04XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTZ4bCBtYi00XCI+8J+UkTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIG1iLTJcIj4h15HXqNeV15vXmdedINeU15HXkNeZ1508L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNjAwIGxlYWRpbmctcmVsYXhlZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICDXm9eT15kg15zXlNeq15fXmdecINec15nXpteV16gg16HXpNeo15nXnSDXp9eh15XXnteZ150sINeg15Ag15zXlNeW15nXnyDXkNeqINee16TXqteXINeULUFQSSDXqdecIEdlbWluaSDXqdec15pcclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImFwaUtleVwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIG1iLTIgdGV4dC1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VtaW5pIEFQSSBLZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cImFwaUtleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2FwaUtleX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0QXBpS2V5KGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQUl6YS4uLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctc2xhdGUtNTAgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLXhsIHAtNCB0ZXh0LWxnIGZvY3VzOmJvcmRlci1raWQtYmx1ZSBmb2N1czpyaW5nLTAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIHRleHQtbGVmdCBmb250LW1vbm9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyPVwibHRyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMCB0ZXh0LXNtIG10LTIgdGV4dC1yaWdodFwiPntlcnJvcn08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1raWQtYmx1ZSBob3ZlcjpiZy10ZWFsLTQwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS00IHJvdW5kZWQtMnhsIHNoYWRvdy1sZyB0cmFuc2l0aW9uLWFsbCB0cmFuc2Zvcm0gaG92ZXI6c2NhbGUtMTA1IGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy01IGgtNSBib3JkZXItMiBib3JkZXItd2hpdGUgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINee16rXl9eR16guLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDXlNeq15fXnCDXnNeZ16bXldeoIOKcqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcblxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC04IHB0LTYgYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zbGF0ZS00MDAgdGV4dC1jZW50ZXIgbGVhZGluZy1yZWxheGVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgINeQ15nXnyDXnNeaINee16TXqteXP3snICd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly9haXN0dWRpby5nb29nbGUuY29tL2FwcC9hcGlrZXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1raWQtYmx1ZSB1bmRlcmxpbmUgaG92ZXI6dGV4dC10ZWFsLTUwMCBmb250LWJvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDXp9eR15wg157XpNeq15cg15HXl9eZ16DXnSDXni1Hb29nbGUgQUkgU3R1ZGlvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXNsYXRlLTMwMCBtdC0zIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIPCflJIg15TXntek16rXlyDXoNep157XqCDXqNenINeR15PXpNeT16TXnyDXqdec15og15XXnNeQINeg16nXnNeXINec16nXldedINep16jXqlxyXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpS2V5TW9kYWxcclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJBcGlLZXlNb2RhbCIsIm9uS2V5U3VibWl0IiwiaXNWaXNpYmxlIiwiYXBpS2V5Iiwic2V0QXBpS2V5IiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRyaW0iLCJzdGFydHNXaXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZGl2IiwiY2xhc3NOYW1lIiwiaDEiLCJwIiwiZm9ybSIsIm9uU3VibWl0IiwibGFiZWwiLCJodG1sRm9yIiwiaW5wdXQiLCJpZCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwicGxhY2Vob2xkZXIiLCJkaXIiLCJidXR0b24iLCJkaXNhYmxlZCIsImEiLCJocmVmIiwicmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./components/ApiKeyModal.tsx\n");

/***/ }),

/***/ "(ssr)/./components/BookEditor.tsx":
/*!***********************************!*\
  !*** ./components/BookEditor.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/geminiService */ \"(ssr)/./services/geminiService.ts\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! html2canvas */ \"(ssr)/./node_modules/html2canvas/dist/html2canvas.esm.js\");\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jspdf */ \"(ssr)/./node_modules/jspdf/dist/jspdf.es.min.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jszip */ \"(ssr)/./node_modules/jszip/lib/index.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_5__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n// Helper for ZIP Export (Same as Viewer)\nfunction audioBufferToWav(buffer) {\n    const numChannels = buffer.numberOfChannels;\n    const sampleRate = buffer.sampleRate;\n    const format = 1; // PCM\n    const bitDepth = 16;\n    const bytesPerSample = bitDepth / 8;\n    const blockAlign = numChannels * bytesPerSample;\n    const dataByteCount = buffer.length * blockAlign;\n    const headerByteCount = 44;\n    const totalByteCount = headerByteCount + dataByteCount;\n    const headerBuffer = new ArrayBuffer(headerByteCount);\n    const view = new DataView(headerBuffer);\n    const writeString = (view, offset, string)=>{\n        for(let i = 0; i < string.length; i++){\n            view.setUint8(offset + i, string.charCodeAt(i));\n        }\n    };\n    writeString(view, 0, 'RIFF');\n    view.setUint32(4, totalByteCount - 8, true);\n    writeString(view, 8, 'WAVE');\n    writeString(view, 12, 'fmt ');\n    view.setUint32(16, 16, true);\n    view.setUint16(20, format, true);\n    view.setUint16(22, numChannels, true);\n    view.setUint32(24, sampleRate, true);\n    view.setUint32(28, sampleRate * blockAlign, true);\n    view.setUint16(32, blockAlign, true);\n    view.setUint16(34, bitDepth, true);\n    writeString(view, 36, 'data');\n    view.setUint32(40, dataByteCount, true);\n    const dataBuffer = new ArrayBuffer(dataByteCount);\n    const dataView = new DataView(dataBuffer);\n    let offset = 0;\n    for(let i = 0; i < buffer.length; i++){\n        for(let channel = 0; channel < numChannels; channel++){\n            const sample = buffer.getChannelData(channel)[i];\n            const s = Math.max(-1, Math.min(1, sample));\n            const int16 = s < 0 ? s * 0x8000 : s * 0x7FFF;\n            dataView.setInt16(offset, int16, true);\n            offset += 2;\n        }\n    }\n    return new Blob([\n        headerBuffer,\n        dataBuffer\n    ], {\n        type: 'audio/wav'\n    });\n}\nconst BookEditor = ({ book, onUpdateBook, onPreview, onBack })=>{\n    const [selectedPages, setSelectedPages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [isRegenerating, setIsRegenerating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [globalLoading, setGlobalLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isExporting, setIsExporting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [exportProgress, setExportProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const fullCharacterDescription = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"BookEditor.useMemo[fullCharacterDescription]\": ()=>{\n            let desc = `Main Character: ${book.metadata.mainCharacterDescription}.`;\n            if (book.metadata.mainCharacterDistinctiveMark) {\n                desc += ` DISTINCTIVE FEATURE: ${book.metadata.mainCharacterDistinctiveMark} (Must appear in every image).`;\n            }\n            if (book.metadata.secondaryCharacterDescription) {\n                desc += `\\nSecondary Character (Sidekick): ${book.metadata.secondaryCharacterDescription} (This appearance MUST be consistent across all pages).`;\n                if (book.metadata.secondaryCharacterDistinctiveMark) {\n                    desc += ` DISTINCTIVE FEATURE: ${book.metadata.secondaryCharacterDistinctiveMark}.`;\n                }\n            }\n            return desc;\n        }\n    }[\"BookEditor.useMemo[fullCharacterDescription]\"], [\n        book.metadata\n    ]);\n    const toggleSelection = (index)=>{\n        const newSet = new Set(selectedPages);\n        if (newSet.has(index)) {\n            newSet.delete(index);\n        } else {\n            newSet.add(index);\n        }\n        setSelectedPages(newSet);\n    };\n    const selectAll = ()=>{\n        if (selectedPages.size === book.pages.length) {\n            setSelectedPages(new Set());\n        } else {\n            setSelectedPages(new Set(book.pages.map((_, i)=>i)));\n        }\n    };\n    const handlePromptChange = (index, newPrompt)=>{\n        const newPages = [\n            ...book.pages\n        ];\n        newPages[index] = {\n            ...newPages[index],\n            imagePrompt: newPrompt\n        };\n        onUpdateBook({\n            ...book,\n            pages: newPages\n        });\n    };\n    // Main generation function\n    const generateImagesForIndices = async (indices)=>{\n        if (indices.length === 0) return;\n        setGlobalLoading(true);\n        // Mark these as regenerating for UI spinners\n        const newRegenerating = new Set(isRegenerating);\n        indices.forEach((i)=>newRegenerating.add(i));\n        setIsRegenerating(newRegenerating);\n        // We work on a copy of pages to avoid state tearing, but we also update main state incrementally\n        const workingPages = [\n            ...book.pages\n        ];\n        // Find reference image from metadata or existing pages\n        let referenceImage = book.metadata.baseCharacterImageUrl || workingPages.find((p)=>p.generatedImageUrl)?.generatedImageUrl;\n        // Process sequentially\n        for (const i of indices){\n            try {\n                const isCover = i === 0;\n                const textToRender = isCover ? book.metadata.title : undefined;\n                const url = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageImage)(workingPages[i].imagePrompt, fullCharacterDescription, book.metadata.artStyle, referenceImage || undefined, isCover, textToRender);\n                if (url) {\n                    workingPages[i] = {\n                        ...workingPages[i],\n                        generatedImageUrl: url\n                    };\n                    if (!referenceImage && (i === 0 || i === 1)) {\n                        referenceImage = url;\n                    }\n                    onUpdateBook({\n                        ...book,\n                        pages: [\n                            ...workingPages\n                        ]\n                    });\n                }\n            } catch (error) {\n                console.error(`Failed to generate image for page ${i}`, error);\n            } finally{\n                setIsRegenerating((prev)=>{\n                    const next = new Set(prev);\n                    next.delete(i);\n                    return next;\n                });\n            }\n        }\n        setGlobalLoading(false);\n    };\n    const handleRegenerateSelected = ()=>{\n        generateImagesForIndices(Array.from(selectedPages));\n    };\n    const handleSingleRegenerate = (index)=>{\n        generateImagesForIndices([\n            index\n        ]);\n    };\n    // AUTO-GENERATE EFFECT\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BookEditor.useEffect\": ()=>{\n            const missingIndices = book.pages.map({\n                \"BookEditor.useEffect.missingIndices\": (page, index)=>page.generatedImageUrl ? -1 : index\n            }[\"BookEditor.useEffect.missingIndices\"]).filter({\n                \"BookEditor.useEffect.missingIndices\": (index)=>index !== -1\n            }[\"BookEditor.useEffect.missingIndices\"]);\n            if (missingIndices.length > 0 && !globalLoading && isRegenerating.size === 0) {\n                console.log(\"Auto-generating missing images for indices:\", missingIndices);\n                generateImagesForIndices(missingIndices);\n            }\n        }\n    }[\"BookEditor.useEffect\"], []); // Run once on mount\n    const prepareExportCanvas = async (i, imgUrl)=>{\n        const isCover = i === 0;\n        // EXPORT LAYOUT STRATEGY:\n        // Cover: 1024x1024 Square\n        // Inner: 1024x1280 Rectangle (1024x1024 Image Top, 1024x256 Text Bottom)\n        const width = 1024;\n        const height = isCover ? 1024 : 1280;\n        const container = document.createElement('div');\n        container.style.width = `${width}px`;\n        container.style.height = `${height}px`;\n        container.style.position = 'absolute';\n        container.style.left = '-9999px';\n        container.style.backgroundColor = '#ffffff'; // White background\n        container.style.overflow = 'hidden';\n        if (isCover) {\n            container.innerHTML = `<img src=\"${imgUrl}\" style=\"width: 1024px; height: 1024px; object-fit: cover;\" />`;\n        } else {\n            const text = book.pages[i].hebrewText || \"\";\n            // Improved text styling matching globals.css updates\n            container.innerHTML = `\n            <div style=\"display: flex; flex-direction: column; width: 1024px; height: 1280px; background: white;\">\n                <div style=\"width: 1024px; height: 1000px; flex-shrink: 0; background-color: #f8fafc;\">\n                    <img src=\"${imgUrl}\" style=\"width: 100%; height: 100%; object-fit: cover; display: block;\" />\n                </div>\n                <div style=\"\n                    width: 1024px; \n                    height: 280px; \n                    display: flex; \n                    align-items: center; \n                    justify-content: center; \n                    padding: 32px 48px; \n                    box-sizing: border-box; \n                    background: linear-gradient(to bottom, #fffdf5 0%, #fff8e7 30%, #fdecc8 70%, #fbe3b2 100%);\n                    box-shadow: inset 0 2px 0 rgba(255, 255, 255, 0.8), inset 0 -2px 8px rgba(0, 0, 0, 0.05);\n                    border-top: 3px solid rgba(255, 255, 255, 0.9);\n                \">\n                     <p style=\"\n                        margin: 0; \n                        font-family: 'Rubik', 'Heebo', 'Arial', sans-serif; \n                        font-size: 44px; \n                        font-weight: 600; \n                        color: #2a1a0a; \n                        direction: rtl; \n                        text-align: center; \n                        line-height: 1.7;\n                        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8), 0 2px 4px rgba(0, 0, 0, 0.06);\n                        letter-spacing: 0.01em;\n                     \">\n                        ${text}\n                     </p>\n                </div>\n            </div>\n        `;\n        }\n        document.body.appendChild(container);\n        await new Promise((resolve)=>setTimeout(resolve, 500));\n        const canvas = await (0,html2canvas__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(container, {\n            scale: 1,\n            useCORS: true,\n            width,\n            height\n        });\n        document.body.removeChild(container);\n        return canvas;\n    };\n    const handleDownloadZIP = async ()=>{\n        if (isExporting || globalLoading) return;\n        setIsExporting(true);\n        setExportProgress(' ...');\n        const zip = new (jszip__WEBPACK_IMPORTED_MODULE_5___default())();\n        // Use A4 for standard printing support\n        const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_4__.jsPDF('p', 'mm', 'a4');\n        const pageWidth = 210;\n        const updatedPages = [\n            ...book.pages\n        ];\n        const audioEnabled = book.metadata.audioConfig?.enabled;\n        const voiceName = book.metadata.audioConfig?.voiceName || 'Puck';\n        try {\n            zip.file(\"sequel_data.json\", JSON.stringify(book, null, 2));\n            for(let i = 0; i < book.pages.length; i++){\n                setExportProgress(`  ${i + 1}/${book.pages.length}...`);\n                let imgUrl = updatedPages[i].generatedImageUrl;\n                const isCover = i === 0;\n                if (!imgUrl) {\n                    // Generate on fly if missing during export\n                    let referenceImage = book.metadata.baseCharacterImageUrl || updatedPages.find((p)=>p.generatedImageUrl)?.generatedImageUrl;\n                    const textToRender = isCover ? book.metadata.title : undefined;\n                    imgUrl = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageImage)(updatedPages[i].imagePrompt, fullCharacterDescription, book.metadata.artStyle, referenceImage || undefined, isCover, textToRender);\n                    if (imgUrl) {\n                        updatedPages[i].generatedImageUrl = imgUrl;\n                        if (!referenceImage && (i === 0 || i === 1)) referenceImage = imgUrl;\n                        onUpdateBook({\n                            ...book,\n                            pages: updatedPages\n                        });\n                    }\n                }\n                if (imgUrl) {\n                    const canvas = await prepareExportCanvas(i, imgUrl);\n                    const pngBlob = await new Promise((resolve)=>canvas.toBlob(resolve, 'image/png'));\n                    if (pngBlob) {\n                        zip.file(i === 0 ? '00_COVER.png' : `PAGE_${String(i).padStart(2, '0')}.png`, pngBlob);\n                    }\n                    // Add to PDF\n                    const imgData = canvas.toDataURL('image/jpeg', 0.9);\n                    const canvasRatio = canvas.height / canvas.width;\n                    const pdfImgHeight = pageWidth * canvasRatio;\n                    let renderWidth = pageWidth;\n                    let renderHeight = pdfImgHeight;\n                    if (renderHeight > 297) {\n                        const scale = 297 / renderHeight;\n                        renderHeight = 297;\n                        renderWidth = pageWidth * scale;\n                    }\n                    const xOffset = (210 - renderWidth) / 2;\n                    pdf.addImage(imgData, 'JPEG', xOffset, 0, renderWidth, renderHeight);\n                    if (i < book.pages.length - 1) pdf.addPage();\n                }\n                if (audioEnabled) {\n                    if (!audioContextRef.current) audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)({\n                        sampleRate: 24000\n                    });\n                    const buf = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageAudio)(i === 0 ? book.metadata.title : book.pages[i].hebrewText, audioContextRef.current, voiceName);\n                    if (buf) zip.file(i === 0 ? '00_AUDIO_Title.wav' : `AUDIO_Page_${String(i).padStart(2, '0')}.wav`, audioBufferToWav(buf));\n                }\n            }\n            const pdfBlob = pdf.output('blob');\n            zip.file(`${book.metadata.title}.pdf`, pdfBlob);\n            const content = await zip.generateAsync({\n                type: 'blob'\n            });\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(content);\n            // Clean filename, just the book title\n            const safeTitle = book.metadata.title.replace(/[\\\\/:*?\"<>|]/g, '_');\n            link.download = `${safeTitle}.zip`;\n            link.click();\n        } catch (error) {\n            console.error(\"Export failed:\", error);\n            alert(\" .\");\n        } finally{\n            setIsExporting(false);\n            setExportProgress('');\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-slate-900 text-slate-100 flex flex-col\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"bg-slate-800 border-b border-slate-700 sticky top-0 z-50 shadow-md\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-7xl mx-auto px-4 py-4 flex flex-col sm:flex-row justify-between items-center gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: onBack,\n                                    className: \"text-slate-400 hover:text-white transition-colors\",\n                                    children: \" \"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 338,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    className: \"text-xl font-bold text-white flex items-center gap-2\",\n                                    children: [\n                                        \"  : \",\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-kid-blue\",\n                                            children: book.metadata.title\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 339,\n                                            columnNumber: 100\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 339,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                            lineNumber: 337,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-xs text-slate-400 mr-2 hidden sm:block\",\n                                    children: [\n                                        selectedPages.size,\n                                        \" \"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 343,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDownloadZIP,\n                                    disabled: isExporting || globalLoading,\n                                    className: \"bg-kid-orange hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all shadow-md flex items-center gap-2 disabled:opacity-50\",\n                                    children: [\n                                        isExporting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"animate-spin\",\n                                            children: \"\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 345,\n                                            columnNumber: 30\n                                        }, undefined) : '',\n                                        \"  ZIP\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 344,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleRegenerateSelected,\n                                    disabled: selectedPages.size === 0 || globalLoading,\n                                    className: \"bg-kid-blue/20 hover:bg-kid-blue/40 text-kid-blue border border-kid-blue/50 font-bold py-2 px-4 rounded-lg text-sm transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2\",\n                                    children: [\n                                        globalLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"animate-spin\",\n                                            children: \"\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 348,\n                                            columnNumber: 32\n                                        }, undefined) : '',\n                                        \"   \"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 347,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: onPreview,\n                                    className: \"bg-kid-yellow hover:bg-yellow-400 text-slate-900 font-bold py-2 px-6 rounded-lg text-sm transition-all shadow-lg transform hover:-translate-y-0.5 flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"\\uD83D\\uDCD6\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 351,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        \"  \"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 350,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                            lineNumber: 342,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                    lineNumber: 336,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                lineNumber: 335,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-auto p-4 sm:p-8\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-7xl mx-auto\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-between items-center mb-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"text-lg font-semibold text-slate-300\",\n                                    children: \" \"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 360,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: selectAll,\n                                    className: \"text-sm text-slate-400 hover:text-white underline\",\n                                    children: selectedPages.size === book.pages.length ? ' ' : ' '\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 361,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                            lineNumber: 359,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",\n                            children: book.pages.map((page, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: `relative bg-slate-800 rounded-xl overflow-hidden border-2 transition-all group ${selectedPages.has(index) ? 'border-kid-blue shadow-[0_0_15px_rgba(64,224,208,0.3)]' : 'border-slate-700 hover:border-slate-600'}`,\n                                    onClick: ()=>toggleSelection(index),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"absolute top-3 left-3 z-20\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: selectedPages.has(index),\n                                                onChange: ()=>{},\n                                                className: \"w-5 h-5 rounded border-slate-500 bg-slate-700 checked:bg-kid-blue cursor-pointer\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                lineNumber: 368,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 367,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"aspect-square bg-slate-900 relative\",\n                                            children: [\n                                                page.generatedImageUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                    src: page.generatedImageUrl,\n                                                    alt: `Page ${index}`,\n                                                    className: \"w-full h-full object-cover\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 373,\n                                                    columnNumber: 21\n                                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-full h-full flex flex-col items-center justify-center text-slate-600\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-4xl mb-2\",\n                                                            children: \"\\uD83D\\uDDBC\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                            lineNumber: 376,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"text-xs\",\n                                                            children: isRegenerating.has(index) ? ' ...' : ' ...'\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                            lineNumber: 377,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 375,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                isRegenerating.has(index) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute inset-0 bg-slate-900/80 flex items-center justify-center z-10\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"w-8 h-8 border-2 border-kid-blue border-t-transparent rounded-full animate-spin\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                        lineNumber: 385,\n                                                        columnNumber: 23\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 384,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex justify-end gap-2\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: (e)=>{\n                                                            e.stopPropagation();\n                                                            handleSingleRegenerate(index);\n                                                        },\n                                                        className: \"p-2 bg-white/10 hover:bg-white/30 rounded-full text-white backdrop-blur-sm\",\n                                                        title: \"Regenerate this page\",\n                                                        children: \"\\uD83D\\uDD04\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                        lineNumber: 390,\n                                                        columnNumber: 21\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 389,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"absolute top-3 right-3 bg-black/50 backdrop-blur text-white text-xs font-bold px-2 py-1 rounded\",\n                                                    children: index === 0 ? '' : ` ${page.pageNumber}`\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 393,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 371,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"p-4 space-y-3\",\n                                            onClick: (e)=>e.stopPropagation(),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                            className: \"text-[10px] uppercase font-bold text-slate-500 tracking-wider mb-1 block\",\n                                                            children: \"   (PROMPT)\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                            lineNumber: 398,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                            value: page.imagePrompt,\n                                                            onChange: (e)=>handlePromptChange(index, e.target.value),\n                                                            className: \"w-full bg-slate-900 border border-slate-700 rounded-lg p-2 text-xs text-slate-300 focus:border-kid-blue focus:ring-1 focus:ring-kid-blue outline-none resize-none h-24 scrollbar-thin\",\n                                                            placeholder: \"   ...\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                            lineNumber: 399,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 397,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                            className: \"text-[10px] uppercase font-bold text-slate-500 tracking-wider mb-1 block\",\n                                                            children: \" \"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                            lineNumber: 402,\n                                                            columnNumber: 21\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-slate-400 line-clamp-2\",\n                                                            dir: \"rtl\",\n                                                            children: index === 0 ? book.metadata.title : page.hebrewText\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                            lineNumber: 403,\n                                                            columnNumber: 21\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                                    lineNumber: 401,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                            lineNumber: 396,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, index, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                                    lineNumber: 366,\n                                    columnNumber: 15\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                            lineNumber: 364,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                    lineNumber: 358,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                lineNumber: 357,\n                columnNumber: 7\n            }, undefined),\n            isExporting && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 z-[100] bg-slate-900/90 flex items-center justify-center text-white\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-16 h-16 border-4 border-kid-blue border-t-transparent rounded-full animate-spin mx-auto mb-6\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                            lineNumber: 415,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-2xl font-bold font-fredoka\",\n                            children: exportProgress\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                            lineNumber: 416,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                    lineNumber: 414,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n                lineNumber: 413,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookEditor.tsx\",\n        lineNumber: 334,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookEditor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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XGJvb2thaVxcY29tcG9uZW50c1xcQm9va0VkaXRvci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlTWVtbywgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEJvb2ssIEJvb2tQYWdlIH0gZnJvbSAnQC90eXBlcydcbmltcG9ydCB7IGdlbmVyYXRlUGFnZUltYWdlLCBnZW5lcmF0ZVBhZ2VBdWRpbyB9IGZyb20gJ0Avc2VydmljZXMvZ2VtaW5pU2VydmljZSdcbmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcydcbmltcG9ydCB7IGpzUERGIH0gZnJvbSAnanNwZGYnXG5pbXBvcnQgSlNaaXAgZnJvbSAnanN6aXAnXG5cbmludGVyZmFjZSBCb29rRWRpdG9yUHJvcHMge1xuICBib29rOiBCb29rO1xuICBvblVwZGF0ZUJvb2s6ICh1cGRhdGVkQm9vazogQm9vaykgPT4gdm9pZDtcbiAgb25QcmV2aWV3OiAoKSA9PiB2b2lkO1xuICBvbkJhY2s6ICgpID0+IHZvaWQ7XG59XG5cbi8vIEhlbHBlciBmb3IgWklQIEV4cG9ydCAoU2FtZSBhcyBWaWV3ZXIpXG5mdW5jdGlvbiBhdWRpb0J1ZmZlclRvV2F2KGJ1ZmZlcjogQXVkaW9CdWZmZXIpOiBCbG9iIHtcbiAgY29uc3QgbnVtQ2hhbm5lbHMgPSBidWZmZXIubnVtYmVyT2ZDaGFubmVscztcbiAgY29uc3Qgc2FtcGxlUmF0ZSA9IGJ1ZmZlci5zYW1wbGVSYXRlO1xuICBjb25zdCBmb3JtYXQgPSAxOyAvLyBQQ01cbiAgY29uc3QgYml0RGVwdGggPSAxNjtcbiAgY29uc3QgYnl0ZXNQZXJTYW1wbGUgPSBiaXREZXB0aCAvIDg7XG4gIGNvbnN0IGJsb2NrQWxpZ24gPSBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlO1xuICBjb25zdCBkYXRhQnl0ZUNvdW50ID0gYnVmZmVyLmxlbmd0aCAqIGJsb2NrQWxpZ247XG4gIGNvbnN0IGhlYWRlckJ5dGVDb3VudCA9IDQ0O1xuICBjb25zdCB0b3RhbEJ5dGVDb3VudCA9IGhlYWRlckJ5dGVDb3VudCArIGRhdGFCeXRlQ291bnQ7XG4gIGNvbnN0IGhlYWRlckJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihoZWFkZXJCeXRlQ291bnQpO1xuICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGhlYWRlckJ1ZmZlcik7XG4gIGNvbnN0IHdyaXRlU3RyaW5nID0gKHZpZXc6IERhdGFWaWV3LCBvZmZzZXQ6IG51bWJlciwgc3RyaW5nOiBzdHJpbmcpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7XG4gICAgfVxuICB9O1xuICB3cml0ZVN0cmluZyh2aWV3LCAwLCAnUklGRicpO1xuICB2aWV3LnNldFVpbnQzMig0LCB0b3RhbEJ5dGVDb3VudCAtIDgsIHRydWUpO1xuICB3cml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpO1xuICB3cml0ZVN0cmluZyh2aWV3LCAxMiwgJ2ZtdCAnKTtcbiAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTtcbiAgdmlldy5zZXRVaW50MTYoMjAsIGZvcm1hdCwgdHJ1ZSk7XG4gIHZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7XG4gIHZpZXcuc2V0VWludDMyKDI0LCBzYW1wbGVSYXRlLCB0cnVlKTtcbiAgdmlldy5zZXRVaW50MzIoMjgsIHNhbXBsZVJhdGUgKiBibG9ja0FsaWduLCB0cnVlKTtcbiAgdmlldy5zZXRVaW50MTYoMzIsIGJsb2NrQWxpZ24sIHRydWUpO1xuICB2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpO1xuICB3cml0ZVN0cmluZyh2aWV3LCAzNiwgJ2RhdGEnKTtcbiAgdmlldy5zZXRVaW50MzIoNDAsIGRhdGFCeXRlQ291bnQsIHRydWUpO1xuICBjb25zdCBkYXRhQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGRhdGFCeXRlQ291bnQpO1xuICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhkYXRhQnVmZmVyKTtcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBudW1DaGFubmVsczsgY2hhbm5lbCsrKSB7XG4gICAgICBjb25zdCBzYW1wbGUgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY2hhbm5lbClbaV07XG4gICAgICBjb25zdCBzID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIHNhbXBsZSkpO1xuICAgICAgY29uc3QgaW50MTYgPSBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGO1xuICAgICAgZGF0YVZpZXcuc2V0SW50MTYob2Zmc2V0LCBpbnQxNiwgdHJ1ZSk7XG4gICAgICBvZmZzZXQgKz0gMjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBCbG9iKFtoZWFkZXJCdWZmZXIsIGRhdGFCdWZmZXJdLCB7IHR5cGU6ICdhdWRpby93YXYnIH0pO1xufVxuXG5jb25zdCBCb29rRWRpdG9yOiBSZWFjdC5GQzxCb29rRWRpdG9yUHJvcHM+ID0gKHsgYm9vaywgb25VcGRhdGVCb29rLCBvblByZXZpZXcsIG9uQmFjayB9KSA9PiB7XG4gIGNvbnN0IFtzZWxlY3RlZFBhZ2VzLCBzZXRTZWxlY3RlZFBhZ2VzXSA9IHVzZVN0YXRlPFNldDxudW1iZXI+PihuZXcgU2V0KCkpO1xuICBjb25zdCBbaXNSZWdlbmVyYXRpbmcsIHNldElzUmVnZW5lcmF0aW5nXSA9IHVzZVN0YXRlPFNldDxudW1iZXI+PihuZXcgU2V0KCkpO1xuICBjb25zdCBbZ2xvYmFsTG9hZGluZywgc2V0R2xvYmFsTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgW2lzRXhwb3J0aW5nLCBzZXRJc0V4cG9ydGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtleHBvcnRQcm9ncmVzcywgc2V0RXhwb3J0UHJvZ3Jlc3NdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBhdWRpb0NvbnRleHRSZWYgPSB1c2VSZWY8QXVkaW9Db250ZXh0IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgZnVsbENoYXJhY3RlckRlc2NyaXB0aW9uID0gdXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IGRlc2MgPSBgTWFpbiBDaGFyYWN0ZXI6ICR7Ym9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGVzY3JpcHRpb259LmA7XG4gICAgaWYgKGJvb2subWV0YWRhdGEubWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyaykge1xuICAgICAgZGVzYyArPSBgIERJU1RJTkNUSVZFIEZFQVRVUkU6ICR7Ym9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrfSAoTXVzdCBhcHBlYXIgaW4gZXZlcnkgaW1hZ2UpLmA7XG4gICAgfVxuICAgIGlmIChib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uKSB7XG4gICAgICBkZXNjICs9IGBcXG5TZWNvbmRhcnkgQ2hhcmFjdGVyIChTaWRla2ljayk6ICR7Ym9vay5tZXRhZGF0YS5zZWNvbmRhcnlDaGFyYWN0ZXJEZXNjcmlwdGlvbn0gKFRoaXMgYXBwZWFyYW5jZSBNVVNUIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCBwYWdlcykuYDtcbiAgICAgIGlmIChib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRpc3RpbmN0aXZlTWFyaykge1xuICAgICAgICBkZXNjICs9IGAgRElTVElOQ1RJVkUgRkVBVFVSRTogJHtib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRpc3RpbmN0aXZlTWFya30uYDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2M7XG4gIH0sIFtib29rLm1ldGFkYXRhXSk7XG5cbiAgY29uc3QgdG9nZ2xlU2VsZWN0aW9uID0gKGluZGV4OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHNlbGVjdGVkUGFnZXMpO1xuICAgIGlmIChuZXdTZXQuaGFzKGluZGV4KSkgeyBuZXdTZXQuZGVsZXRlKGluZGV4KTsgfSBlbHNlIHsgbmV3U2V0LmFkZChpbmRleCk7IH1cbiAgICBzZXRTZWxlY3RlZFBhZ2VzKG5ld1NldCk7XG4gIH07XG5cbiAgY29uc3Qgc2VsZWN0QWxsID0gKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZFBhZ2VzLnNpemUgPT09IGJvb2sucGFnZXMubGVuZ3RoKSB7IHNldFNlbGVjdGVkUGFnZXMobmV3IFNldCgpKTsgfVxuICAgIGVsc2UgeyBzZXRTZWxlY3RlZFBhZ2VzKG5ldyBTZXQoYm9vay5wYWdlcy5tYXAoKF8sIGkpID0+IGkpKSk7IH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVQcm9tcHRDaGFuZ2UgPSAoaW5kZXg6IG51bWJlciwgbmV3UHJvbXB0OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBuZXdQYWdlcyA9IFsuLi5ib29rLnBhZ2VzXTtcbiAgICBuZXdQYWdlc1tpbmRleF0gPSB7IC4uLm5ld1BhZ2VzW2luZGV4XSwgaW1hZ2VQcm9tcHQ6IG5ld1Byb21wdCB9O1xuICAgIG9uVXBkYXRlQm9vayh7IC4uLmJvb2ssIHBhZ2VzOiBuZXdQYWdlcyB9KTtcbiAgfTtcblxuICAvLyBNYWluIGdlbmVyYXRpb24gZnVuY3Rpb25cbiAgY29uc3QgZ2VuZXJhdGVJbWFnZXNGb3JJbmRpY2VzID0gYXN5bmMgKGluZGljZXM6IG51bWJlcltdKSA9PiB7XG4gICAgaWYgKGluZGljZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBzZXRHbG9iYWxMb2FkaW5nKHRydWUpO1xuXG4gICAgLy8gTWFyayB0aGVzZSBhcyByZWdlbmVyYXRpbmcgZm9yIFVJIHNwaW5uZXJzXG4gICAgY29uc3QgbmV3UmVnZW5lcmF0aW5nID0gbmV3IFNldChpc1JlZ2VuZXJhdGluZyk7XG4gICAgaW5kaWNlcy5mb3JFYWNoKGkgPT4gbmV3UmVnZW5lcmF0aW5nLmFkZChpKSk7XG4gICAgc2V0SXNSZWdlbmVyYXRpbmcobmV3UmVnZW5lcmF0aW5nKTtcblxuICAgIC8vIFdlIHdvcmsgb24gYSBjb3B5IG9mIHBhZ2VzIHRvIGF2b2lkIHN0YXRlIHRlYXJpbmcsIGJ1dCB3ZSBhbHNvIHVwZGF0ZSBtYWluIHN0YXRlIGluY3JlbWVudGFsbHlcbiAgICBjb25zdCB3b3JraW5nUGFnZXMgPSBbLi4uYm9vay5wYWdlc107XG5cbiAgICAvLyBGaW5kIHJlZmVyZW5jZSBpbWFnZSBmcm9tIG1ldGFkYXRhIG9yIGV4aXN0aW5nIHBhZ2VzXG4gICAgbGV0IHJlZmVyZW5jZUltYWdlID0gYm9vay5tZXRhZGF0YS5iYXNlQ2hhcmFjdGVySW1hZ2VVcmwgfHwgd29ya2luZ1BhZ2VzLmZpbmQocCA9PiBwLmdlbmVyYXRlZEltYWdlVXJsKT8uZ2VuZXJhdGVkSW1hZ2VVcmw7XG5cbiAgICAvLyBQcm9jZXNzIHNlcXVlbnRpYWxseVxuICAgIGZvciAoY29uc3QgaSBvZiBpbmRpY2VzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBpc0NvdmVyID0gaSA9PT0gMDtcbiAgICAgICAgY29uc3QgdGV4dFRvUmVuZGVyID0gaXNDb3ZlciA/IGJvb2subWV0YWRhdGEudGl0bGUgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgZ2VuZXJhdGVQYWdlSW1hZ2UoXG4gICAgICAgICAgd29ya2luZ1BhZ2VzW2ldLmltYWdlUHJvbXB0LFxuICAgICAgICAgIGZ1bGxDaGFyYWN0ZXJEZXNjcmlwdGlvbixcbiAgICAgICAgICBib29rLm1ldGFkYXRhLmFydFN0eWxlLFxuICAgICAgICAgIHJlZmVyZW5jZUltYWdlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc0NvdmVyLFxuICAgICAgICAgIHRleHRUb1JlbmRlclxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICB3b3JraW5nUGFnZXNbaV0gPSB7IC4uLndvcmtpbmdQYWdlc1tpXSwgZ2VuZXJhdGVkSW1hZ2VVcmw6IHVybCB9O1xuXG4gICAgICAgICAgaWYgKCFyZWZlcmVuY2VJbWFnZSAmJiAoaSA9PT0gMCB8fCBpID09PSAxKSkge1xuICAgICAgICAgICAgcmVmZXJlbmNlSW1hZ2UgPSB1cmw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb25VcGRhdGVCb29rKHsgLi4uYm9vaywgcGFnZXM6IFsuLi53b3JraW5nUGFnZXNdIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2VuZXJhdGUgaW1hZ2UgZm9yIHBhZ2UgJHtpfWAsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzUmVnZW5lcmF0aW5nKHByZXYgPT4ge1xuICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICAgIG5leHQuZGVsZXRlKGkpO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0R2xvYmFsTG9hZGluZyhmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVnZW5lcmF0ZVNlbGVjdGVkID0gKCkgPT4geyBnZW5lcmF0ZUltYWdlc0ZvckluZGljZXMoQXJyYXkuZnJvbShzZWxlY3RlZFBhZ2VzKSk7IH07XG4gIGNvbnN0IGhhbmRsZVNpbmdsZVJlZ2VuZXJhdGUgPSAoaW5kZXg6IG51bWJlcikgPT4geyBnZW5lcmF0ZUltYWdlc0ZvckluZGljZXMoW2luZGV4XSk7IH07XG5cbiAgLy8gQVVUTy1HRU5FUkFURSBFRkZFQ1RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBtaXNzaW5nSW5kaWNlcyA9IGJvb2sucGFnZXNcbiAgICAgIC5tYXAoKHBhZ2UsIGluZGV4KSA9PiBwYWdlLmdlbmVyYXRlZEltYWdlVXJsID8gLTEgOiBpbmRleClcbiAgICAgIC5maWx0ZXIoaW5kZXggPT4gaW5kZXggIT09IC0xKTtcblxuICAgIGlmIChtaXNzaW5nSW5kaWNlcy5sZW5ndGggPiAwICYmICFnbG9iYWxMb2FkaW5nICYmIGlzUmVnZW5lcmF0aW5nLnNpemUgPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQXV0by1nZW5lcmF0aW5nIG1pc3NpbmcgaW1hZ2VzIGZvciBpbmRpY2VzOlwiLCBtaXNzaW5nSW5kaWNlcyk7XG4gICAgICBnZW5lcmF0ZUltYWdlc0ZvckluZGljZXMobWlzc2luZ0luZGljZXMpO1xuICAgIH1cbiAgfSwgW10pOyAvLyBSdW4gb25jZSBvbiBtb3VudFxuXG4gIGNvbnN0IHByZXBhcmVFeHBvcnRDYW52YXMgPSBhc3luYyAoaTogbnVtYmVyLCBpbWdVcmw6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGlzQ292ZXIgPSBpID09PSAwO1xuXG4gICAgLy8gRVhQT1JUIExBWU9VVCBTVFJBVEVHWTpcbiAgICAvLyBDb3ZlcjogMTAyNHgxMDI0IFNxdWFyZVxuICAgIC8vIElubmVyOiAxMDI0eDEyODAgUmVjdGFuZ2xlICgxMDI0eDEwMjQgSW1hZ2UgVG9wLCAxMDI0eDI1NiBUZXh0IEJvdHRvbSlcblxuICAgIGNvbnN0IHdpZHRoID0gMTAyNDtcbiAgICBjb25zdCBoZWlnaHQgPSBpc0NvdmVyID8gMTAyNCA6IDEyODA7XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBjb250YWluZXIuc3R5bGUubGVmdCA9ICctOTk5OXB4JztcbiAgICBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnOyAvLyBXaGl0ZSBiYWNrZ3JvdW5kXG4gICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICBpZiAoaXNDb3Zlcikge1xuICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIiR7aW1nVXJsfVwiIHN0eWxlPVwid2lkdGg6IDEwMjRweDsgaGVpZ2h0OiAxMDI0cHg7IG9iamVjdC1maXQ6IGNvdmVyO1wiIC8+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGV4dCA9IGJvb2sucGFnZXNbaV0uaGVicmV3VGV4dCB8fCBcIlwiO1xuICAgICAgLy8gSW1wcm92ZWQgdGV4dCBzdHlsaW5nIG1hdGNoaW5nIGdsb2JhbHMuY3NzIHVwZGF0ZXNcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgd2lkdGg6IDEwMjRweDsgaGVpZ2h0OiAxMjgwcHg7IGJhY2tncm91bmQ6IHdoaXRlO1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogMTAyNHB4OyBoZWlnaHQ6IDEwMDBweDsgZmxleC1zaHJpbms6IDA7IGJhY2tncm91bmQtY29sb3I6ICNmOGZhZmM7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtpbWdVcmx9XCIgc3R5bGU9XCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvYmplY3QtZml0OiBjb3ZlcjsgZGlzcGxheTogYmxvY2s7XCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDI0cHg7IFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI4MHB4OyBcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsgXG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IFxuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDMycHggNDhweDsgXG4gICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZmZmZGY1IDAlLCAjZmZmOGU3IDMwJSwgI2ZkZWNjOCA3MCUsICNmYmUzYjIgMTAwJSk7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMnB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpLCBpbnNldCAwIC0ycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDNweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7XG4gICAgICAgICAgICAgICAgXCI+XG4gICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUnViaWsnLCAnSGVlYm8nLCAnQXJpYWwnLCBzYW5zLXNlcmlmOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogNDRweDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMmExYTBhOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogcnRsOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS43O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpLCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjA2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAxZW07XG4gICAgICAgICAgICAgICAgICAgICBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGV4dH1cbiAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgY29uc3QgY2FudmFzID0gYXdhaXQgaHRtbDJjYW52YXMoY29udGFpbmVyLCB7IHNjYWxlOiAxLCB1c2VDT1JTOiB0cnVlLCB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTtcbiAgICByZXR1cm4gY2FudmFzO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURvd25sb2FkWklQID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChpc0V4cG9ydGluZyB8fCBnbG9iYWxMb2FkaW5nKSByZXR1cm47XG4gICAgc2V0SXNFeHBvcnRpbmcodHJ1ZSk7XG4gICAgc2V0RXhwb3J0UHJvZ3Jlc3MoJ9ee15vXmdefINeX15HXmdec15QuLi4nKTtcblxuICAgIGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpO1xuICAgIC8vIFVzZSBBNCBmb3Igc3RhbmRhcmQgcHJpbnRpbmcgc3VwcG9ydFxuICAgIGNvbnN0IHBkZiA9IG5ldyBqc1BERigncCcsICdtbScsICdhNCcpO1xuICAgIGNvbnN0IHBhZ2VXaWR0aCA9IDIxMDtcblxuICAgIGNvbnN0IHVwZGF0ZWRQYWdlcyA9IFsuLi5ib29rLnBhZ2VzXTtcbiAgICBjb25zdCBhdWRpb0VuYWJsZWQgPSBib29rLm1ldGFkYXRhLmF1ZGlvQ29uZmlnPy5lbmFibGVkO1xuICAgIGNvbnN0IHZvaWNlTmFtZSA9IGJvb2subWV0YWRhdGEuYXVkaW9Db25maWc/LnZvaWNlTmFtZSB8fCAnUHVjayc7XG5cbiAgICB0cnkge1xuICAgICAgemlwLmZpbGUoXCJzZXF1ZWxfZGF0YS5qc29uXCIsIEpTT04uc3RyaW5naWZ5KGJvb2ssIG51bGwsIDIpKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib29rLnBhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNldEV4cG9ydFByb2dyZXNzKGDXntei15HXkyDXotee15XXkyAke2kgKyAxfS8ke2Jvb2sucGFnZXMubGVuZ3RofS4uLmApO1xuXG4gICAgICAgIGxldCBpbWdVcmwgPSB1cGRhdGVkUGFnZXNbaV0uZ2VuZXJhdGVkSW1hZ2VVcmw7XG4gICAgICAgIGNvbnN0IGlzQ292ZXIgPSBpID09PSAwO1xuXG4gICAgICAgIGlmICghaW1nVXJsKSB7XG4gICAgICAgICAgLy8gR2VuZXJhdGUgb24gZmx5IGlmIG1pc3NpbmcgZHVyaW5nIGV4cG9ydFxuICAgICAgICAgIGxldCByZWZlcmVuY2VJbWFnZSA9IGJvb2subWV0YWRhdGEuYmFzZUNoYXJhY3RlckltYWdlVXJsIHx8IHVwZGF0ZWRQYWdlcy5maW5kKHAgPT4gcC5nZW5lcmF0ZWRJbWFnZVVybCk/LmdlbmVyYXRlZEltYWdlVXJsO1xuICAgICAgICAgIGNvbnN0IHRleHRUb1JlbmRlciA9IGlzQ292ZXIgPyBib29rLm1ldGFkYXRhLnRpdGxlIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgaW1nVXJsID0gYXdhaXQgZ2VuZXJhdGVQYWdlSW1hZ2UoXG4gICAgICAgICAgICB1cGRhdGVkUGFnZXNbaV0uaW1hZ2VQcm9tcHQsXG4gICAgICAgICAgICBmdWxsQ2hhcmFjdGVyRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBib29rLm1ldGFkYXRhLmFydFN0eWxlLFxuICAgICAgICAgICAgcmVmZXJlbmNlSW1hZ2UgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgaXNDb3ZlcixcbiAgICAgICAgICAgIHRleHRUb1JlbmRlclxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGltZ1VybCkge1xuICAgICAgICAgICAgdXBkYXRlZFBhZ2VzW2ldLmdlbmVyYXRlZEltYWdlVXJsID0gaW1nVXJsO1xuICAgICAgICAgICAgaWYgKCFyZWZlcmVuY2VJbWFnZSAmJiAoaSA9PT0gMCB8fCBpID09PSAxKSkgcmVmZXJlbmNlSW1hZ2UgPSBpbWdVcmw7XG4gICAgICAgICAgICBvblVwZGF0ZUJvb2soeyAuLi5ib29rLCBwYWdlczogdXBkYXRlZFBhZ2VzIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbWdVcmwpIHtcbiAgICAgICAgICBjb25zdCBjYW52YXMgPSBhd2FpdCBwcmVwYXJlRXhwb3J0Q2FudmFzKGksIGltZ1VybCk7XG4gICAgICAgICAgY29uc3QgcG5nQmxvYiA9IGF3YWl0IG5ldyBQcm9taXNlPEJsb2IgfCBudWxsPihyZXNvbHZlID0+IGNhbnZhcy50b0Jsb2IocmVzb2x2ZSwgJ2ltYWdlL3BuZycpKTtcbiAgICAgICAgICBpZiAocG5nQmxvYikge1xuICAgICAgICAgICAgemlwLmZpbGUoaSA9PT0gMCA/ICcwMF9DT1ZFUi5wbmcnIDogYFBBR0VfJHtTdHJpbmcoaSkucGFkU3RhcnQoMiwgJzAnKX0ucG5nYCwgcG5nQmxvYik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWRkIHRvIFBERlxuICAgICAgICAgIGNvbnN0IGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9qcGVnJywgMC45KTtcbiAgICAgICAgICBjb25zdCBjYW52YXNSYXRpbyA9IGNhbnZhcy5oZWlnaHQgLyBjYW52YXMud2lkdGg7XG4gICAgICAgICAgY29uc3QgcGRmSW1nSGVpZ2h0ID0gcGFnZVdpZHRoICogY2FudmFzUmF0aW87XG5cbiAgICAgICAgICBsZXQgcmVuZGVyV2lkdGggPSBwYWdlV2lkdGg7XG4gICAgICAgICAgbGV0IHJlbmRlckhlaWdodCA9IHBkZkltZ0hlaWdodDtcbiAgICAgICAgICBpZiAocmVuZGVySGVpZ2h0ID4gMjk3KSB7XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IDI5NyAvIHJlbmRlckhlaWdodDtcbiAgICAgICAgICAgIHJlbmRlckhlaWdodCA9IDI5NztcbiAgICAgICAgICAgIHJlbmRlcldpZHRoID0gcGFnZVdpZHRoICogc2NhbGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSAoMjEwIC0gcmVuZGVyV2lkdGgpIC8gMjtcblxuICAgICAgICAgIHBkZi5hZGRJbWFnZShpbWdEYXRhLCAnSlBFRycsIHhPZmZzZXQsIDAsIHJlbmRlcldpZHRoLCByZW5kZXJIZWlnaHQpO1xuXG4gICAgICAgICAgaWYgKGkgPCBib29rLnBhZ2VzLmxlbmd0aCAtIDEpIHBkZi5hZGRQYWdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXVkaW9FbmFibGVkKSB7XG4gICAgICAgICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCkgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dCkoeyBzYW1wbGVSYXRlOiAyNDAwMCB9KTtcbiAgICAgICAgICBjb25zdCBidWYgPSBhd2FpdCBnZW5lcmF0ZVBhZ2VBdWRpbyhpID09PSAwID8gYm9vay5tZXRhZGF0YS50aXRsZSA6IGJvb2sucGFnZXNbaV0uaGVicmV3VGV4dCwgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQsIHZvaWNlTmFtZSk7XG4gICAgICAgICAgaWYgKGJ1ZikgemlwLmZpbGUoaSA9PT0gMCA/ICcwMF9BVURJT19UaXRsZS53YXYnIDogYEFVRElPX1BhZ2VfJHtTdHJpbmcoaSkucGFkU3RhcnQoMiwgJzAnKX0ud2F2YCwgYXVkaW9CdWZmZXJUb1dhdihidWYpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwZGZCbG9iID0gcGRmLm91dHB1dCgnYmxvYicpO1xuICAgICAgemlwLmZpbGUoYCR7Ym9vay5tZXRhZGF0YS50aXRsZX0ucGRmYCwgcGRmQmxvYik7XG5cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB6aXAuZ2VuZXJhdGVBc3luYyh7IHR5cGU6ICdibG9iJyB9KTtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGNvbnRlbnQpO1xuICAgICAgLy8gQ2xlYW4gZmlsZW5hbWUsIGp1c3QgdGhlIGJvb2sgdGl0bGVcbiAgICAgIGNvbnN0IHNhZmVUaXRsZSA9IGJvb2subWV0YWRhdGEudGl0bGUucmVwbGFjZSgvW1xcXFwvOio/XCI8PnxdL2csICdfJyk7XG4gICAgICBsaW5rLmRvd25sb2FkID0gYCR7c2FmZVRpdGxlfS56aXBgO1xuICAgICAgbGluay5jbGljaygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXhwb3J0IGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgYWxlcnQoXCLXlNeZ15nXpteV15Ag16DXm9ep15wuXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0V4cG9ydGluZyhmYWxzZSk7XG4gICAgICBzZXRFeHBvcnRQcm9ncmVzcygnJyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctc2xhdGUtOTAwIHRleHQtc2xhdGUtMTAwIGZsZXggZmxleC1jb2xcIj5cbiAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwiYmctc2xhdGUtODAwIGJvcmRlci1iIGJvcmRlci1zbGF0ZS03MDAgc3RpY2t5IHRvcC0wIHotNTAgc2hhZG93LW1kXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBweS00IGZsZXggZmxleC1jb2wgc206ZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBnYXAtNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTRcIj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25CYWNrfSBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzXCI+4oaQINeX15bXqNeUPC9idXR0b24+XG4gICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC13aGl0ZSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPuKcj++4jyDXodeY15XXk9eZ15Ug15zXoteo15nXm9eUOiA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWtpZC1ibHVlXCI+e2Jvb2subWV0YWRhdGEudGl0bGV9PC9zcGFuPjwvaDE+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zbGF0ZS00MDAgbXItMiBoaWRkZW4gc206YmxvY2tcIj57c2VsZWN0ZWRQYWdlcy5zaXplfSDXoNeR15fXqNeVPC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkWklQfSBkaXNhYmxlZD17aXNFeHBvcnRpbmcgfHwgZ2xvYmFsTG9hZGluZ30gY2xhc3NOYW1lPVwiYmcta2lkLW9yYW5nZSBob3ZlcjpiZy1vcmFuZ2UtNjAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWxnIHRleHQtc20gdHJhbnNpdGlvbi1hbGwgc2hhZG93LW1kIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGRpc2FibGVkOm9wYWNpdHktNTBcIj5cbiAgICAgICAgICAgICAge2lzRXhwb3J0aW5nID8gPHNwYW4gY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluXCI+4o+zPC9zcGFuPiA6ICfwn5OmJ30g15TXldeo15MgWklQXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmVnZW5lcmF0ZVNlbGVjdGVkfSBkaXNhYmxlZD17c2VsZWN0ZWRQYWdlcy5zaXplID09PSAwIHx8IGdsb2JhbExvYWRpbmd9IGNsYXNzTmFtZT1cImJnLWtpZC1ibHVlLzIwIGhvdmVyOmJnLWtpZC1ibHVlLzQwIHRleHQta2lkLWJsdWUgYm9yZGVyIGJvcmRlci1raWQtYmx1ZS81MCBmb250LWJvbGQgcHktMiBweC00IHJvdW5kZWQtbGcgdGV4dC1zbSB0cmFuc2l0aW9uLWFsbCBkaXNhYmxlZDpvcGFjaXR5LTMwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICB7Z2xvYmFsTG9hZGluZyA/IDxzcGFuIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpblwiPuKPszwvc3Bhbj4gOiAn4pqhJ30g16bXldeoINeq157Xldeg15XXqiDXnNeg15HXl9eo15nXnVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uUHJldmlld30gY2xhc3NOYW1lPVwiYmcta2lkLXllbGxvdyBob3ZlcjpiZy15ZWxsb3ctNDAwIHRleHQtc2xhdGUtOTAwIGZvbnQtYm9sZCBweS0yIHB4LTYgcm91bmRlZC1sZyB0ZXh0LXNtIHRyYW5zaXRpb24tYWxsIHNoYWRvdy1sZyB0cmFuc2Zvcm0gaG92ZXI6LXRyYW5zbGF0ZS15LTAuNSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8c3Bhbj7wn5OWPC9zcGFuPiDXoteR15XXqCDXnNen16jXmdeQ15RcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvaGVhZGVyPlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1hdXRvIHAtNCBzbTpwLThcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy03eGwgbXgtYXV0b1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTZcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS0zMDBcIj7XnNeV15cg15TXotee15XXk9eZ1508L2gyPlxuICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtzZWxlY3RBbGx9IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC13aGl0ZSB1bmRlcmxpbmVcIj57c2VsZWN0ZWRQYWdlcy5zaXplID09PSBib29rLnBhZ2VzLmxlbmd0aCA/ICfXkdeY15wg15HXl9eZ16jXlCcgOiAn15HXl9eoINeU15vXnCd9PC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgeGw6Z3JpZC1jb2xzLTQgZ2FwLTZcIj5cbiAgICAgICAgICAgIHtib29rLnBhZ2VzLm1hcCgocGFnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e2ByZWxhdGl2ZSBiZy1zbGF0ZS04MDAgcm91bmRlZC14bCBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyLTIgdHJhbnNpdGlvbi1hbGwgZ3JvdXAgJHtzZWxlY3RlZFBhZ2VzLmhhcyhpbmRleCkgPyAnYm9yZGVyLWtpZC1ibHVlIHNoYWRvdy1bMF8wXzE1cHhfcmdiYSg2NCwyMjQsMjA4LDAuMyldJyA6ICdib3JkZXItc2xhdGUtNzAwIGhvdmVyOmJvcmRlci1zbGF0ZS02MDAnfWB9IG9uQ2xpY2s9eygpID0+IHRvZ2dsZVNlbGVjdGlvbihpbmRleCl9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTMgbGVmdC0zIHotMjBcIj5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXtzZWxlY3RlZFBhZ2VzLmhhcyhpbmRleCl9IG9uQ2hhbmdlPXsoKSA9PiB7IH19IGNsYXNzTmFtZT1cInctNSBoLTUgcm91bmRlZCBib3JkZXItc2xhdGUtNTAwIGJnLXNsYXRlLTcwMCBjaGVja2VkOmJnLWtpZC1ibHVlIGN1cnNvci1wb2ludGVyXCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXNwZWN0LXNxdWFyZSBiZy1zbGF0ZS05MDAgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgIHtwYWdlLmdlbmVyYXRlZEltYWdlVXJsID8gKFxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17cGFnZS5nZW5lcmF0ZWRJbWFnZVVybH0gYWx0PXtgUGFnZSAke2luZGV4fWB9IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvdmVyXCIgLz5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXNsYXRlLTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtNHhsIG1iLTJcIj7wn5a877iPPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpc1JlZ2VuZXJhdGluZy5oYXMoaW5kZXgpID8gJ9ee15nXmdem16gg16rXnteV16DXlC4uLicgOiAn157Xnteq15nXnyDXnNeZ16bXmdeo15QuLi4nfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICB7aXNSZWdlbmVyYXRpbmcuaGFzKGluZGV4KSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1zbGF0ZS05MDAvODAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei0xMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCBib3JkZXItMiBib3JkZXIta2lkLWJsdWUgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgcC0yIGJnLWdyYWRpZW50LXRvLXQgZnJvbS1ibGFjay84MCB0by10cmFuc3BhcmVudCBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IGZsZXgganVzdGlmeS1lbmQgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBoYW5kbGVTaW5nbGVSZWdlbmVyYXRlKGluZGV4KTsgfX0gY2xhc3NOYW1lPVwicC0yIGJnLXdoaXRlLzEwIGhvdmVyOmJnLXdoaXRlLzMwIHJvdW5kZWQtZnVsbCB0ZXh0LXdoaXRlIGJhY2tkcm9wLWJsdXItc21cIiB0aXRsZT1cIlJlZ2VuZXJhdGUgdGhpcyBwYWdlXCI+8J+UhDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTMgcmlnaHQtMyBiZy1ibGFjay81MCBiYWNrZHJvcC1ibHVyIHRleHQtd2hpdGUgdGV4dC14cyBmb250LWJvbGQgcHgtMiBweS0xIHJvdW5kZWRcIj57aW5kZXggPT09IDAgPyAn15vXqNeZ15vXlCcgOiBg16LXnteV15MgJHtwYWdlLnBhZ2VOdW1iZXJ9YH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IHNwYWNlLXktM1wiIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfT5cbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHRyYWNraW5nLXdpZGVyIG1iLTEgYmxvY2tcIj7XlNeg15fXmdeUINec15HXmdeg15Qg157XnNeQ15vXldeq15nXqiAoUFJPTVBUKTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17cGFnZS5pbWFnZVByb21wdH0gb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVQcm9tcHRDaGFuZ2UoaW5kZXgsIGUudGFyZ2V0LnZhbHVlKX0gY2xhc3NOYW1lPVwidy1mdWxsIGJnLXNsYXRlLTkwMCBib3JkZXIgYm9yZGVyLXNsYXRlLTcwMCByb3VuZGVkLWxnIHAtMiB0ZXh0LXhzIHRleHQtc2xhdGUtMzAwIGZvY3VzOmJvcmRlci1raWQtYmx1ZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1raWQtYmx1ZSBvdXRsaW5lLW5vbmUgcmVzaXplLW5vbmUgaC0yNCBzY3JvbGxiYXItdGhpblwiIHBsYWNlaG9sZGVyPVwi16rXkNeoINeQ16og15TXodem16DXlCDXkdeQ16DXktec15nXqi4uLlwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHRyYWNraW5nLXdpZGVyIG1iLTEgYmxvY2tcIj7XmNen16HXmCDXkdei15HXqNeZ16o8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2xhdGUtNDAwIGxpbmUtY2xhbXAtMlwiIGRpcj1cInJ0bFwiPntpbmRleCA9PT0gMCA/IGJvb2subWV0YWRhdGEudGl0bGUgOiBwYWdlLmhlYnJld1RleHR9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtpc0V4cG9ydGluZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVsxMDBdIGJnLXNsYXRlLTkwMC85MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgYm9yZGVyLTQgYm9yZGVyLWtpZC1ibHVlIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW4gbXgtYXV0byBtYi02XCI+PC9kaXY+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIGZvbnQtZnJlZG9rYVwiPntleHBvcnRQcm9ncmVzc308L2gzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCb29rRWRpdG9yO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiZ2VuZXJhdGVQYWdlSW1hZ2UiLCJnZW5lcmF0ZVBhZ2VBdWRpbyIsImh0bWwyY2FudmFzIiwianNQREYiLCJKU1ppcCIsImF1ZGlvQnVmZmVyVG9XYXYiLCJidWZmZXIiLCJudW1DaGFubmVscyIsIm51bWJlck9mQ2hhbm5lbHMiLCJzYW1wbGVSYXRlIiwiZm9ybWF0IiwiYml0RGVwdGgiLCJieXRlc1BlclNhbXBsZSIsImJsb2NrQWxpZ24iLCJkYXRhQnl0ZUNvdW50IiwibGVuZ3RoIiwiaGVhZGVyQnl0ZUNvdW50IiwidG90YWxCeXRlQ291bnQiLCJoZWFkZXJCdWZmZXIiLCJBcnJheUJ1ZmZlciIsInZpZXciLCJEYXRhVmlldyIsIndyaXRlU3RyaW5nIiwib2Zmc2V0Iiwic3RyaW5nIiwiaSIsInNldFVpbnQ4IiwiY2hhckNvZGVBdCIsInNldFVpbnQzMiIsInNldFVpbnQxNiIsImRhdGFCdWZmZXIiLCJkYXRhVmlldyIsImNoYW5uZWwiLCJzYW1wbGUiLCJnZXRDaGFubmVsRGF0YSIsInMiLCJNYXRoIiwibWF4IiwibWluIiwiaW50MTYiLCJzZXRJbnQxNiIsIkJsb2IiLCJ0eXBlIiwiQm9va0VkaXRvciIsImJvb2siLCJvblVwZGF0ZUJvb2siLCJvblByZXZpZXciLCJvbkJhY2siLCJzZWxlY3RlZFBhZ2VzIiwic2V0U2VsZWN0ZWRQYWdlcyIsIlNldCIsImlzUmVnZW5lcmF0aW5nIiwic2V0SXNSZWdlbmVyYXRpbmciLCJnbG9iYWxMb2FkaW5nIiwic2V0R2xvYmFsTG9hZGluZyIsImlzRXhwb3J0aW5nIiwic2V0SXNFeHBvcnRpbmciLCJleHBvcnRQcm9ncmVzcyIsInNldEV4cG9ydFByb2dyZXNzIiwiYXVkaW9Db250ZXh0UmVmIiwiZnVsbENoYXJhY3RlckRlc2NyaXB0aW9uIiwiZGVzYyIsIm1ldGFkYXRhIiwibWFpbkNoYXJhY3RlckRlc2NyaXB0aW9uIiwibWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyayIsInNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uIiwic2Vjb25kYXJ5Q2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrIiwidG9nZ2xlU2VsZWN0aW9uIiwiaW5kZXgiLCJuZXdTZXQiLCJoYXMiLCJkZWxldGUiLCJhZGQiLCJzZWxlY3RBbGwiLCJzaXplIiwicGFnZXMiLCJtYXAiLCJfIiwiaGFuZGxlUHJvbXB0Q2hhbmdlIiwibmV3UHJvbXB0IiwibmV3UGFnZXMiLCJpbWFnZVByb21wdCIsImdlbmVyYXRlSW1hZ2VzRm9ySW5kaWNlcyIsImluZGljZXMiLCJuZXdSZWdlbmVyYXRpbmciLCJmb3JFYWNoIiwid29ya2luZ1BhZ2VzIiwicmVmZXJlbmNlSW1hZ2UiLCJiYXNlQ2hhcmFjdGVySW1hZ2VVcmwiLCJmaW5kIiwicCIsImdlbmVyYXRlZEltYWdlVXJsIiwiaXNDb3ZlciIsInRleHRUb1JlbmRlciIsInRpdGxlIiwidW5kZWZpbmVkIiwidXJsIiwiYXJ0U3R5bGUiLCJlcnJvciIsImNvbnNvbGUiLCJwcmV2IiwibmV4dCIsImhhbmRsZVJlZ2VuZXJhdGVTZWxlY3RlZCIsIkFycmF5IiwiZnJvbSIsImhhbmRsZVNpbmdsZVJlZ2VuZXJhdGUiLCJtaXNzaW5nSW5kaWNlcyIsInBhZ2UiLCJmaWx0ZXIiLCJsb2ciLCJwcmVwYXJlRXhwb3J0Q2FudmFzIiwiaW1nVXJsIiwid2lkdGgiLCJoZWlnaHQiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwibGVmdCIsImJhY2tncm91bmRDb2xvciIsIm92ZXJmbG93IiwiaW5uZXJIVE1MIiwidGV4dCIsImhlYnJld1RleHQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJjYW52YXMiLCJzY2FsZSIsInVzZUNPUlMiLCJyZW1vdmVDaGlsZCIsImhhbmRsZURvd25sb2FkWklQIiwiemlwIiwicGRmIiwicGFnZVdpZHRoIiwidXBkYXRlZFBhZ2VzIiwiYXVkaW9FbmFibGVkIiwiYXVkaW9Db25maWciLCJlbmFibGVkIiwidm9pY2VOYW1lIiwiZmlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwbmdCbG9iIiwidG9CbG9iIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJpbWdEYXRhIiwidG9EYXRhVVJMIiwiY2FudmFzUmF0aW8iLCJwZGZJbWdIZWlnaHQiLCJyZW5kZXJXaWR0aCIsInJlbmRlckhlaWdodCIsInhPZmZzZXQiLCJhZGRJbWFnZSIsImFkZFBhZ2UiLCJjdXJyZW50Iiwid2luZG93IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiYnVmIiwicGRmQmxvYiIsIm91dHB1dCIsImNvbnRlbnQiLCJnZW5lcmF0ZUFzeW5jIiwibGluayIsImhyZWYiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJzYWZlVGl0bGUiLCJyZXBsYWNlIiwiZG93bmxvYWQiLCJjbGljayIsImFsZXJ0IiwiZGl2IiwiY2xhc3NOYW1lIiwiaGVhZGVyIiwiYnV0dG9uIiwib25DbGljayIsImgxIiwic3BhbiIsImRpc2FibGVkIiwiaDIiLCJpbnB1dCIsImNoZWNrZWQiLCJvbkNoYW5nZSIsImltZyIsInNyYyIsImFsdCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJwYWdlTnVtYmVyIiwibGFiZWwiLCJ0ZXh0YXJlYSIsInZhbHVlIiwidGFyZ2V0IiwicGxhY2Vob2xkZXIiLCJkaXIiLCJoMyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./components/BookEditor.tsx\n");

/***/ }),

/***/ "(ssr)/./components/BookViewer.tsx":
/*!***********************************!*\
  !*** ./components/BookViewer.tsx ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/geminiService */ \"(ssr)/./services/geminiService.ts\");\n/* harmony import */ var _components_DriveConnectButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/DriveConnectButton */ \"(ssr)/./components/DriveConnectButton.tsx\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! html2canvas */ \"(ssr)/./node_modules/html2canvas/dist/html2canvas.esm.js\");\n/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jspdf */ \"(ssr)/./node_modules/jspdf/dist/jspdf.es.min.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jszip */ \"(ssr)/./node_modules/jszip/lib/index.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_6__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n// Helper to convert AudioBuffer to WAV Blob\nfunction audioBufferToWav(buffer) {\n    const numChannels = buffer.numberOfChannels;\n    const sampleRate = buffer.sampleRate;\n    const format = 1; // PCM\n    const bitDepth = 16;\n    const bytesPerSample = bitDepth / 8;\n    const blockAlign = numChannels * bytesPerSample;\n    const dataByteCount = buffer.length * blockAlign;\n    const headerByteCount = 44;\n    const totalByteCount = headerByteCount + dataByteCount;\n    const headerBuffer = new ArrayBuffer(headerByteCount);\n    const view = new DataView(headerBuffer);\n    const writeString = (view, offset, string)=>{\n        for(let i = 0; i < string.length; i++){\n            view.setUint8(offset + i, string.charCodeAt(i));\n        }\n    };\n    writeString(view, 0, 'RIFF');\n    view.setUint32(4, totalByteCount - 8, true);\n    writeString(view, 8, 'WAVE');\n    writeString(view, 12, 'fmt ');\n    view.setUint32(16, 16, true);\n    view.setUint16(20, format, true);\n    view.setUint16(22, numChannels, true);\n    view.setUint32(24, sampleRate, true);\n    view.setUint32(28, sampleRate * blockAlign, true);\n    view.setUint16(32, blockAlign, true);\n    view.setUint16(34, bitDepth, true);\n    writeString(view, 36, 'data');\n    view.setUint32(40, dataByteCount, true);\n    const dataBuffer = new ArrayBuffer(dataByteCount);\n    const dataView = new DataView(dataBuffer);\n    let offset = 0;\n    for(let i = 0; i < buffer.length; i++){\n        for(let channel = 0; channel < numChannels; channel++){\n            const sample = buffer.getChannelData(channel)[i];\n            const s = Math.max(-1, Math.min(1, sample));\n            const int16 = s < 0 ? s * 0x8000 : s * 0x7FFF;\n            dataView.setInt16(offset, int16, true);\n            offset += 2;\n        }\n    }\n    return new Blob([\n        headerBuffer,\n        dataBuffer\n    ], {\n        type: 'audio/wav'\n    });\n}\nconst BookViewer = ({ book, onUpdateBook, onClose })=>{\n    const [currentPageIndex, setCurrentPageIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const bookRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(book);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BookViewer.useEffect\": ()=>{\n            bookRef.current = book;\n        }\n    }[\"BookViewer.useEffect\"], [\n        book\n    ]);\n    const [images, setImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        \"BookViewer.useState\": ()=>{\n            const initialImages = {};\n            book.pages.forEach({\n                \"BookViewer.useState\": (page, index)=>{\n                    if (page.generatedImageUrl) {\n                        initialImages[index] = page.generatedImageUrl;\n                    }\n                }\n            }[\"BookViewer.useState\"]);\n            return initialImages;\n        }\n    }[\"BookViewer.useState\"]);\n    const [loadingImages, setLoadingImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [sessionReferenceImage, setSessionReferenceImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(book.metadata.baseCharacterImageUrl || book.pages.find({\n        \"BookViewer.useState\": (p)=>p.generatedImageUrl\n    }[\"BookViewer.useState\"])?.generatedImageUrl || null);\n    const [isExporting, setIsExporting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [exportProgress, setExportProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoadingAudio, setIsLoadingAudio] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [audioError, setAudioError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [audioBuffers, setAudioBuffers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioSourceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentPage = book.pages[currentPageIndex];\n    const totalPages = book.pages.length;\n    const audioEnabled = book.metadata.audioConfig?.enabled ?? true;\n    const voiceName = book.metadata.audioConfig?.voiceName || 'Puck';\n    const fullCharacterDescription = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"BookViewer.useMemo[fullCharacterDescription]\": ()=>{\n            let desc = `Main Character: ${book.metadata.mainCharacterDescription}.`;\n            if (book.metadata.mainCharacterDistinctiveMark) {\n                desc += ` DISTINCTIVE FEATURE: ${book.metadata.mainCharacterDistinctiveMark} (Must appear in every image).`;\n            }\n            if (book.metadata.secondaryCharacterDescription) {\n                desc += `\\nSecondary Character (Sidekick): ${book.metadata.secondaryCharacterDescription} (This appearance MUST be consistent across all pages).`;\n                if (book.metadata.secondaryCharacterDistinctiveMark) {\n                    desc += ` DISTINCTIVE FEATURE: ${book.metadata.secondaryCharacterDistinctiveMark}.`;\n                }\n            }\n            return desc;\n        }\n    }[\"BookViewer.useMemo[fullCharacterDescription]\"], [\n        book.metadata\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BookViewer.useEffect\": ()=>{\n            return ({\n                \"BookViewer.useEffect\": ()=>{\n                    stopAudio();\n                    if (audioContextRef.current) {\n                        audioContextRef.current.close();\n                    }\n                }\n            })[\"BookViewer.useEffect\"];\n        }\n    }[\"BookViewer.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BookViewer.useEffect\": ()=>{\n            stopAudio();\n            setAudioError(null);\n        }\n    }[\"BookViewer.useEffect\"], [\n        currentPageIndex\n    ]);\n    const stopAudio = ()=>{\n        if (audioSourceRef.current) {\n            try {\n                audioSourceRef.current.stop();\n            } catch (e) {}\n            audioSourceRef.current = null;\n        }\n        setIsPlaying(false);\n    };\n    const handleChangeKey = ()=>{\n        const aistudio = window.aistudio;\n        if (aistudio) aistudio.openSelectKey();\n    };\n    const handleToggleAudio = async ()=>{\n        if (!audioEnabled) return;\n        if (isPlaying) {\n            stopAudio();\n            return;\n        }\n        setAudioError(null);\n        if (!audioContextRef.current) {\n            audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)({\n                sampleRate: 24000\n            });\n        }\n        if (audioContextRef.current.state === 'suspended') {\n            await audioContextRef.current.resume();\n        }\n        const ctx = audioContextRef.current;\n        if (audioBuffers[currentPageIndex]) {\n            playBuffer(audioBuffers[currentPageIndex], ctx);\n            return;\n        }\n        setIsLoadingAudio(true);\n        try {\n            const textToRead = currentPageIndex === 0 ? book.metadata.title : currentPage.hebrewText;\n            const buffer = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageAudio)(textToRead, ctx, voiceName);\n            if (buffer) {\n                setAudioBuffers((prev)=>({\n                        ...prev,\n                        [currentPageIndex]: buffer\n                    }));\n                playBuffer(buffer, ctx);\n            } else {\n                setAudioError(\"  \");\n            }\n        } catch (e) {\n            console.error(e);\n            setAudioError(\" \");\n        } finally{\n            setIsLoadingAudio(false);\n        }\n    };\n    const playBuffer = (buffer, ctx)=>{\n        const source = ctx.createBufferSource();\n        source.buffer = buffer;\n        source.connect(ctx.destination);\n        source.onended = ()=>setIsPlaying(false);\n        audioSourceRef.current = source;\n        source.start();\n        setIsPlaying(true);\n    };\n    const handleNext = ()=>{\n        if (currentPageIndex < totalPages - 1) setCurrentPageIndex((prev)=>prev + 1);\n    };\n    const handlePrev = ()=>{\n        if (currentPageIndex > 0) setCurrentPageIndex((prev)=>prev - 1);\n    };\n    const updateBookState = (index, url)=>{\n        const currentBookState = bookRef.current;\n        const updatedPages = [\n            ...currentBookState.pages\n        ];\n        updatedPages[index] = {\n            ...updatedPages[index],\n            generatedImageUrl: url\n        };\n        const updatedBook = {\n            ...currentBookState,\n            pages: updatedPages\n        };\n        onUpdateBook(updatedBook);\n    };\n    const loadImage = async (pageIndex, actionPrompt)=>{\n        if (images[pageIndex] || loadingImages[pageIndex]) return;\n        if (bookRef.current.pages[pageIndex].generatedImageUrl) {\n            setImages((prev)=>({\n                    ...prev,\n                    [pageIndex]: bookRef.current.pages[pageIndex].generatedImageUrl\n                }));\n            return;\n        }\n        setLoadingImages((prev)=>({\n                ...prev,\n                [pageIndex]: true\n            }));\n        try {\n            const referenceToUse = bookRef.current.metadata.baseCharacterImageUrl || sessionReferenceImage;\n            const isCover = pageIndex === 0;\n            const textToRender = isCover ? bookRef.current.metadata.title : undefined;\n            const url = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageImage)(actionPrompt, fullCharacterDescription, bookRef.current.metadata.artStyle, referenceToUse || undefined, isCover, textToRender);\n            if (url) {\n                setImages((prev)=>({\n                        ...prev,\n                        [pageIndex]: url\n                    }));\n                if (!referenceToUse && !sessionReferenceImage) {\n                    setSessionReferenceImage(url);\n                }\n                updateBookState(pageIndex, url);\n            }\n            return url;\n        } catch (err) {\n            console.error(\"Failed to load page image:\", err);\n            return null;\n        } finally{\n            setLoadingImages((prev)=>({\n                    ...prev,\n                    [pageIndex]: false\n                }));\n        }\n    };\n    const handleRegenerateImage = async (e)=>{\n        e.stopPropagation();\n        const pageIndex = currentPageIndex;\n        if (loadingImages[pageIndex]) return;\n        setLoadingImages((prev)=>({\n                ...prev,\n                [pageIndex]: true\n            }));\n        try {\n            const referenceToUse = bookRef.current.metadata.baseCharacterImageUrl || sessionReferenceImage;\n            const isCover = pageIndex === 0;\n            const textToRender = isCover ? bookRef.current.metadata.title : undefined;\n            const url = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageImage)(bookRef.current.pages[pageIndex].imagePrompt, fullCharacterDescription, bookRef.current.metadata.artStyle, referenceToUse || undefined, isCover, textToRender);\n            if (url) {\n                setImages((prev)=>({\n                        ...prev,\n                        [pageIndex]: url\n                    }));\n                if (pageIndex === 0 && !bookRef.current.metadata.baseCharacterImageUrl) {\n                    setSessionReferenceImage(url);\n                }\n                updateBookState(pageIndex, url);\n            }\n        } catch (error) {\n            console.error(\"Regeneration failed\", error);\n            alert(\"   \");\n        } finally{\n            setLoadingImages((prev)=>({\n                    ...prev,\n                    [pageIndex]: false\n                }));\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BookViewer.useEffect\": ()=>{\n            const page = book.pages[currentPageIndex];\n            if (page && !images[currentPageIndex]) {\n                loadImage(currentPageIndex, page.imagePrompt);\n            }\n        }\n    }[\"BookViewer.useEffect\"], [\n        currentPageIndex\n    ]);\n    const prepareExportCanvas = async (i, imgUrl)=>{\n        const isCover = i === 0;\n        // EXPORT LAYOUT STRATEGY:\n        // Cover: 1024x1024 Square (Image contains title, no extra text area)\n        // Inner: 1024x1280 (1024x1024 Image Top + 1024x256 Text Area Bottom)\n        const width = 1024;\n        const height = isCover ? 1024 : 1280;\n        const container = document.createElement('div');\n        container.style.width = `${width}px`;\n        container.style.height = `${height}px`;\n        container.style.position = 'absolute';\n        container.style.left = '-9999px';\n        container.style.backgroundColor = '#ffffff';\n        container.style.overflow = 'hidden';\n        if (isCover) {\n            // Cover is simple full image\n            container.innerHTML = `<img src=\"${imgUrl}\" style=\"width: 1024px; height: 1024px; object-fit: cover;\" />`;\n        } else {\n            // Inner pages: Vertical Stack. Image Top, Text Bottom.\n            const text = book.pages[i].hebrewText || \"\";\n            // Improved text styling matching globals.css updates\n            container.innerHTML = `\n            <div style=\"display: flex; flex-direction: column; width: 1024px; height: 1280px; background: white;\">\n                <div style=\"width: 1024px; height: 1000px; flex-shrink: 0; background-color: #f8fafc;\">\n                    <img src=\"${imgUrl}\" style=\"width: 100%; height: 100%; object-fit: cover; display: block;\" />\n                </div>\n                <div style=\"\n                    width: 1024px; \n                    height: 280px; \n                    display: flex; \n                    align-items: center; \n                    justify-content: center; \n                    padding: 32px 48px; \n                    box-sizing: border-box; \n                    background: linear-gradient(to bottom, #fffdf5 0%, #fff8e7 30%, #fdecc8 70%, #fbe3b2 100%);\n                    box-shadow: inset 0 2px 0 rgba(255, 255, 255, 0.8), inset 0 -2px 8px rgba(0, 0, 0, 0.05);\n                    border-top: 3px solid rgba(255, 255, 255, 0.9);\n                \">\n                     <p style=\"\n                        margin: 0; \n                        font-family: 'Rubik', 'Heebo', 'Arial', sans-serif; \n                        font-size: 44px; \n                        font-weight: 600; \n                        color: #2a1a0a; \n                        direction: rtl; \n                        text-align: center; \n                        line-height: 1.7;\n                        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8), 0 2px 4px rgba(0, 0, 0, 0.06);\n                        letter-spacing: 0.01em;\n                     \">\n                        ${text}\n                     </p>\n                </div>\n            </div>\n        `;\n        }\n        document.body.appendChild(container);\n        await new Promise((resolve)=>setTimeout(resolve, 500));\n        const canvas = await (0,html2canvas__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(container, {\n            scale: 1,\n            useCORS: true,\n            width,\n            height\n        });\n        document.body.removeChild(container);\n        return canvas;\n    };\n    const handleDownloadZIP = async ()=>{\n        if (isExporting) return;\n        setIsExporting(true);\n        setExportProgress('  ...');\n        const zip = new (jszip__WEBPACK_IMPORTED_MODULE_6___default())();\n        // A4 Portrait for standardized printing\n        const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_5__.jsPDF('p', 'mm', 'a4');\n        const pageWidth = 210;\n        try {\n            zip.file(\"sequel_data.json\", JSON.stringify(bookRef.current, null, 2));\n            for(let i = 0; i < book.pages.length; i++){\n                setExportProgress(`  ${i + 1}  ${book.pages.length}...`);\n                let imgUrl = images[i];\n                const isCover = i === 0;\n                if (!imgUrl) {\n                    const referenceToUse = bookRef.current.metadata.baseCharacterImageUrl || sessionReferenceImage;\n                    const textToRender = isCover ? bookRef.current.metadata.title || '' : undefined;\n                    imgUrl = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageImage)(book.pages[i].imagePrompt, fullCharacterDescription, book.metadata.artStyle, referenceToUse || undefined, isCover, textToRender);\n                    if (imgUrl) {\n                        setImages((prev)=>({\n                                ...prev,\n                                [i]: imgUrl\n                            }));\n                        if (!referenceToUse && !sessionReferenceImage) setSessionReferenceImage(imgUrl);\n                        updateBookState(i, imgUrl); // Sync!\n                    }\n                }\n                if (imgUrl) {\n                    const canvas = await prepareExportCanvas(i, imgUrl);\n                    const pngBlob = await new Promise((resolve)=>canvas.toBlob(resolve, 'image/png'));\n                    if (pngBlob) zip.file(i === 0 ? '00_COVER.png' : `PAGE_${String(i).padStart(2, '0')}.png`, pngBlob);\n                    const imgData = canvas.toDataURL('image/jpeg', 0.9);\n                    // PDF Layout\n                    const canvasRatio = canvas.height / canvas.width;\n                    const pdfImgHeight = pageWidth * canvasRatio;\n                    // If height exceeds A4 (297mm), scale down to fit\n                    let renderWidth = pageWidth;\n                    let renderHeight = pdfImgHeight;\n                    if (renderHeight > 297) {\n                        const scale = 297 / renderHeight;\n                        renderHeight = 297;\n                        renderWidth = pageWidth * scale;\n                    }\n                    const xOffset = (210 - renderWidth) / 2;\n                    pdf.addImage(imgData, 'JPEG', xOffset, 0, renderWidth, renderHeight);\n                    if (i < book.pages.length - 1) pdf.addPage();\n                }\n                if (audioEnabled) {\n                    let audioBuf = audioBuffers[i];\n                    if (!audioBuf) {\n                        if (!audioContextRef.current) audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)({\n                            sampleRate: 24000\n                        });\n                        const buf = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageAudio)(i === 0 ? book.metadata.title : book.pages[i].hebrewText, audioContextRef.current, voiceName);\n                        if (buf) {\n                            audioBuf = buf;\n                            setAudioBuffers((prev)=>({\n                                    ...prev,\n                                    [i]: buf\n                                }));\n                        }\n                    }\n                    if (audioBuf) zip.file(i === 0 ? '00_AUDIO_Title.wav' : `AUDIO_Page_${String(i).padStart(2, '0')}.wav`, audioBufferToWav(audioBuf));\n                }\n            }\n            const pdfBlob = pdf.output('blob');\n            zip.file(`${book.metadata.title}.pdf`, pdfBlob);\n            const content = await zip.generateAsync({\n                type: 'blob'\n            });\n            // Upload to Google Drive if connected\n            let driveLinks = null;\n            try {\n                const { hasDriveAccess, uploadBookToDrive } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/services/googleDrive */ \"(ssr)/./services/googleDrive.ts\"));\n                if (hasDriveAccess()) {\n                    setExportProgress(' -Google Drive...');\n                    driveLinks = await uploadBookToDrive(content, pdfBlob, book.metadata.title);\n                }\n            } catch (driveError) {\n                console.warn('Drive upload failed:', driveError);\n            }\n            // Save to Firestore WITH Drive links\n            setExportProgress(' ...');\n            try {\n                const { saveBookPrompts } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/services/firebase */ \"(ssr)/./services/firebase.ts\"));\n                await saveBookPrompts({\n                    bookTitle: book.metadata.title,\n                    mainCharacter: book.metadata.mainCharacterDescription || '',\n                    artStyle: book.metadata.artStyle,\n                    topic: book.metadata.mainTheme || '',\n                    imagePrompts: book.pages.map((p)=>p.imagePrompt),\n                    driveZipUrl: driveLinks?.zipLink,\n                    drivePdfUrl: driveLinks?.pdfLink\n                });\n                console.log('Book saved to Firestore with Drive links!');\n            } catch (firebaseError) {\n                console.warn('Firestore save failed:', firebaseError);\n            }\n            // Download locally\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(content);\n            const safeTitle = book.metadata.title.replace(/[\\\\/:*?\"<>|]/g, '_');\n            link.download = `${safeTitle}.zip`;\n            link.click();\n            // Show Drive links if uploaded\n            if (driveLinks) {\n                setTimeout(()=>{\n                    const showLinks = confirm(`  -Google Drive!\\n\\n ?`);\n                    if (showLinks) {\n                        alert(` ZIP: ${driveLinks.zipLink}\\n\\n PDF: ${driveLinks.pdfLink}`);\n                    }\n                }, 500);\n            }\n        } catch (error) {\n            console.error(\"Export failed:\", error);\n            alert(\" .   .\");\n        } finally{\n            setIsExporting(false);\n            setExportProgress('');\n        }\n    };\n    const handleDownloadPDF = async ()=>{\n        if (isExporting) return;\n        setIsExporting(true);\n        setExportProgress(' PDF...');\n        const pdf = new jspdf__WEBPACK_IMPORTED_MODULE_5__.jsPDF('p', 'mm', 'a4');\n        const pageWidth = 210;\n        try {\n            for(let i = 0; i < book.pages.length; i++){\n                setExportProgress(`  ${i + 1}...`);\n                let imgUrl = images[i];\n                const isCover = i === 0;\n                if (!imgUrl) {\n                    const ref = bookRef.current.metadata.baseCharacterImageUrl || sessionReferenceImage;\n                    const textToRender = isCover ? bookRef.current.metadata.title || '' : undefined;\n                    imgUrl = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageImage)(book.pages[i].imagePrompt, fullCharacterDescription, book.metadata.artStyle, ref || undefined, isCover, textToRender);\n                    if (imgUrl) {\n                        setImages((prev)=>({\n                                ...prev,\n                                [i]: imgUrl\n                            }));\n                        updateBookState(i, imgUrl);\n                    }\n                }\n                if (imgUrl) {\n                    const canvas = await prepareExportCanvas(i, imgUrl);\n                    const imgData = canvas.toDataURL('image/jpeg', 0.9);\n                    const canvasRatio = canvas.height / canvas.width;\n                    const pdfImgHeight = pageWidth * canvasRatio;\n                    let renderWidth = pageWidth;\n                    let renderHeight = pdfImgHeight;\n                    if (renderHeight > 297) {\n                        const scale = 297 / renderHeight;\n                        renderHeight = 297;\n                        renderWidth = pageWidth * scale;\n                    }\n                    const xOffset = (210 - renderWidth) / 2;\n                    pdf.addImage(imgData, 'JPEG', xOffset, 0, renderWidth, renderHeight);\n                    if (i < book.pages.length - 1) pdf.addPage();\n                }\n            }\n            const pdfBlob = pdf.output('blob');\n            // Upload to Google Drive if connected\n            let driveLinks = null;\n            try {\n                const { hasDriveAccess, uploadBookToDrive } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/services/googleDrive */ \"(ssr)/./services/googleDrive.ts\"));\n                if (hasDriveAccess()) {\n                    setExportProgress(' -Google Drive...');\n                    // For PDF only export, we just upload the PDF (mock empty ZIP)\n                    // Or better, we can use a simpler uploadToDrive function, but uploadBookToDrive is handy.\n                    // Let's just upload the PDF using the generic upload function exposed or via uploadBookToDrive passing empty blob for zip?\n                    // Actually uploadBookToDrive expects both. Let's import uploadToDrive directly.\n                    const { uploadToDrive } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/services/googleDrive */ \"(ssr)/./services/googleDrive.ts\"));\n                    const safeTitle = book.metadata.title.replace(/[\\\\/:*?\"<>|]/g, '_');\n                    const timestamp = new Date().toISOString().split('T')[0];\n                    const result = await uploadToDrive(pdfBlob, `${safeTitle}_${timestamp}.pdf`, 'application/pdf');\n                    driveLinks = {\n                        zipLink: '',\n                        pdfLink: result.webViewLink\n                    };\n                }\n            } catch (driveError) {\n                console.warn('Drive upload failed:', driveError);\n            }\n            // Log book metadata to Firestore WITH Drive link\n            setExportProgress(' ...');\n            try {\n                const { saveBookPrompts } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! @/services/firebase */ \"(ssr)/./services/firebase.ts\"));\n                await saveBookPrompts({\n                    bookTitle: book.metadata.title,\n                    mainCharacter: book.metadata.mainCharacterDescription || '',\n                    artStyle: book.metadata.artStyle,\n                    topic: book.metadata.mainTheme || '',\n                    imagePrompts: book.pages.map((p)=>p.imagePrompt),\n                    drivePdfUrl: driveLinks?.pdfLink\n                });\n                console.log('Book metadata saved to Firestore!');\n            } catch (firebaseError) {\n                console.warn('Firestore save failed:', firebaseError);\n            }\n            const safeTitle = book.metadata.title.replace(/[\\\\/:*?\"<>|]/g, '_');\n            pdf.save(`${safeTitle}.pdf`);\n            // Show Drive links if uploaded\n            if (driveLinks?.pdfLink) {\n                setTimeout(()=>{\n                    const showLinks = confirm(`-PDF  -Google Drive!\\n\\n ?`);\n                    if (showLinks) {\n                        alert(` PDF: ${driveLinks.pdfLink}`);\n                    }\n                }, 500);\n            }\n        } finally{\n            setIsExporting(false);\n            setExportProgress('');\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-slate-900 z-[100] flex flex-col items-center\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-full bg-white px-4 h-20 flex items-center justify-between shadow-md shrink-0 z-50\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: onClose,\n                                className: \"text-slate-600 hover:text-slate-900 font-bold flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xl\",\n                                        children: \"\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 596,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    \"  \"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 595,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleChangeKey,\n                                className: \"text-slate-400 hover:text-slate-600 text-xs font-bold border border-slate-200 px-2 py-1 rounded-full flex items-center gap-1\",\n                                children: \"\\uD83D\\uDD11 API\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 598,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                        lineNumber: 594,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_DriveConnectButton__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {}, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 603,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownloadZIP,\n                                disabled: isExporting,\n                                className: \"bg-kid-orange hover:bg-orange-400 text-white font-bold py-2 px-4 rounded-full text-sm transition-all flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \" \"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 605,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    \" \\uD83D\\uDCE6\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 604,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleDownloadPDF,\n                                disabled: isExporting,\n                                className: \"bg-kid-blue hover:bg-teal-400 text-white font-bold py-2 px-4 rounded-full text-sm transition-all\",\n                                children: \"PDF  \\uD83D\\uDCC4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 607,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                        lineNumber: 602,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                lineNumber: 593,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-grow w-full flex items-center justify-center p-4 overflow-auto bg-slate-800\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"relative w-full max-w-[550px] bg-white rounded-2xl shadow-2xl overflow-hidden group border-4 border-white flex flex-col\",\n                    children: images[currentPageIndex] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `relative w-full ${currentPageIndex === 0 ? 'h-full aspect-square' : 'aspect-square shrink-0'} bg-slate-100`,\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: images[currentPageIndex],\n                                        className: \"w-full h-full object-cover\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 622,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleRegenerateImage,\n                                        disabled: loadingImages[currentPageIndex],\n                                        className: \"absolute top-4 left-4 z-30 bg-white/80 hover:bg-white text-slate-700 p-2 rounded-full shadow-lg backdrop-blur-sm transition-all hover:scale-110 disabled:opacity-50\",\n                                        title: \"   \",\n                                        children: loadingImages[currentPageIndex] ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-6 h-6 border-2 border-slate-700 border-t-transparent rounded-full animate-spin\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                            lineNumber: 631,\n                                            columnNumber: 21\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xl\",\n                                            children: \"\\uD83D\\uDD04\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                            lineNumber: 633,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 624,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    currentPageIndex === 0 && audioEnabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute bottom-6 right-6 flex flex-col items-end gap-2 z-20\",\n                                        children: [\n                                            audioError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-xs text-red-500 bg-white px-2 py-1 rounded-full font-bold shadow-md\",\n                                                children: audioError\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                                lineNumber: 640,\n                                                columnNumber: 36\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: (e)=>{\n                                                    e.stopPropagation();\n                                                    handleToggleAudio();\n                                                },\n                                                disabled: isLoadingAudio,\n                                                className: `\n                                flex items-center justify-center w-14 h-14 rounded-full shadow-lg border-4 border-white transition-all\n                                ${isPlaying ? 'bg-red-500 text-white animate-pulse' : 'bg-kid-blue text-white hover:bg-teal-400 hover:scale-110'}\n                                ${audioError ? 'bg-slate-400 border-slate-200' : ''}\n                            `,\n                                                children: isLoadingAudio ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                                    lineNumber: 650,\n                                                    columnNumber: 41\n                                                }, undefined) : isPlaying ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-3xl\",\n                                                    children: \"\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                                    lineNumber: 650,\n                                                    columnNumber: 156\n                                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"text-3xl\",\n                                                    children: \"\\uD83D\\uDD0A\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                                    lineNumber: 650,\n                                                    columnNumber: 194\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                                lineNumber: 641,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 639,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 621,\n                                columnNumber: 15\n                            }, undefined),\n                            currentPageIndex !== 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full book-text-container flex items-center justify-between flex-1\",\n                                children: [\n                                    audioEnabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: (e)=>{\n                                            e.stopPropagation();\n                                            handleToggleAudio();\n                                        },\n                                        disabled: isLoadingAudio,\n                                        className: `\n                                shrink-0 flex items-center justify-center w-12 h-12 rounded-full shadow-sm transition-all mr-6\n                                ${isPlaying ? 'bg-red-500 text-white animate-pulse' : 'bg-kid-blue text-white hover:bg-teal-400'}\n                                ${isLoadingAudio ? 'opacity-70 cursor-wait' : ''}\n                                ${audioError ? 'bg-slate-400' : ''}\n                            `,\n                                        children: isLoadingAudio ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                            lineNumber: 671,\n                                            columnNumber: 41\n                                        }, undefined) : isPlaying ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-2xl\",\n                                            children: \"\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                            lineNumber: 671,\n                                            columnNumber: 156\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-2xl\",\n                                            children: \"\\uD83D\\uDD0A\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                            lineNumber: 671,\n                                            columnNumber: 194\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 661,\n                                        columnNumber: 21\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex-1 text-center flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"book-text\",\n                                            children: currentPage.hebrewText\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                            lineNumber: 676,\n                                            columnNumber: 21\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                        lineNumber: 675,\n                                        columnNumber: 19\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 658,\n                                columnNumber: 17\n                            }, undefined)\n                        ]\n                    }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-full aspect-square flex flex-col items-center justify-center bg-slate-100\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-12 h-12 border-4 border-kid-blue border-t-transparent rounded-full animate-spin mb-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 685,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"font-bold text-slate-500\",\n                                children: \"  ...\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                                lineNumber: 686,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                        lineNumber: 684,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                    lineNumber: 614,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                lineNumber: 613,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"w-full bg-white/10 backdrop-blur-md p-6 flex justify-center items-center gap-10\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handlePrev,\n                        disabled: currentPageIndex === 0,\n                        className: \"w-14 h-14 bg-white/20 hover:bg-white/40 text-white rounded-full text-2xl disabled:opacity-20 transition-all\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                        lineNumber: 693,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-white font-bold bg-black/40 px-6 py-2 rounded-full\",\n                        children: [\n                            \" \",\n                            currentPageIndex + 1,\n                            \"  \",\n                            totalPages\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                        lineNumber: 694,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleNext,\n                        disabled: currentPageIndex === totalPages - 1,\n                        className: \"w-14 h-14 bg-kid-yellow hover:bg-yellow-400 text-slate-900 rounded-full text-2xl disabled:opacity-20 transition-all\",\n                        children: \"\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                        lineNumber: 697,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                lineNumber: 692,\n                columnNumber: 7\n            }, undefined),\n            isExporting && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 z-[400] bg-slate-900/90 flex items-center justify-center text-white\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-16 h-16 border-4 border-kid-blue border-t-transparent rounded-full animate-spin mx-auto mb-6\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                            lineNumber: 703,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-2xl font-bold font-fredoka\",\n                            children: exportProgress\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                            lineNumber: 704,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                    lineNumber: 702,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n                lineNumber: 701,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BookViewer.tsx\",\n        lineNumber: 592,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BookViewer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7O3FEQU9qQyw4REFBQ3FIO3dCQUFJQyxXQUFVOzswQ0FDYiw4REFBQ0Q7Z0NBQUlDLFdBQVU7Ozs7OzswQ0FDZiw4REFBQ2xLO2dDQUFFa0ssV0FBVTswQ0FBMkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBTWhELDhEQUFDRDtnQkFBSUMsV0FBVTs7a0NBQ2IsOERBQUNDO3dCQUFPQyxTQUFTN0c7d0JBQVkrRyxVQUFVekwscUJBQXFCO3dCQUFHcUwsV0FBVTtrQ0FBOEc7Ozs7OztrQ0FDdkwsOERBQUNHO3dCQUFLSCxXQUFVOzs0QkFBMEQ7NEJBQ2xFckwsbUJBQW1COzRCQUFFOzRCQUFPbUM7Ozs7Ozs7a0NBRXBDLDhEQUFDbUo7d0JBQU9DLFNBQVM5Rzt3QkFBWWdILFVBQVV6TCxxQkFBcUJtQyxhQUFhO3dCQUFHa0osV0FBVTtrQ0FBc0g7Ozs7Ozs7Ozs7OztZQUc3TWpLLDZCQUNDLDhEQUFDZ0s7Z0JBQUlDLFdBQVU7MEJBQ2IsNEVBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0Q7NEJBQUlDLFdBQVU7Ozs7OztzQ0FDZiw4REFBQ087NEJBQUdQLFdBQVU7c0NBQW1DL0o7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTTdEO0FBRUEsaUVBQWUxQixVQUFVQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExFTk9WT1xcRGVza3RvcFxcc2hhaGFyXFxib29rYWlcXGNvbXBvbmVudHNcXEJvb2tWaWV3ZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBCb29rIH0gZnJvbSAnQC90eXBlcydcbmltcG9ydCB7IGdlbmVyYXRlUGFnZUltYWdlLCBnZW5lcmF0ZVBhZ2VBdWRpbyB9IGZyb20gJ0Avc2VydmljZXMvZ2VtaW5pU2VydmljZSdcbmltcG9ydCBEcml2ZUNvbm5lY3RCdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL0RyaXZlQ29ubmVjdEJ1dHRvbidcbmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcydcbmltcG9ydCB7IGpzUERGIH0gZnJvbSAnanNwZGYnXG5pbXBvcnQgSlNaaXAgZnJvbSAnanN6aXAnXG5cbmludGVyZmFjZSBCb29rVmlld2VyUHJvcHMge1xuICBib29rOiBCb29rO1xuICBvblVwZGF0ZUJvb2s6IChib29rOiBCb29rKSA9PiB2b2lkO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xufVxuXG4vLyBIZWxwZXIgdG8gY29udmVydCBBdWRpb0J1ZmZlciB0byBXQVYgQmxvYlxuZnVuY3Rpb24gYXVkaW9CdWZmZXJUb1dhdihidWZmZXI6IEF1ZGlvQnVmZmVyKTogQmxvYiB7XG4gIGNvbnN0IG51bUNoYW5uZWxzID0gYnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7XG4gIGNvbnN0IHNhbXBsZVJhdGUgPSBidWZmZXIuc2FtcGxlUmF0ZTtcbiAgY29uc3QgZm9ybWF0ID0gMTsgLy8gUENNXG4gIGNvbnN0IGJpdERlcHRoID0gMTY7XG4gIGNvbnN0IGJ5dGVzUGVyU2FtcGxlID0gYml0RGVwdGggLyA4O1xuICBjb25zdCBibG9ja0FsaWduID0gbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZTtcbiAgY29uc3QgZGF0YUJ5dGVDb3VudCA9IGJ1ZmZlci5sZW5ndGggKiBibG9ja0FsaWduO1xuICBjb25zdCBoZWFkZXJCeXRlQ291bnQgPSA0NDtcbiAgY29uc3QgdG90YWxCeXRlQ291bnQgPSBoZWFkZXJCeXRlQ291bnQgKyBkYXRhQnl0ZUNvdW50O1xuICBjb25zdCBoZWFkZXJCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoaGVhZGVyQnl0ZUNvdW50KTtcbiAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhoZWFkZXJCdWZmZXIpO1xuICBjb25zdCB3cml0ZVN0cmluZyA9ICh2aWV3OiBEYXRhVmlldywgb2Zmc2V0OiBudW1iZXIsIHN0cmluZzogc3RyaW5nKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaSwgc3RyaW5nLmNoYXJDb2RlQXQoaSkpO1xuICAgIH1cbiAgfTtcbiAgd3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTtcbiAgdmlldy5zZXRVaW50MzIoNCwgdG90YWxCeXRlQ291bnQgLSA4LCB0cnVlKTtcbiAgd3JpdGVTdHJpbmcodmlldywgOCwgJ1dBVkUnKTtcbiAgd3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7XG4gIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7XG4gIHZpZXcuc2V0VWludDE2KDIwLCBmb3JtYXQsIHRydWUpO1xuICB2aWV3LnNldFVpbnQxNigyMiwgbnVtQ2hhbm5lbHMsIHRydWUpO1xuICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7XG4gIHZpZXcuc2V0VWludDMyKDI4LCBzYW1wbGVSYXRlICogYmxvY2tBbGlnbiwgdHJ1ZSk7XG4gIHZpZXcuc2V0VWludDE2KDMyLCBibG9ja0FsaWduLCB0cnVlKTtcbiAgdmlldy5zZXRVaW50MTYoMzQsIGJpdERlcHRoLCB0cnVlKTtcbiAgd3JpdGVTdHJpbmcodmlldywgMzYsICdkYXRhJyk7XG4gIHZpZXcuc2V0VWludDMyKDQwLCBkYXRhQnl0ZUNvdW50LCB0cnVlKTtcbiAgY29uc3QgZGF0YUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihkYXRhQnl0ZUNvdW50KTtcbiAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YUJ1ZmZlcik7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgbnVtQ2hhbm5lbHM7IGNoYW5uZWwrKykge1xuICAgICAgY29uc3Qgc2FtcGxlID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKGNoYW5uZWwpW2ldO1xuICAgICAgY29uc3QgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBzYW1wbGUpKTtcbiAgICAgIGNvbnN0IGludDE2ID0gcyA8IDAgPyBzICogMHg4MDAwIDogcyAqIDB4N0ZGRjtcbiAgICAgIGRhdGFWaWV3LnNldEludDE2KG9mZnNldCwgaW50MTYsIHRydWUpO1xuICAgICAgb2Zmc2V0ICs9IDI7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgQmxvYihbaGVhZGVyQnVmZmVyLCBkYXRhQnVmZmVyXSwgeyB0eXBlOiAnYXVkaW8vd2F2JyB9KTtcbn1cblxuY29uc3QgQm9va1ZpZXdlcjogUmVhY3QuRkM8Qm9va1ZpZXdlclByb3BzPiA9ICh7IGJvb2ssIG9uVXBkYXRlQm9vaywgb25DbG9zZSB9KSA9PiB7XG4gIGNvbnN0IFtjdXJyZW50UGFnZUluZGV4LCBzZXRDdXJyZW50UGFnZUluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBib29rUmVmID0gdXNlUmVmKGJvb2spO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgYm9va1JlZi5jdXJyZW50ID0gYm9vaztcbiAgfSwgW2Jvb2tdKTtcblxuICBjb25zdCBbaW1hZ2VzLCBzZXRJbWFnZXNdID0gdXNlU3RhdGU8UmVjb3JkPG51bWJlciwgc3RyaW5nPj4oKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxJbWFnZXM6IFJlY29yZDxudW1iZXIsIHN0cmluZz4gPSB7fTtcbiAgICBib29rLnBhZ2VzLmZvckVhY2goKHBhZ2UsIGluZGV4KSA9PiB7XG4gICAgICBpZiAocGFnZS5nZW5lcmF0ZWRJbWFnZVVybCkge1xuICAgICAgICBpbml0aWFsSW1hZ2VzW2luZGV4XSA9IHBhZ2UuZ2VuZXJhdGVkSW1hZ2VVcmw7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGluaXRpYWxJbWFnZXM7XG4gIH0pO1xuXG4gIGNvbnN0IFtsb2FkaW5nSW1hZ2VzLCBzZXRMb2FkaW5nSW1hZ2VzXSA9IHVzZVN0YXRlPFJlY29yZDxudW1iZXIsIGJvb2xlYW4+Pih7fSk7XG5cbiAgY29uc3QgW3Nlc3Npb25SZWZlcmVuY2VJbWFnZSwgc2V0U2Vzc2lvblJlZmVyZW5jZUltYWdlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KFxuICAgIGJvb2subWV0YWRhdGEuYmFzZUNoYXJhY3RlckltYWdlVXJsIHx8IGJvb2sucGFnZXMuZmluZChwID0+IHAuZ2VuZXJhdGVkSW1hZ2VVcmwpPy5nZW5lcmF0ZWRJbWFnZVVybCB8fCBudWxsXG4gICk7XG5cbiAgY29uc3QgW2lzRXhwb3J0aW5nLCBzZXRJc0V4cG9ydGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtleHBvcnRQcm9ncmVzcywgc2V0RXhwb3J0UHJvZ3Jlc3NdID0gdXNlU3RhdGUoJycpO1xuXG4gIGNvbnN0IFtpc1BsYXlpbmcsIHNldElzUGxheWluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0xvYWRpbmdBdWRpbywgc2V0SXNMb2FkaW5nQXVkaW9dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbYXVkaW9FcnJvciwgc2V0QXVkaW9FcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2F1ZGlvQnVmZmVycywgc2V0QXVkaW9CdWZmZXJzXSA9IHVzZVN0YXRlPFJlY29yZDxudW1iZXIsIEF1ZGlvQnVmZmVyPj4oe30pO1xuICBjb25zdCBhdWRpb0NvbnRleHRSZWYgPSB1c2VSZWY8QXVkaW9Db250ZXh0IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvU291cmNlUmVmID0gdXNlUmVmPEF1ZGlvQnVmZmVyU291cmNlTm9kZSB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGN1cnJlbnRQYWdlID0gYm9vay5wYWdlc1tjdXJyZW50UGFnZUluZGV4XTtcbiAgY29uc3QgdG90YWxQYWdlcyA9IGJvb2sucGFnZXMubGVuZ3RoO1xuICBjb25zdCBhdWRpb0VuYWJsZWQgPSBib29rLm1ldGFkYXRhLmF1ZGlvQ29uZmlnPy5lbmFibGVkID8/IHRydWU7XG4gIGNvbnN0IHZvaWNlTmFtZSA9IGJvb2subWV0YWRhdGEuYXVkaW9Db25maWc/LnZvaWNlTmFtZSB8fCAnUHVjayc7XG5cbiAgY29uc3QgZnVsbENoYXJhY3RlckRlc2NyaXB0aW9uID0gdXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IGRlc2MgPSBgTWFpbiBDaGFyYWN0ZXI6ICR7Ym9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGVzY3JpcHRpb259LmA7XG4gICAgaWYgKGJvb2subWV0YWRhdGEubWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyaykge1xuICAgICAgZGVzYyArPSBgIERJU1RJTkNUSVZFIEZFQVRVUkU6ICR7Ym9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrfSAoTXVzdCBhcHBlYXIgaW4gZXZlcnkgaW1hZ2UpLmA7XG4gICAgfVxuICAgIGlmIChib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uKSB7XG4gICAgICBkZXNjICs9IGBcXG5TZWNvbmRhcnkgQ2hhcmFjdGVyIChTaWRla2ljayk6ICR7Ym9vay5tZXRhZGF0YS5zZWNvbmRhcnlDaGFyYWN0ZXJEZXNjcmlwdGlvbn0gKFRoaXMgYXBwZWFyYW5jZSBNVVNUIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCBwYWdlcykuYDtcbiAgICAgIGlmIChib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRpc3RpbmN0aXZlTWFyaykge1xuICAgICAgICBkZXNjICs9IGAgRElTVElOQ1RJVkUgRkVBVFVSRTogJHtib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRpc3RpbmN0aXZlTWFya30uYDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc2M7XG4gIH0sIFtib29rLm1ldGFkYXRhXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3RvcEF1ZGlvKCk7XG4gICAgICBpZiAoYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzdG9wQXVkaW8oKTtcbiAgICBzZXRBdWRpb0Vycm9yKG51bGwpO1xuICB9LCBbY3VycmVudFBhZ2VJbmRleF0pO1xuXG4gIGNvbnN0IHN0b3BBdWRpbyA9ICgpID0+IHtcbiAgICBpZiAoYXVkaW9Tb3VyY2VSZWYuY3VycmVudCkge1xuICAgICAgdHJ5IHsgYXVkaW9Tb3VyY2VSZWYuY3VycmVudC5zdG9wKCk7IH0gY2F0Y2ggKGUpIHsgfVxuICAgICAgYXVkaW9Tb3VyY2VSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIHNldElzUGxheWluZyhmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlS2V5ID0gKCkgPT4ge1xuICAgIGNvbnN0IGFpc3R1ZGlvID0gKHdpbmRvdyBhcyBhbnkpLmFpc3R1ZGlvO1xuICAgIGlmIChhaXN0dWRpbykgYWlzdHVkaW8ub3BlblNlbGVjdEtleSgpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZUF1ZGlvID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghYXVkaW9FbmFibGVkKSByZXR1cm47XG5cbiAgICBpZiAoaXNQbGF5aW5nKSB7XG4gICAgICBzdG9wQXVkaW8oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRBdWRpb0Vycm9yKG51bGwpO1xuXG4gICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCkge1xuICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dCkoeyBzYW1wbGVSYXRlOiAyNDAwMCB9KTtcbiAgICB9XG5cbiAgICBpZiAoYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICBhd2FpdCBhdWRpb0NvbnRleHRSZWYuY3VycmVudC5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdHggPSBhdWRpb0NvbnRleHRSZWYuY3VycmVudDtcblxuICAgIGlmIChhdWRpb0J1ZmZlcnNbY3VycmVudFBhZ2VJbmRleF0pIHtcbiAgICAgIHBsYXlCdWZmZXIoYXVkaW9CdWZmZXJzW2N1cnJlbnRQYWdlSW5kZXhdLCBjdHgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldElzTG9hZGluZ0F1ZGlvKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXh0VG9SZWFkID0gY3VycmVudFBhZ2VJbmRleCA9PT0gMCA/IGJvb2subWV0YWRhdGEudGl0bGUgOiBjdXJyZW50UGFnZS5oZWJyZXdUZXh0O1xuICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZ2VuZXJhdGVQYWdlQXVkaW8odGV4dFRvUmVhZCwgY3R4LCB2b2ljZU5hbWUpO1xuICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICBzZXRBdWRpb0J1ZmZlcnMocHJldiA9PiAoeyAuLi5wcmV2LCBbY3VycmVudFBhZ2VJbmRleF06IGJ1ZmZlciB9KSk7XG4gICAgICAgIHBsYXlCdWZmZXIoYnVmZmVyLCBjdHgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0QXVkaW9FcnJvcihcIteq16fXnNeUINeR15nXpteZ16jXqiDXkNeV15PXmdeVXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICBzZXRBdWRpb0Vycm9yKFwi16nXkteZ15DXlCDXm9ec15zXmdeqXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmdBdWRpbyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHBsYXlCdWZmZXIgPSAoYnVmZmVyOiBBdWRpb0J1ZmZlciwgY3R4OiBBdWRpb0NvbnRleHQpID0+IHtcbiAgICBjb25zdCBzb3VyY2UgPSBjdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgc291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICBzb3VyY2UuY29ubmVjdChjdHguZGVzdGluYXRpb24pO1xuICAgIHNvdXJjZS5vbmVuZGVkID0gKCkgPT4gc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICBhdWRpb1NvdXJjZVJlZi5jdXJyZW50ID0gc291cmNlO1xuICAgIHNvdXJjZS5zdGFydCgpO1xuICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVOZXh0ID0gKCkgPT4geyBpZiAoY3VycmVudFBhZ2VJbmRleCA8IHRvdGFsUGFnZXMgLSAxKSBzZXRDdXJyZW50UGFnZUluZGV4KChwcmV2KSA9PiBwcmV2ICsgMSk7IH07XG4gIGNvbnN0IGhhbmRsZVByZXYgPSAoKSA9PiB7IGlmIChjdXJyZW50UGFnZUluZGV4ID4gMCkgc2V0Q3VycmVudFBhZ2VJbmRleCgocHJldikgPT4gcHJldiAtIDEpOyB9O1xuXG4gIGNvbnN0IHVwZGF0ZUJvb2tTdGF0ZSA9IChpbmRleDogbnVtYmVyLCB1cmw6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRCb29rU3RhdGUgPSBib29rUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgdXBkYXRlZFBhZ2VzID0gWy4uLmN1cnJlbnRCb29rU3RhdGUucGFnZXNdO1xuICAgIHVwZGF0ZWRQYWdlc1tpbmRleF0gPSB7IC4uLnVwZGF0ZWRQYWdlc1tpbmRleF0sIGdlbmVyYXRlZEltYWdlVXJsOiB1cmwgfTtcbiAgICBjb25zdCB1cGRhdGVkQm9vayA9IHsgLi4uY3VycmVudEJvb2tTdGF0ZSwgcGFnZXM6IHVwZGF0ZWRQYWdlcyB9O1xuICAgIG9uVXBkYXRlQm9vayh1cGRhdGVkQm9vayk7XG4gIH07XG5cbiAgY29uc3QgbG9hZEltYWdlID0gYXN5bmMgKHBhZ2VJbmRleDogbnVtYmVyLCBhY3Rpb25Qcm9tcHQ6IHN0cmluZykgPT4ge1xuICAgIGlmIChpbWFnZXNbcGFnZUluZGV4XSB8fCBsb2FkaW5nSW1hZ2VzW3BhZ2VJbmRleF0pIHJldHVybjtcblxuICAgIGlmIChib29rUmVmLmN1cnJlbnQucGFnZXNbcGFnZUluZGV4XS5nZW5lcmF0ZWRJbWFnZVVybCkge1xuICAgICAgc2V0SW1hZ2VzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbcGFnZUluZGV4XTogYm9va1JlZi5jdXJyZW50LnBhZ2VzW3BhZ2VJbmRleF0uZ2VuZXJhdGVkSW1hZ2VVcmwhIH0pKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRMb2FkaW5nSW1hZ2VzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbcGFnZUluZGV4XTogdHJ1ZSB9KSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZmVyZW5jZVRvVXNlID0gYm9va1JlZi5jdXJyZW50Lm1ldGFkYXRhLmJhc2VDaGFyYWN0ZXJJbWFnZVVybCB8fCBzZXNzaW9uUmVmZXJlbmNlSW1hZ2U7XG4gICAgICBjb25zdCBpc0NvdmVyID0gcGFnZUluZGV4ID09PSAwO1xuICAgICAgY29uc3QgdGV4dFRvUmVuZGVyID0gaXNDb3ZlciA/IGJvb2tSZWYuY3VycmVudC5tZXRhZGF0YS50aXRsZSA6IHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgdXJsID0gYXdhaXQgZ2VuZXJhdGVQYWdlSW1hZ2UoXG4gICAgICAgIGFjdGlvblByb21wdCxcbiAgICAgICAgZnVsbENoYXJhY3RlckRlc2NyaXB0aW9uLFxuICAgICAgICBib29rUmVmLmN1cnJlbnQubWV0YWRhdGEuYXJ0U3R5bGUsXG4gICAgICAgIHJlZmVyZW5jZVRvVXNlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgaXNDb3ZlcixcbiAgICAgICAgdGV4dFRvUmVuZGVyXG4gICAgICApO1xuXG4gICAgICBpZiAodXJsKSB7XG4gICAgICAgIHNldEltYWdlcygocHJldikgPT4gKHsgLi4ucHJldiwgW3BhZ2VJbmRleF06IHVybCB9KSk7XG4gICAgICAgIGlmICghcmVmZXJlbmNlVG9Vc2UgJiYgIXNlc3Npb25SZWZlcmVuY2VJbWFnZSkge1xuICAgICAgICAgIHNldFNlc3Npb25SZWZlcmVuY2VJbWFnZSh1cmwpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUJvb2tTdGF0ZShwYWdlSW5kZXgsIHVybCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2FkIHBhZ2UgaW1hZ2U6XCIsIGVycik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZ0ltYWdlcygocHJldikgPT4gKHsgLi4ucHJldiwgW3BhZ2VJbmRleF06IGZhbHNlIH0pKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVnZW5lcmF0ZUltYWdlID0gYXN5bmMgKGU6IFJlYWN0Lk1vdXNlRXZlbnQpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IHBhZ2VJbmRleCA9IGN1cnJlbnRQYWdlSW5kZXg7XG4gICAgaWYgKGxvYWRpbmdJbWFnZXNbcGFnZUluZGV4XSkgcmV0dXJuO1xuXG4gICAgc2V0TG9hZGluZ0ltYWdlcygocHJldikgPT4gKHsgLi4ucHJldiwgW3BhZ2VJbmRleF06IHRydWUgfSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlZmVyZW5jZVRvVXNlID0gYm9va1JlZi5jdXJyZW50Lm1ldGFkYXRhLmJhc2VDaGFyYWN0ZXJJbWFnZVVybCB8fCBzZXNzaW9uUmVmZXJlbmNlSW1hZ2U7XG4gICAgICBjb25zdCBpc0NvdmVyID0gcGFnZUluZGV4ID09PSAwO1xuICAgICAgY29uc3QgdGV4dFRvUmVuZGVyID0gaXNDb3ZlciA/IGJvb2tSZWYuY3VycmVudC5tZXRhZGF0YS50aXRsZSA6IHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgdXJsID0gYXdhaXQgZ2VuZXJhdGVQYWdlSW1hZ2UoXG4gICAgICAgIGJvb2tSZWYuY3VycmVudC5wYWdlc1twYWdlSW5kZXhdLmltYWdlUHJvbXB0LFxuICAgICAgICBmdWxsQ2hhcmFjdGVyRGVzY3JpcHRpb24sXG4gICAgICAgIGJvb2tSZWYuY3VycmVudC5tZXRhZGF0YS5hcnRTdHlsZSxcbiAgICAgICAgcmVmZXJlbmNlVG9Vc2UgfHwgdW5kZWZpbmVkLFxuICAgICAgICBpc0NvdmVyLFxuICAgICAgICB0ZXh0VG9SZW5kZXJcbiAgICAgICk7XG5cbiAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgc2V0SW1hZ2VzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbcGFnZUluZGV4XTogdXJsIH0pKTtcbiAgICAgICAgaWYgKHBhZ2VJbmRleCA9PT0gMCAmJiAhYm9va1JlZi5jdXJyZW50Lm1ldGFkYXRhLmJhc2VDaGFyYWN0ZXJJbWFnZVVybCkge1xuICAgICAgICAgIHNldFNlc3Npb25SZWZlcmVuY2VJbWFnZSh1cmwpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUJvb2tTdGF0ZShwYWdlSW5kZXgsIHVybCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWdlbmVyYXRpb24gZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgIGFsZXJ0KFwi16nXkteZ15DXlCDXkdeZ16bXmdeo16og15TXqtee15XXoNeUINee15fXk9epXCIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nSW1hZ2VzKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBbcGFnZUluZGV4XTogZmFsc2UgfSkpO1xuICAgIH1cbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBib29rLnBhZ2VzW2N1cnJlbnRQYWdlSW5kZXhdO1xuICAgIGlmIChwYWdlICYmICFpbWFnZXNbY3VycmVudFBhZ2VJbmRleF0pIHtcbiAgICAgIGxvYWRJbWFnZShjdXJyZW50UGFnZUluZGV4LCBwYWdlLmltYWdlUHJvbXB0KTtcbiAgICB9XG4gIH0sIFtjdXJyZW50UGFnZUluZGV4XSk7XG5cbiAgY29uc3QgcHJlcGFyZUV4cG9ydENhbnZhcyA9IGFzeW5jIChpOiBudW1iZXIsIGltZ1VybDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgaXNDb3ZlciA9IGkgPT09IDA7XG5cbiAgICAvLyBFWFBPUlQgTEFZT1VUIFNUUkFURUdZOlxuICAgIC8vIENvdmVyOiAxMDI0eDEwMjQgU3F1YXJlIChJbWFnZSBjb250YWlucyB0aXRsZSwgbm8gZXh0cmEgdGV4dCBhcmVhKVxuICAgIC8vIElubmVyOiAxMDI0eDEyODAgKDEwMjR4MTAyNCBJbWFnZSBUb3AgKyAxMDI0eDI1NiBUZXh0IEFyZWEgQm90dG9tKVxuXG4gICAgY29uc3Qgd2lkdGggPSAxMDI0O1xuICAgIGNvbnN0IGhlaWdodCA9IGlzQ292ZXIgPyAxMDI0IDogMTI4MDtcblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJy05OTk5cHgnO1xuICAgIGNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZmZmZic7XG4gICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICBpZiAoaXNDb3Zlcikge1xuICAgICAgLy8gQ292ZXIgaXMgc2ltcGxlIGZ1bGwgaW1hZ2VcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIke2ltZ1VybH1cIiBzdHlsZT1cIndpZHRoOiAxMDI0cHg7IGhlaWdodDogMTAyNHB4OyBvYmplY3QtZml0OiBjb3ZlcjtcIiAvPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElubmVyIHBhZ2VzOiBWZXJ0aWNhbCBTdGFjay4gSW1hZ2UgVG9wLCBUZXh0IEJvdHRvbS5cbiAgICAgIGNvbnN0IHRleHQgPSBib29rLnBhZ2VzW2ldLmhlYnJld1RleHQgfHwgXCJcIjtcbiAgICAgIC8vIEltcHJvdmVkIHRleHQgc3R5bGluZyBtYXRjaGluZyBnbG9iYWxzLmNzcyB1cGRhdGVzXG4gICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IHdpZHRoOiAxMDI0cHg7IGhlaWdodDogMTI4MHB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDEwMjRweDsgaGVpZ2h0OiAxMDAwcHg7IGZsZXgtc2hyaW5rOiAwOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmYWZjO1wiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aW1nVXJsfVwiIHN0eWxlPVwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb2JqZWN0LWZpdDogY292ZXI7IGRpc3BsYXk6IGJsb2NrO1wiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAyNHB4OyBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyODBweDsgXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IFxuICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyBcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzMnB4IDQ4cHg7IFxuICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OyBcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2ZmZmRmNSAwJSwgI2ZmZjhlNyAzMCUsICNmZGVjYzggNzAlLCAjZmJlM2IyIDEwMCUpO1xuICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDJweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KSwgaW5zZXQgMCAtMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAzcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpO1xuICAgICAgICAgICAgICAgIFwiPlxuICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1J1YmlrJywgJ0hlZWJvJywgJ0FyaWFsJywgc2Fucy1zZXJpZjsgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDQ0cHg7IFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzJhMWEwYTsgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHJ0bDsgXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KSwgMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4wNik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMWVtO1xuICAgICAgICAgICAgICAgICAgICAgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RleHR9XG4gICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgIGNvbnN0IGNhbnZhcyA9IGF3YWl0IGh0bWwyY2FudmFzKGNvbnRhaW5lciwgeyBzY2FsZTogMSwgdXNlQ09SUzogdHJ1ZSwgd2lkdGgsIGhlaWdodCB9KTtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEb3dubG9hZFpJUCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoaXNFeHBvcnRpbmcpIHJldHVybjtcbiAgICBzZXRJc0V4cG9ydGluZyh0cnVlKTtcbiAgICBzZXRFeHBvcnRQcm9ncmVzcygn157Xm9eZ158g15fXkdeZ15zXlCDXntec15DXlC4uLicpO1xuICAgIGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpO1xuICAgIC8vIEE0IFBvcnRyYWl0IGZvciBzdGFuZGFyZGl6ZWQgcHJpbnRpbmdcbiAgICBjb25zdCBwZGYgPSBuZXcganNQREYoJ3AnLCAnbW0nLCAnYTQnKTtcbiAgICBjb25zdCBwYWdlV2lkdGggPSAyMTA7XG5cbiAgICB0cnkge1xuICAgICAgemlwLmZpbGUoXCJzZXF1ZWxfZGF0YS5qc29uXCIsIEpTT04uc3RyaW5naWZ5KGJvb2tSZWYuY3VycmVudCwgbnVsbCwgMikpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvb2sucGFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2V0RXhwb3J0UHJvZ3Jlc3MoYNee16LXkdeTINei157XldeTICR7aSArIDF9INee16rXldeaICR7Ym9vay5wYWdlcy5sZW5ndGh9Li4uYCk7XG4gICAgICAgIGxldCBpbWdVcmwgPSBpbWFnZXNbaV07XG4gICAgICAgIGNvbnN0IGlzQ292ZXIgPSBpID09PSAwO1xuXG4gICAgICAgIGlmICghaW1nVXJsKSB7XG4gICAgICAgICAgY29uc3QgcmVmZXJlbmNlVG9Vc2UgPSBib29rUmVmLmN1cnJlbnQubWV0YWRhdGEuYmFzZUNoYXJhY3RlckltYWdlVXJsIHx8IHNlc3Npb25SZWZlcmVuY2VJbWFnZTtcbiAgICAgICAgICBjb25zdCB0ZXh0VG9SZW5kZXIgPSBpc0NvdmVyID8gKGJvb2tSZWYuY3VycmVudC5tZXRhZGF0YS50aXRsZSB8fCAnJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgaW1nVXJsID0gYXdhaXQgZ2VuZXJhdGVQYWdlSW1hZ2UoXG4gICAgICAgICAgICBib29rLnBhZ2VzW2ldLmltYWdlUHJvbXB0LFxuICAgICAgICAgICAgZnVsbENoYXJhY3RlckRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgYm9vay5tZXRhZGF0YS5hcnRTdHlsZSxcbiAgICAgICAgICAgIChyZWZlcmVuY2VUb1VzZSB8fCB1bmRlZmluZWQpIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlzQ292ZXIsXG4gICAgICAgICAgICB0ZXh0VG9SZW5kZXJcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChpbWdVcmwpIHtcbiAgICAgICAgICAgIHNldEltYWdlcyhwcmV2ID0+ICh7IC4uLnByZXYsIFtpXTogaW1nVXJsIH0pKTtcbiAgICAgICAgICAgIGlmICghcmVmZXJlbmNlVG9Vc2UgJiYgIXNlc3Npb25SZWZlcmVuY2VJbWFnZSkgc2V0U2Vzc2lvblJlZmVyZW5jZUltYWdlKGltZ1VybCk7XG4gICAgICAgICAgICB1cGRhdGVCb29rU3RhdGUoaSwgaW1nVXJsKTsgLy8gU3luYyFcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW1nVXJsKSB7XG4gICAgICAgICAgY29uc3QgY2FudmFzID0gYXdhaXQgcHJlcGFyZUV4cG9ydENhbnZhcyhpLCBpbWdVcmwpO1xuICAgICAgICAgIGNvbnN0IHBuZ0Jsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZTxCbG9iIHwgbnVsbD4ocmVzb2x2ZSA9PiBjYW52YXMudG9CbG9iKHJlc29sdmUsICdpbWFnZS9wbmcnKSk7XG5cbiAgICAgICAgICBpZiAocG5nQmxvYikgemlwLmZpbGUoaSA9PT0gMCA/ICcwMF9DT1ZFUi5wbmcnIDogYFBBR0VfJHtTdHJpbmcoaSkucGFkU3RhcnQoMiwgJzAnKX0ucG5nYCwgcG5nQmxvYik7XG5cbiAgICAgICAgICBjb25zdCBpbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIDAuOSk7XG5cbiAgICAgICAgICAvLyBQREYgTGF5b3V0XG4gICAgICAgICAgY29uc3QgY2FudmFzUmF0aW8gPSBjYW52YXMuaGVpZ2h0IC8gY2FudmFzLndpZHRoO1xuICAgICAgICAgIGNvbnN0IHBkZkltZ0hlaWdodCA9IHBhZ2VXaWR0aCAqIGNhbnZhc1JhdGlvO1xuXG4gICAgICAgICAgLy8gSWYgaGVpZ2h0IGV4Y2VlZHMgQTQgKDI5N21tKSwgc2NhbGUgZG93biB0byBmaXRcbiAgICAgICAgICBsZXQgcmVuZGVyV2lkdGggPSBwYWdlV2lkdGg7XG4gICAgICAgICAgbGV0IHJlbmRlckhlaWdodCA9IHBkZkltZ0hlaWdodDtcbiAgICAgICAgICBpZiAocmVuZGVySGVpZ2h0ID4gMjk3KSB7XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IDI5NyAvIHJlbmRlckhlaWdodDtcbiAgICAgICAgICAgIHJlbmRlckhlaWdodCA9IDI5NztcbiAgICAgICAgICAgIHJlbmRlcldpZHRoID0gcGFnZVdpZHRoICogc2NhbGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSAoMjEwIC0gcmVuZGVyV2lkdGgpIC8gMjtcblxuICAgICAgICAgIHBkZi5hZGRJbWFnZShpbWdEYXRhLCAnSlBFRycsIHhPZmZzZXQsIDAsIHJlbmRlcldpZHRoLCByZW5kZXJIZWlnaHQpO1xuXG4gICAgICAgICAgaWYgKGkgPCBib29rLnBhZ2VzLmxlbmd0aCAtIDEpIHBkZi5hZGRQYWdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXVkaW9FbmFibGVkKSB7XG4gICAgICAgICAgbGV0IGF1ZGlvQnVmID0gYXVkaW9CdWZmZXJzW2ldO1xuICAgICAgICAgIGlmICghYXVkaW9CdWYpIHtcbiAgICAgICAgICAgIGlmICghYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQpIGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8ICh3aW5kb3cgYXMgYW55KS53ZWJraXRBdWRpb0NvbnRleHQpKHsgc2FtcGxlUmF0ZTogMjQwMDAgfSk7XG4gICAgICAgICAgICBjb25zdCBidWYgPSBhd2FpdCBnZW5lcmF0ZVBhZ2VBdWRpbyhpID09PSAwID8gYm9vay5tZXRhZGF0YS50aXRsZSA6IGJvb2sucGFnZXNbaV0uaGVicmV3VGV4dCwgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQsIHZvaWNlTmFtZSk7XG4gICAgICAgICAgICBpZiAoYnVmKSB7IGF1ZGlvQnVmID0gYnVmOyBzZXRBdWRpb0J1ZmZlcnMocHJldiA9PiAoeyAuLi5wcmV2LCBbaV06IGJ1ZiB9KSk7IH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGF1ZGlvQnVmKSB6aXAuZmlsZShpID09PSAwID8gJzAwX0FVRElPX1RpdGxlLndhdicgOiBgQVVESU9fUGFnZV8ke1N0cmluZyhpKS5wYWRTdGFydCgyLCAnMCcpfS53YXZgLCBhdWRpb0J1ZmZlclRvV2F2KGF1ZGlvQnVmKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcGRmQmxvYiA9IHBkZi5vdXRwdXQoJ2Jsb2InKTtcbiAgICAgIHppcC5maWxlKGAke2Jvb2subWV0YWRhdGEudGl0bGV9LnBkZmAsIHBkZkJsb2IpO1xuXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgemlwLmdlbmVyYXRlQXN5bmMoeyB0eXBlOiAnYmxvYicgfSk7XG5cbiAgICAgIC8vIFVwbG9hZCB0byBHb29nbGUgRHJpdmUgaWYgY29ubmVjdGVkXG4gICAgICBsZXQgZHJpdmVMaW5rczogeyB6aXBMaW5rOiBzdHJpbmc7IHBkZkxpbms6IHN0cmluZyB9IHwgbnVsbCA9IG51bGw7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IGhhc0RyaXZlQWNjZXNzLCB1cGxvYWRCb29rVG9Ecml2ZSB9ID0gYXdhaXQgaW1wb3J0KCdAL3NlcnZpY2VzL2dvb2dsZURyaXZlJyk7XG4gICAgICAgIGlmIChoYXNEcml2ZUFjY2VzcygpKSB7XG4gICAgICAgICAgc2V0RXhwb3J0UHJvZ3Jlc3MoJ9ee16LXnNeUINecLUdvb2dsZSBEcml2ZS4uLicpO1xuICAgICAgICAgIGRyaXZlTGlua3MgPSBhd2FpdCB1cGxvYWRCb29rVG9Ecml2ZShjb250ZW50LCBwZGZCbG9iLCBib29rLm1ldGFkYXRhLnRpdGxlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZHJpdmVFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0RyaXZlIHVwbG9hZCBmYWlsZWQ6JywgZHJpdmVFcnJvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIFNhdmUgdG8gRmlyZXN0b3JlIFdJVEggRHJpdmUgbGlua3NcbiAgICAgIHNldEV4cG9ydFByb2dyZXNzKCfXqdeV157XqCDXnteZ15PXoi4uLicpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBzYXZlQm9va1Byb21wdHMgfSA9IGF3YWl0IGltcG9ydCgnQC9zZXJ2aWNlcy9maXJlYmFzZScpO1xuICAgICAgICBhd2FpdCBzYXZlQm9va1Byb21wdHMoe1xuICAgICAgICAgIGJvb2tUaXRsZTogYm9vay5tZXRhZGF0YS50aXRsZSxcbiAgICAgICAgICBtYWluQ2hhcmFjdGVyOiBib29rLm1ldGFkYXRhLm1haW5DaGFyYWN0ZXJEZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICBhcnRTdHlsZTogYm9vay5tZXRhZGF0YS5hcnRTdHlsZSxcbiAgICAgICAgICB0b3BpYzogYm9vay5tZXRhZGF0YS5tYWluVGhlbWUgfHwgJycsXG4gICAgICAgICAgaW1hZ2VQcm9tcHRzOiBib29rLnBhZ2VzLm1hcChwID0+IHAuaW1hZ2VQcm9tcHQpLFxuICAgICAgICAgIGRyaXZlWmlwVXJsOiBkcml2ZUxpbmtzPy56aXBMaW5rLFxuICAgICAgICAgIGRyaXZlUGRmVXJsOiBkcml2ZUxpbmtzPy5wZGZMaW5rXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnQm9vayBzYXZlZCB0byBGaXJlc3RvcmUgd2l0aCBEcml2ZSBsaW5rcyEnKTtcbiAgICAgIH0gY2F0Y2ggKGZpcmViYXNlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGaXJlc3RvcmUgc2F2ZSBmYWlsZWQ6JywgZmlyZWJhc2VFcnJvcik7XG4gICAgICB9XG5cbiAgICAgIC8vIERvd25sb2FkIGxvY2FsbHlcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGNvbnRlbnQpO1xuICAgICAgY29uc3Qgc2FmZVRpdGxlID0gYm9vay5tZXRhZGF0YS50aXRsZS5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJ18nKTtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBgJHtzYWZlVGl0bGV9LnppcGA7XG4gICAgICBsaW5rLmNsaWNrKCk7XG5cbiAgICAgIC8vIFNob3cgRHJpdmUgbGlua3MgaWYgdXBsb2FkZWRcbiAgICAgIGlmIChkcml2ZUxpbmtzKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNob3dMaW5rcyA9IGNvbmZpcm0oYNeU16HXpNeoINeU15XXotec15Qg15wtR29vZ2xlIERyaXZlIVxcblxcbtec15TXpteZ15Ig16fXmdep15XXqNeZ150/YCk7XG4gICAgICAgICAgaWYgKHNob3dMaW5rcykge1xuICAgICAgICAgICAgYWxlcnQoYPCfk6YgWklQOiAke2RyaXZlTGlua3MuemlwTGlua31cXG5cXG7wn5OEIFBERjogJHtkcml2ZUxpbmtzLnBkZkxpbmt9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCA1MDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXhwb3J0IGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgYWxlcnQoXCLXlNeZ15nXpteV15Ag16DXm9ep15wuINeQ16DXkCDXoNeh15Qg16nXldeRLlwiKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNFeHBvcnRpbmcoZmFsc2UpO1xuICAgICAgc2V0RXhwb3J0UHJvZ3Jlc3MoJycpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEb3dubG9hZFBERiA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoaXNFeHBvcnRpbmcpIHJldHVybjtcbiAgICBzZXRJc0V4cG9ydGluZyh0cnVlKTtcbiAgICBzZXRFeHBvcnRQcm9ncmVzcygn15nXldem16ggUERGLi4uJyk7XG4gICAgY29uc3QgcGRmID0gbmV3IGpzUERGKCdwJywgJ21tJywgJ2E0Jyk7XG4gICAgY29uc3QgcGFnZVdpZHRoID0gMjEwO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9vay5wYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzZXRFeHBvcnRQcm9ncmVzcyhg157Xldeh15nXoyDXotee15XXkyAke2kgKyAxfS4uLmApO1xuICAgICAgICBsZXQgaW1nVXJsID0gaW1hZ2VzW2ldO1xuICAgICAgICBjb25zdCBpc0NvdmVyID0gaSA9PT0gMDtcblxuICAgICAgICBpZiAoIWltZ1VybCkge1xuICAgICAgICAgIGNvbnN0IHJlZiA9IGJvb2tSZWYuY3VycmVudC5tZXRhZGF0YS5iYXNlQ2hhcmFjdGVySW1hZ2VVcmwgfHwgc2Vzc2lvblJlZmVyZW5jZUltYWdlO1xuICAgICAgICAgIGNvbnN0IHRleHRUb1JlbmRlciA9IGlzQ292ZXIgPyAoYm9va1JlZi5jdXJyZW50Lm1ldGFkYXRhLnRpdGxlIHx8ICcnKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBpbWdVcmwgPSBhd2FpdCBnZW5lcmF0ZVBhZ2VJbWFnZShcbiAgICAgICAgICAgIGJvb2sucGFnZXNbaV0uaW1hZ2VQcm9tcHQsXG4gICAgICAgICAgICBmdWxsQ2hhcmFjdGVyRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBib29rLm1ldGFkYXRhLmFydFN0eWxlLFxuICAgICAgICAgICAgKHJlZiB8fCB1bmRlZmluZWQpIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlzQ292ZXIsXG4gICAgICAgICAgICB0ZXh0VG9SZW5kZXJcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChpbWdVcmwpIHsgc2V0SW1hZ2VzKHByZXYgPT4gKHsgLi4ucHJldiwgW2ldOiBpbWdVcmwgfSkpOyB1cGRhdGVCb29rU3RhdGUoaSwgaW1nVXJsKTsgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbWdVcmwpIHtcbiAgICAgICAgICBjb25zdCBjYW52YXMgPSBhd2FpdCBwcmVwYXJlRXhwb3J0Q2FudmFzKGksIGltZ1VybCk7XG4gICAgICAgICAgY29uc3QgaW1nRGF0YSA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCAwLjkpO1xuXG4gICAgICAgICAgY29uc3QgY2FudmFzUmF0aW8gPSBjYW52YXMuaGVpZ2h0IC8gY2FudmFzLndpZHRoO1xuICAgICAgICAgIGNvbnN0IHBkZkltZ0hlaWdodCA9IHBhZ2VXaWR0aCAqIGNhbnZhc1JhdGlvO1xuXG4gICAgICAgICAgbGV0IHJlbmRlcldpZHRoID0gcGFnZVdpZHRoO1xuICAgICAgICAgIGxldCByZW5kZXJIZWlnaHQgPSBwZGZJbWdIZWlnaHQ7XG4gICAgICAgICAgaWYgKHJlbmRlckhlaWdodCA+IDI5Nykge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSAyOTcgLyByZW5kZXJIZWlnaHQ7XG4gICAgICAgICAgICByZW5kZXJIZWlnaHQgPSAyOTc7XG4gICAgICAgICAgICByZW5kZXJXaWR0aCA9IHBhZ2VXaWR0aCAqIHNjYWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB4T2Zmc2V0ID0gKDIxMCAtIHJlbmRlcldpZHRoKSAvIDI7XG5cbiAgICAgICAgICBwZGYuYWRkSW1hZ2UoaW1nRGF0YSwgJ0pQRUcnLCB4T2Zmc2V0LCAwLCByZW5kZXJXaWR0aCwgcmVuZGVySGVpZ2h0KTtcbiAgICAgICAgICBpZiAoaSA8IGJvb2sucGFnZXMubGVuZ3RoIC0gMSkgcGRmLmFkZFBhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwZGZCbG9iID0gcGRmLm91dHB1dCgnYmxvYicpO1xuXG4gICAgICAvLyBVcGxvYWQgdG8gR29vZ2xlIERyaXZlIGlmIGNvbm5lY3RlZFxuICAgICAgbGV0IGRyaXZlTGlua3M6IHsgemlwTGluazogc3RyaW5nOyBwZGZMaW5rOiBzdHJpbmcgfSB8IG51bGwgPSBudWxsO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBoYXNEcml2ZUFjY2VzcywgdXBsb2FkQm9va1RvRHJpdmUgfSA9IGF3YWl0IGltcG9ydCgnQC9zZXJ2aWNlcy9nb29nbGVEcml2ZScpO1xuICAgICAgICBpZiAoaGFzRHJpdmVBY2Nlc3MoKSkge1xuICAgICAgICAgIHNldEV4cG9ydFByb2dyZXNzKCfXntei15zXlCDXnC1Hb29nbGUgRHJpdmUuLi4nKTtcbiAgICAgICAgICAvLyBGb3IgUERGIG9ubHkgZXhwb3J0LCB3ZSBqdXN0IHVwbG9hZCB0aGUgUERGIChtb2NrIGVtcHR5IFpJUClcbiAgICAgICAgICAvLyBPciBiZXR0ZXIsIHdlIGNhbiB1c2UgYSBzaW1wbGVyIHVwbG9hZFRvRHJpdmUgZnVuY3Rpb24sIGJ1dCB1cGxvYWRCb29rVG9Ecml2ZSBpcyBoYW5keS5cbiAgICAgICAgICAvLyBMZXQncyBqdXN0IHVwbG9hZCB0aGUgUERGIHVzaW5nIHRoZSBnZW5lcmljIHVwbG9hZCBmdW5jdGlvbiBleHBvc2VkIG9yIHZpYSB1cGxvYWRCb29rVG9Ecml2ZSBwYXNzaW5nIGVtcHR5IGJsb2IgZm9yIHppcD9cbiAgICAgICAgICAvLyBBY3R1YWxseSB1cGxvYWRCb29rVG9Ecml2ZSBleHBlY3RzIGJvdGguIExldCdzIGltcG9ydCB1cGxvYWRUb0RyaXZlIGRpcmVjdGx5LlxuICAgICAgICAgIGNvbnN0IHsgdXBsb2FkVG9Ecml2ZSB9ID0gYXdhaXQgaW1wb3J0KCdAL3NlcnZpY2VzL2dvb2dsZURyaXZlJyk7XG4gICAgICAgICAgY29uc3Qgc2FmZVRpdGxlID0gYm9vay5tZXRhZGF0YS50aXRsZS5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJ18nKTtcbiAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGxvYWRUb0RyaXZlKHBkZkJsb2IsIGAke3NhZmVUaXRsZX1fJHt0aW1lc3RhbXB9LnBkZmAsICdhcHBsaWNhdGlvbi9wZGYnKTtcbiAgICAgICAgICBkcml2ZUxpbmtzID0geyB6aXBMaW5rOiAnJywgcGRmTGluazogcmVzdWx0LndlYlZpZXdMaW5rIH07XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGRyaXZlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdEcml2ZSB1cGxvYWQgZmFpbGVkOicsIGRyaXZlRXJyb3IpO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2cgYm9vayBtZXRhZGF0YSB0byBGaXJlc3RvcmUgV0lUSCBEcml2ZSBsaW5rXG4gICAgICBzZXRFeHBvcnRQcm9ncmVzcygn16nXldee16gg157XmdeT16IuLi4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgc2F2ZUJvb2tQcm9tcHRzIH0gPSBhd2FpdCBpbXBvcnQoJ0Avc2VydmljZXMvZmlyZWJhc2UnKTtcbiAgICAgICAgYXdhaXQgc2F2ZUJvb2tQcm9tcHRzKHtcbiAgICAgICAgICBib29rVGl0bGU6IGJvb2subWV0YWRhdGEudGl0bGUsXG4gICAgICAgICAgbWFpbkNoYXJhY3RlcjogYm9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgYXJ0U3R5bGU6IGJvb2subWV0YWRhdGEuYXJ0U3R5bGUsXG4gICAgICAgICAgdG9waWM6IGJvb2subWV0YWRhdGEubWFpblRoZW1lIHx8ICcnLFxuICAgICAgICAgIGltYWdlUHJvbXB0czogYm9vay5wYWdlcy5tYXAocCA9PiBwLmltYWdlUHJvbXB0KSxcbiAgICAgICAgICBkcml2ZVBkZlVybDogZHJpdmVMaW5rcz8ucGRmTGlua1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ0Jvb2sgbWV0YWRhdGEgc2F2ZWQgdG8gRmlyZXN0b3JlIScpO1xuICAgICAgfSBjYXRjaCAoZmlyZWJhc2VFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0ZpcmVzdG9yZSBzYXZlIGZhaWxlZDonLCBmaXJlYmFzZUVycm9yKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FmZVRpdGxlID0gYm9vay5tZXRhZGF0YS50aXRsZS5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJ18nKTtcbiAgICAgIHBkZi5zYXZlKGAke3NhZmVUaXRsZX0ucGRmYCk7XG5cbiAgICAgIC8vIFNob3cgRHJpdmUgbGlua3MgaWYgdXBsb2FkZWRcbiAgICAgIGlmIChkcml2ZUxpbmtzPy5wZGZMaW5rKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNob3dMaW5rcyA9IGNvbmZpcm0oYNeULVBERiDXlNeV16LXnNeUINecLUdvb2dsZSBEcml2ZSFcXG5cXG7XnNeU16bXmdeSINen15nXqdeV16g/YCk7XG4gICAgICAgICAgaWYgKHNob3dMaW5rcykge1xuICAgICAgICAgICAgYWxlcnQoYPCfk4QgUERGOiAke2RyaXZlTGlua3MucGRmTGlua31gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHsgc2V0SXNFeHBvcnRpbmcoZmFsc2UpOyBzZXRFeHBvcnRQcm9ncmVzcygnJyk7IH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1zbGF0ZS05MDAgei1bMTAwXSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctd2hpdGUgcHgtNCBoLTIwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBzaGFkb3ctbWQgc2hyaW5rLTAgei01MFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMCBob3Zlcjp0ZXh0LXNsYXRlLTkwMCBmb250LWJvbGQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteGxcIj7ihpA8L3NwYW4+INeX15bXqNeUINec16LXqNeZ15vXlFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlQ2hhbmdlS2V5fSBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LXNsYXRlLTYwMCB0ZXh0LXhzIGZvbnQtYm9sZCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBweC0yIHB5LTEgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+XG4gICAgICAgICAgICDwn5SRIEFQSVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgIDxEcml2ZUNvbm5lY3RCdXR0b24gLz5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkWklQfSBkaXNhYmxlZD17aXNFeHBvcnRpbmd9IGNsYXNzTmFtZT1cImJnLWtpZC1vcmFuZ2UgaG92ZXI6Ymctb3JhbmdlLTQwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0yIHB4LTQgcm91bmRlZC1mdWxsIHRleHQtc20gdHJhbnNpdGlvbi1hbGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxzcGFuPteX15HXmdec15Qg157XnNeQ15Q8L3NwYW4+IPCfk6ZcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZURvd25sb2FkUERGfSBkaXNhYmxlZD17aXNFeHBvcnRpbmd9IGNsYXNzTmFtZT1cImJnLWtpZC1ibHVlIGhvdmVyOmJnLXRlYWwtNDAwIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLWZ1bGwgdGV4dC1zbSB0cmFuc2l0aW9uLWFsbFwiPlxuICAgICAgICAgICAgUERGINeR15zXkdeTIPCfk4RcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LWdyb3cgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCBvdmVyZmxvdy1hdXRvIGJnLXNsYXRlLTgwMFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbCBtYXgtdy1bNTUwcHhdIGJnLXdoaXRlIHJvdW5kZWQtMnhsIHNoYWRvdy0yeGwgb3ZlcmZsb3ctaGlkZGVuIGdyb3VwIGJvcmRlci00IGJvcmRlci13aGl0ZSBmbGV4IGZsZXgtY29sXCI+XG4gICAgICAgICAge2ltYWdlc1tjdXJyZW50UGFnZUluZGV4XSA/IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsvKiBJTUFHRSBBUkVBOiBcbiAgICAgICAgICAgICAgICAgLSBDb3ZlcjogRnVsbCBjb250YWluZXIuXG4gICAgICAgICAgICAgICAgIC0gSW5uZXI6IFN0cmljdGx5IHNxdWFyZSwgdG9wIHBhcnQgb2YgZmxleCBjb2x1bW4uXG4gICAgICAgICAgICAgICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHJlbGF0aXZlIHctZnVsbCAke2N1cnJlbnRQYWdlSW5kZXggPT09IDAgPyAnaC1mdWxsIGFzcGVjdC1zcXVhcmUnIDogJ2FzcGVjdC1zcXVhcmUgc2hyaW5rLTAnfSBiZy1zbGF0ZS0xMDBgfT5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz17aW1hZ2VzW2N1cnJlbnRQYWdlSW5kZXhdfSBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiIC8+XG5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZWdlbmVyYXRlSW1hZ2V9XG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ0ltYWdlc1tjdXJyZW50UGFnZUluZGV4XX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC00IGxlZnQtNCB6LTMwIGJnLXdoaXRlLzgwIGhvdmVyOmJnLXdoaXRlIHRleHQtc2xhdGUtNzAwIHAtMiByb3VuZGVkLWZ1bGwgc2hhZG93LWxnIGJhY2tkcm9wLWJsdXItc20gdHJhbnNpdGlvbi1hbGwgaG92ZXI6c2NhbGUtMTEwIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCLXpteZ15nXqCDXnteX15PXqSDXkNeqINeU16rXnteV16DXlFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2xvYWRpbmdJbWFnZXNbY3VycmVudFBhZ2VJbmRleF0gPyAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy02IGgtNiBib3JkZXItMiBib3JkZXItc2xhdGUtNzAwIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW5cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteGxcIj7wn5SEPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgIHsvKiBBdWRpbyBCdXR0b24gZm9yIENvdmVyIChPdmVybGF5IFN0eWxlKSAqL31cbiAgICAgICAgICAgICAgICB7Y3VycmVudFBhZ2VJbmRleCA9PT0gMCAmJiBhdWRpb0VuYWJsZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tNiByaWdodC02IGZsZXggZmxleC1jb2wgaXRlbXMtZW5kIGdhcC0yIHotMjBcIj5cbiAgICAgICAgICAgICAgICAgICAge2F1ZGlvRXJyb3IgJiYgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXJlZC01MDAgYmctd2hpdGUgcHgtMiBweS0xIHJvdW5kZWQtZnVsbCBmb250LWJvbGQgc2hhZG93LW1kXCI+e2F1ZGlvRXJyb3J9PC9zcGFuPn1cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGhhbmRsZVRvZ2dsZUF1ZGlvKCk7IH19XG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ0F1ZGlvfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LTE0IGgtMTQgcm91bmRlZC1mdWxsIHNoYWRvdy1sZyBib3JkZXItNCBib3JkZXItd2hpdGUgdHJhbnNpdGlvbi1hbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpc1BsYXlpbmcgPyAnYmctcmVkLTUwMCB0ZXh0LXdoaXRlIGFuaW1hdGUtcHVsc2UnIDogJ2JnLWtpZC1ibHVlIHRleHQtd2hpdGUgaG92ZXI6YmctdGVhbC00MDAgaG92ZXI6c2NhbGUtMTEwJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHthdWRpb0Vycm9yID8gJ2JnLXNsYXRlLTQwMCBib3JkZXItc2xhdGUtMjAwJyA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7aXNMb2FkaW5nQXVkaW8gPyA8ZGl2IGNsYXNzTmFtZT1cInctNiBoLTYgYm9yZGVyLTMgYm9yZGVyLXdoaXRlIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW5cIj48L2Rpdj4gOiBpc1BsYXlpbmcgPyA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LTN4bFwiPuKPuTwvc3Bhbj4gOiA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LTN4bFwiPvCflIo8L3NwYW4+fVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBURVhUIEFSRUEgKElubmVyIFBhZ2VzIE9ubHkpOiBVc2UgY3VzdG9tIGJvb2stdGV4dC1jb250YWluZXIgY2xhc3MgKi99XG4gICAgICAgICAgICAgIHtjdXJyZW50UGFnZUluZGV4ICE9PSAwICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBib29rLXRleHQtY29udGFpbmVyIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBmbGV4LTFcIj5cblxuICAgICAgICAgICAgICAgICAge2F1ZGlvRW5hYmxlZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBoYW5kbGVUb2dnbGVBdWRpbygpOyB9fVxuICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmdBdWRpb31cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hyaW5rLTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBzaGFkb3ctc20gdHJhbnNpdGlvbi1hbGwgbXItNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2lzUGxheWluZyA/ICdiZy1yZWQtNTAwIHRleHQtd2hpdGUgYW5pbWF0ZS1wdWxzZScgOiAnYmcta2lkLWJsdWUgdGV4dC13aGl0ZSBob3ZlcjpiZy10ZWFsLTQwMCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXNMb2FkaW5nQXVkaW8gPyAnb3BhY2l0eS03MCBjdXJzb3Itd2FpdCcgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHthdWRpb0Vycm9yID8gJ2JnLXNsYXRlLTQwMCcgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAge2lzTG9hZGluZ0F1ZGlvID8gPGRpdiBjbGFzc05hbWU9XCJ3LTUgaC01IGJvcmRlci0yIGJvcmRlci13aGl0ZSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluXCI+PC9kaXY+IDogaXNQbGF5aW5nID8gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGxcIj7ij7k8L3NwYW4+IDogPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGxcIj7wn5SKPC9zcGFuPn1cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSB0ZXh0LWNlbnRlciBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJib29rLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudFBhZ2UuaGVicmV3VGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYXNwZWN0LXNxdWFyZSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1zbGF0ZS0xMDBcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEyIGgtMTIgYm9yZGVyLTQgYm9yZGVyLWtpZC1ibHVlIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW4gbWItNFwiPjwvZGl2PlxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1zbGF0ZS01MDBcIj7Xntem15nXmdeoINeo15LXoiDXp9eh15XXnS4uLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXdoaXRlLzEwIGJhY2tkcm9wLWJsdXItbWQgcC02IGZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIGdhcC0xMFwiPlxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVByZXZ9IGRpc2FibGVkPXtjdXJyZW50UGFnZUluZGV4ID09PSAwfSBjbGFzc05hbWU9XCJ3LTE0IGgtMTQgYmctd2hpdGUvMjAgaG92ZXI6Ymctd2hpdGUvNDAgdGV4dC13aGl0ZSByb3VuZGVkLWZ1bGwgdGV4dC0yeGwgZGlzYWJsZWQ6b3BhY2l0eS0yMCB0cmFuc2l0aW9uLWFsbFwiPuKGkDwvYnV0dG9uPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGZvbnQtYm9sZCBiZy1ibGFjay80MCBweC02IHB5LTIgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAg16LXnteV15Mge2N1cnJlbnRQYWdlSW5kZXggKyAxfSDXnteq15XXmiB7dG90YWxQYWdlc31cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2hhbmRsZU5leHR9IGRpc2FibGVkPXtjdXJyZW50UGFnZUluZGV4ID09PSB0b3RhbFBhZ2VzIC0gMX0gY2xhc3NOYW1lPVwidy0xNCBoLTE0IGJnLWtpZC15ZWxsb3cgaG92ZXI6YmcteWVsbG93LTQwMCB0ZXh0LXNsYXRlLTkwMCByb3VuZGVkLWZ1bGwgdGV4dC0yeGwgZGlzYWJsZWQ6b3BhY2l0eS0yMCB0cmFuc2l0aW9uLWFsbFwiPuKGkjwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtpc0V4cG9ydGluZyAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVs0MDBdIGJnLXNsYXRlLTkwMC85MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXdoaXRlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTE2IGgtMTYgYm9yZGVyLTQgYm9yZGVyLWtpZC1ibHVlIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW4gbXgtYXV0byBtYi02XCI+PC9kaXY+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIGZvbnQtZnJlZG9rYVwiPntleHBvcnRQcm9ncmVzc308L2gzPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCb29rVmlld2VyO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwiZ2VuZXJhdGVQYWdlSW1hZ2UiLCJnZW5lcmF0ZVBhZ2VBdWRpbyIsIkRyaXZlQ29ubmVjdEJ1dHRvbiIsImh0bWwyY2FudmFzIiwianNQREYiLCJKU1ppcCIsImF1ZGlvQnVmZmVyVG9XYXYiLCJidWZmZXIiLCJudW1DaGFubmVscyIsIm51bWJlck9mQ2hhbm5lbHMiLCJzYW1wbGVSYXRlIiwiZm9ybWF0IiwiYml0RGVwdGgiLCJieXRlc1BlclNhbXBsZSIsImJsb2NrQWxpZ24iLCJkYXRhQnl0ZUNvdW50IiwibGVuZ3RoIiwiaGVhZGVyQnl0ZUNvdW50IiwidG90YWxCeXRlQ291bnQiLCJoZWFkZXJCdWZmZXIiLCJBcnJheUJ1ZmZlciIsInZpZXciLCJEYXRhVmlldyIsIndyaXRlU3RyaW5nIiwib2Zmc2V0Iiwic3RyaW5nIiwiaSIsInNldFVpbnQ4IiwiY2hhckNvZGVBdCIsInNldFVpbnQzMiIsInNldFVpbnQxNiIsImRhdGFCdWZmZXIiLCJkYXRhVmlldyIsImNoYW5uZWwiLCJzYW1wbGUiLCJnZXRDaGFubmVsRGF0YSIsInMiLCJNYXRoIiwibWF4IiwibWluIiwiaW50MTYiLCJzZXRJbnQxNiIsIkJsb2IiLCJ0eXBlIiwiQm9va1ZpZXdlciIsImJvb2siLCJvblVwZGF0ZUJvb2siLCJvbkNsb3NlIiwiY3VycmVudFBhZ2VJbmRleCIsInNldEN1cnJlbnRQYWdlSW5kZXgiLCJib29rUmVmIiwiY3VycmVudCIsImltYWdlcyIsInNldEltYWdlcyIsImluaXRpYWxJbWFnZXMiLCJwYWdlcyIsImZvckVhY2giLCJwYWdlIiwiaW5kZXgiLCJnZW5lcmF0ZWRJbWFnZVVybCIsImxvYWRpbmdJbWFnZXMiLCJzZXRMb2FkaW5nSW1hZ2VzIiwic2Vzc2lvblJlZmVyZW5jZUltYWdlIiwic2V0U2Vzc2lvblJlZmVyZW5jZUltYWdlIiwibWV0YWRhdGEiLCJiYXNlQ2hhcmFjdGVySW1hZ2VVcmwiLCJmaW5kIiwicCIsImlzRXhwb3J0aW5nIiwic2V0SXNFeHBvcnRpbmciLCJleHBvcnRQcm9ncmVzcyIsInNldEV4cG9ydFByb2dyZXNzIiwiaXNQbGF5aW5nIiwic2V0SXNQbGF5aW5nIiwiaXNMb2FkaW5nQXVkaW8iLCJzZXRJc0xvYWRpbmdBdWRpbyIsImF1ZGlvRXJyb3IiLCJzZXRBdWRpb0Vycm9yIiwiYXVkaW9CdWZmZXJzIiwic2V0QXVkaW9CdWZmZXJzIiwiYXVkaW9Db250ZXh0UmVmIiwiYXVkaW9Tb3VyY2VSZWYiLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJhdWRpb0VuYWJsZWQiLCJhdWRpb0NvbmZpZyIsImVuYWJsZWQiLCJ2b2ljZU5hbWUiLCJmdWxsQ2hhcmFjdGVyRGVzY3JpcHRpb24iLCJkZXNjIiwibWFpbkNoYXJhY3RlckRlc2NyaXB0aW9uIiwibWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyayIsInNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uIiwic2Vjb25kYXJ5Q2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrIiwic3RvcEF1ZGlvIiwiY2xvc2UiLCJzdG9wIiwiZSIsImhhbmRsZUNoYW5nZUtleSIsImFpc3R1ZGlvIiwid2luZG93Iiwib3BlblNlbGVjdEtleSIsImhhbmRsZVRvZ2dsZUF1ZGlvIiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0Iiwic3RhdGUiLCJyZXN1bWUiLCJjdHgiLCJwbGF5QnVmZmVyIiwidGV4dFRvUmVhZCIsInRpdGxlIiwiaGVicmV3VGV4dCIsInByZXYiLCJjb25zb2xlIiwiZXJyb3IiLCJzb3VyY2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJvbmVuZGVkIiwic3RhcnQiLCJoYW5kbGVOZXh0IiwiaGFuZGxlUHJldiIsInVwZGF0ZUJvb2tTdGF0ZSIsInVybCIsImN1cnJlbnRCb29rU3RhdGUiLCJ1cGRhdGVkUGFnZXMiLCJ1cGRhdGVkQm9vayIsImxvYWRJbWFnZSIsInBhZ2VJbmRleCIsImFjdGlvblByb21wdCIsInJlZmVyZW5jZVRvVXNlIiwiaXNDb3ZlciIsInRleHRUb1JlbmRlciIsInVuZGVmaW5lZCIsImFydFN0eWxlIiwiZXJyIiwiaGFuZGxlUmVnZW5lcmF0ZUltYWdlIiwic3RvcFByb3BhZ2F0aW9uIiwiaW1hZ2VQcm9tcHQiLCJhbGVydCIsInByZXBhcmVFeHBvcnRDYW52YXMiLCJpbWdVcmwiLCJ3aWR0aCIsImhlaWdodCIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwiYmFja2dyb3VuZENvbG9yIiwib3ZlcmZsb3ciLCJpbm5lckhUTUwiLCJ0ZXh0IiwiYm9keSIsImFwcGVuZENoaWxkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY2FudmFzIiwic2NhbGUiLCJ1c2VDT1JTIiwicmVtb3ZlQ2hpbGQiLCJoYW5kbGVEb3dubG9hZFpJUCIsInppcCIsInBkZiIsInBhZ2VXaWR0aCIsImZpbGUiLCJKU09OIiwic3RyaW5naWZ5IiwicG5nQmxvYiIsInRvQmxvYiIsIlN0cmluZyIsInBhZFN0YXJ0IiwiaW1nRGF0YSIsInRvRGF0YVVSTCIsImNhbnZhc1JhdGlvIiwicGRmSW1nSGVpZ2h0IiwicmVuZGVyV2lkdGgiLCJyZW5kZXJIZWlnaHQiLCJ4T2Zmc2V0IiwiYWRkSW1hZ2UiLCJhZGRQYWdlIiwiYXVkaW9CdWYiLCJidWYiLCJwZGZCbG9iIiwib3V0cHV0IiwiY29udGVudCIsImdlbmVyYXRlQXN5bmMiLCJkcml2ZUxpbmtzIiwiaGFzRHJpdmVBY2Nlc3MiLCJ1cGxvYWRCb29rVG9Ecml2ZSIsImRyaXZlRXJyb3IiLCJ3YXJuIiwic2F2ZUJvb2tQcm9tcHRzIiwiYm9va1RpdGxlIiwibWFpbkNoYXJhY3RlciIsInRvcGljIiwibWFpblRoZW1lIiwiaW1hZ2VQcm9tcHRzIiwibWFwIiwiZHJpdmVaaXBVcmwiLCJ6aXBMaW5rIiwiZHJpdmVQZGZVcmwiLCJwZGZMaW5rIiwibG9nIiwiZmlyZWJhc2VFcnJvciIsImxpbmsiLCJocmVmIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwic2FmZVRpdGxlIiwicmVwbGFjZSIsImRvd25sb2FkIiwiY2xpY2siLCJzaG93TGlua3MiLCJjb25maXJtIiwiaGFuZGxlRG93bmxvYWRQREYiLCJyZWYiLCJ1cGxvYWRUb0RyaXZlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJyZXN1bHQiLCJ3ZWJWaWV3TGluayIsInNhdmUiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic3BhbiIsImRpc2FibGVkIiwiaW1nIiwic3JjIiwiaDMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./components/BookViewer.tsx\n");

/***/ }),

/***/ "(ssr)/./components/BooksGallery.tsx":
/*!*************************************!*\
  !*** ./components/BooksGallery.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/firebase */ \"(ssr)/./services/firebase.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nconst BooksGallery = ({ onClose })=>{\n    const [books, setBooks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BooksGallery.useEffect\": ()=>{\n            loadBooks();\n        }\n    }[\"BooksGallery.useEffect\"], []);\n    const loadBooks = async ()=>{\n        setLoading(true);\n        setError(null);\n        try {\n            const savedBooks = await (0,_services_firebase__WEBPACK_IMPORTED_MODULE_2__.getSavedBooks)();\n            // Sort by date, newest first\n            savedBooks.sort((a, b)=>b.createdAt.seconds - a.createdAt.seconds);\n            setBooks(savedBooks);\n        } catch (err) {\n            console.error('Error loading books:', err);\n            setError('  .  -Firebase Rules  .');\n        } finally{\n            setLoading(false);\n        }\n    };\n    const formatDate = (timestamp)=>{\n        const date = new Date(timestamp.seconds * 1000);\n        return date.toLocaleDateString('he-IL', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black/50 z-[150] flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-gradient-to-r from-kid-blue to-teal-400 px-6 py-4 flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white flex items-center gap-2\",\n                            children: \"\\uD83D\\uDCDA  \"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                            lineNumber: 51,\n                            columnNumber: 21\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-white hover:bg-white/20 rounded-full p-2 transition-colors\",\n                            children: \"\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                            lineNumber: 54,\n                            columnNumber: 21\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                    lineNumber: 50,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 overflow-y-auto p-6\",\n                    children: [\n                        loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col items-center justify-center py-12\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-12 h-12 border-4 border-kid-blue border-t-transparent rounded-full animate-spin mb-4\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 66,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-slate-500\",\n                                    children: \" ...\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 67,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                            lineNumber: 65,\n                            columnNumber: 25\n                        }, undefined),\n                        error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-red-50 border border-red-200 rounded-xl p-6 text-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-4xl mb-2 block\",\n                                    children: \"\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 73,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-red-600 font-bold mb-2\",\n                                    children: \"\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 74,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-red-500 text-sm\",\n                                    children: error\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 75,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: loadBooks,\n                                    className: \"mt-4 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm\",\n                                    children: \" \"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 76,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                            lineNumber: 72,\n                            columnNumber: 25\n                        }, undefined),\n                        !loading && !error && books.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-center py-12\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-6xl mb-4 block\",\n                                    children: \"\\uD83D\\uDCD6\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 87,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-slate-500 text-lg\",\n                                    children: \"   \"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 88,\n                                    columnNumber: 29\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-slate-400 text-sm mt-2\",\n                                    children: \"   \"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 89,\n                                    columnNumber: 29\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                            lineNumber: 86,\n                            columnNumber: 25\n                        }, undefined),\n                        !loading && !error && books.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\",\n                            children: books.map((book)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-gradient-to-br from-slate-50 to-slate-100 rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-shadow border border-slate-200\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"aspect-square bg-slate-200 relative\",\n                                            children: book.thumbnailUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: book.thumbnailUrl,\n                                                alt: book.title,\n                                                className: \"w-full h-full object-cover\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                lineNumber: 103,\n                                                columnNumber: 45\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"w-full h-full flex items-center justify-center text-6xl\",\n                                                children: \"\\uD83D\\uDCD5\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                lineNumber: 109,\n                                                columnNumber: 45\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                            lineNumber: 101,\n                                            columnNumber: 37\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"p-4\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                    className: \"font-bold text-slate-800 text-lg mb-1 truncate\",\n                                                    title: book.title,\n                                                    children: book.title\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                    lineNumber: 117,\n                                                    columnNumber: 41\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-slate-400 text-xs mb-3\",\n                                                    children: formatDate(book.createdAt)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                    lineNumber: 120,\n                                                    columnNumber: 41\n                                                }, undefined),\n                                                book.drivePdfUrl || book.driveZipUrl ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex flex-col gap-2\",\n                                                    children: [\n                                                        book.drivePdfUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                            href: book.drivePdfUrl,\n                                                            target: \"_blank\",\n                                                            rel: \"noopener noreferrer\",\n                                                            className: \"block w-full bg-kid-blue hover:bg-teal-400 text-white text-center py-2 rounded-lg font-bold text-sm transition-colors\",\n                                                            children: \"\\uD83D\\uDCC4 PDF -Drive\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                            lineNumber: 126,\n                                                            columnNumber: 53\n                                                        }, undefined),\n                                                        book.driveZipUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                            href: book.driveZipUrl,\n                                                            target: \"_blank\",\n                                                            rel: \"noopener noreferrer\",\n                                                            className: \"block w-full bg-kid-orange hover:bg-orange-400 text-white text-center py-2 rounded-lg font-bold text-sm transition-colors\",\n                                                            children: \"\\uD83D\\uDCE6 ZIP -Drive\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                            lineNumber: 136,\n                                                            columnNumber: 53\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                    lineNumber: 124,\n                                                    columnNumber: 45\n                                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-slate-400 text-xs text-center py-2\",\n                                                    children: \"\\uD83D\\uDCBE  -Firestore \"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                                    lineNumber: 147,\n                                                    columnNumber: 45\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                            lineNumber: 116,\n                                            columnNumber: 37\n                                        }, undefined)\n                                    ]\n                                }, book.id, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                                    lineNumber: 96,\n                                    columnNumber: 33\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                            lineNumber: 94,\n                            columnNumber: 25\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                    lineNumber: 63,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"border-t border-slate-100 px-6 py-4 bg-slate-50 text-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-slate-400 text-sm\",\n                        children: books.length > 0 ? `${books.length}  ` : '     '\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                        lineNumber: 160,\n                        columnNumber: 21\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n                    lineNumber: 159,\n                    columnNumber: 17\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n            lineNumber: 48,\n            columnNumber: 13\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\BooksGallery.tsx\",\n        lineNumber: 47,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BooksGallery);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVOzs4REFDWCw4REFBQ2M7b0RBQUdkLFdBQVU7b0RBQWlEYSxPQUFPTCxLQUFLSyxLQUFLOzhEQUMzRUwsS0FBS0ssS0FBSzs7Ozs7OzhEQUVmLDhEQUFDVDtvREFBRUosV0FBVTs4REFDUlgsV0FBV21CLEtBQUt2QixTQUFTOzs7Ozs7Z0RBRTdCdUIsS0FBS08sV0FBVyxJQUFJUCxLQUFLUSxXQUFXLGlCQUNqQyw4REFBQ2pCO29EQUFJQyxXQUFVOzt3REFDVlEsS0FBS08sV0FBVyxrQkFDYiw4REFBQ2hDOzREQUNHa0MsTUFBTVQsS0FBS08sV0FBVzs0REFDdEJHLFFBQU87NERBQ1BDLEtBQUk7NERBQ0puQixXQUFVO3NFQUNiOzs7Ozs7d0RBSUpRLEtBQUtRLFdBQVcsa0JBQ2IsOERBQUNqQzs0REFDR2tDLE1BQU1ULEtBQUtRLFdBQVc7NERBQ3RCRSxRQUFPOzREQUNQQyxLQUFJOzREQUNKbkIsV0FBVTtzRUFDYjs7Ozs7Ozs7Ozs7OEVBTVQsOERBQUNEO29EQUFJQyxXQUFVOzhEQUEwQzs7Ozs7Ozs7Ozs7OzttQ0FsRDVEUSxLQUFLWSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7OzhCQThEaEMsOERBQUNyQjtvQkFBSUMsV0FBVTs4QkFDWCw0RUFBQ0k7d0JBQUVKLFdBQVU7a0NBQ1IxQixNQUFNZ0MsTUFBTSxHQUFHLElBQUksR0FBR2hDLE1BQU1nQyxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNNUU7QUFFQSxpRUFBZWxDLFlBQVlBLEVBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcY29tcG9uZW50c1xcQm9va3NHYWxsZXJ5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IGdldFNhdmVkQm9va3MsIFNhdmVkQm9vayB9IGZyb20gJ0Avc2VydmljZXMvZmlyZWJhc2UnXHJcblxyXG5pbnRlcmZhY2UgQm9va3NHYWxsZXJ5UHJvcHMge1xyXG4gICAgb25DbG9zZTogKCkgPT4gdm9pZFxyXG59XHJcblxyXG5jb25zdCBCb29rc0dhbGxlcnk6IFJlYWN0LkZDPEJvb2tzR2FsbGVyeVByb3BzPiA9ICh7IG9uQ2xvc2UgfSkgPT4ge1xyXG4gICAgY29uc3QgW2Jvb2tzLCBzZXRCb29rc10gPSB1c2VTdGF0ZTxTYXZlZEJvb2tbXT4oW10pXHJcbiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKVxyXG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgbG9hZEJvb2tzKClcclxuICAgIH0sIFtdKVxyXG5cclxuICAgIGNvbnN0IGxvYWRCb29rcyA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpXHJcbiAgICAgICAgc2V0RXJyb3IobnVsbClcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZEJvb2tzID0gYXdhaXQgZ2V0U2F2ZWRCb29rcygpXHJcbiAgICAgICAgICAgIC8vIFNvcnQgYnkgZGF0ZSwgbmV3ZXN0IGZpcnN0XHJcbiAgICAgICAgICAgIHNhdmVkQm9va3Muc29ydCgoYSwgYikgPT4gYi5jcmVhdGVkQXQuc2Vjb25kcyAtIGEuY3JlYXRlZEF0LnNlY29uZHMpXHJcbiAgICAgICAgICAgIHNldEJvb2tzKHNhdmVkQm9va3MpXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgYm9va3M6JywgZXJyKVxyXG4gICAgICAgICAgICBzZXRFcnJvcign16nXkteZ15DXlCDXkdeY16LXmdeg16og15TXodek16jXmdedLiDXldeV15PXkCDXqdeULUZpcmViYXNlIFJ1bGVzINee15XXkteT16jXmdedINeg15vXldefLicpXHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybWF0RGF0ZSA9ICh0aW1lc3RhbXA6IHsgc2Vjb25kczogbnVtYmVyIH0pID0+IHtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wLnNlY29uZHMgKiAxMDAwKVxyXG4gICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnaGUtSUwnLCB7XHJcbiAgICAgICAgICAgIHllYXI6ICdudW1lcmljJyxcclxuICAgICAgICAgICAgbW9udGg6ICdsb25nJyxcclxuICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycsXHJcbiAgICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JyxcclxuICAgICAgICAgICAgbWludXRlOiAnMi1kaWdpdCdcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzUwIHotWzE1MF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC0zeGwgc2hhZG93LTJ4bCBtYXgtdy00eGwgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbFwiPlxyXG4gICAgICAgICAgICAgICAgey8qIEhlYWRlciAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JhZGllbnQtdG8tciBmcm9tLWtpZC1ibHVlIHRvLXRlYWwtNDAwIHB4LTYgcHktNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtd2hpdGUgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAg8J+TmiDXlNeh16TXqNeZ150g16nXnNeZXHJcbiAgICAgICAgICAgICAgICAgICAgPC9oMj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgaG92ZXI6Ymctd2hpdGUvMjAgcm91bmRlZC1mdWxsIHAtMiB0cmFuc2l0aW9uLWNvbG9yc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICDinJVcclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBDb250ZW50ICovfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtsb2FkaW5nICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweS0xMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEyIGgtMTIgYm9yZGVyLTQgYm9yZGVyLWtpZC1ibHVlIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW4gbWItNFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS01MDBcIj7XmNeV16LXnyDXodek16jXmdedLi4uPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7ZXJyb3IgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXJlZC01MCBib3JkZXIgYm9yZGVyLXJlZC0yMDAgcm91bmRlZC14bCBwLTYgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtNHhsIG1iLTIgYmxvY2tcIj7imqDvuI88L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgZm9udC1ib2xkIG1iLTJcIj7XqdeS15nXkNeUPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNTAwIHRleHQtc21cIj57ZXJyb3J9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2xvYWRCb29rc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC00IGJnLXJlZC01MDAgaG92ZXI6YmctcmVkLTYwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiByb3VuZGVkLWxnIHRleHQtc21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINeg16HXlCDXqdeV15FcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB7IWxvYWRpbmcgJiYgIWVycm9yICYmIGJvb2tzLmxlbmd0aCA9PT0gMCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcHktMTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtNnhsIG1iLTQgYmxvY2tcIj7wn5OWPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS01MDAgdGV4dC1sZ1wiPtei15PXmdeZ158g15zXkCDXmdem16jXqiDXodek16jXmdedPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS00MDAgdGV4dC1zbSBtdC0yXCI+16HXpNeo15nXnSDXqdeq15nXmdem15Ag15nXldek15nXoteVINeb15DXnzwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeyFsb2FkaW5nICYmICFlcnJvciAmJiBib29rcy5sZW5ndGggPiAwICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIGdhcC02XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ym9va3MubWFwKChib29rKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Jvb2suaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLWJyIGZyb20tc2xhdGUtNTAgdG8tc2xhdGUtMTAwIHJvdW5kZWQtMnhsIG92ZXJmbG93LWhpZGRlbiBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LXhsIHRyYW5zaXRpb24tc2hhZG93IGJvcmRlciBib3JkZXItc2xhdGUtMjAwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUaHVtYm5haWwgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXNwZWN0LXNxdWFyZSBiZy1zbGF0ZS0yMDAgcmVsYXRpdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib29rLnRodW1ibmFpbFVybCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17Ym9vay50aHVtYm5haWxVcmx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17Ym9vay50aXRsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LTZ4bFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5OVXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBJbmZvICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCB0ZXh0LWxnIG1iLTEgdHJ1bmNhdGVcIiB0aXRsZT17Ym9vay50aXRsZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Jvb2sudGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS00MDAgdGV4dC14cyBtYi0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdERhdGUoYm9vay5jcmVhdGVkQXQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Jvb2suZHJpdmVQZGZVcmwgfHwgYm9vay5kcml2ZVppcFVybCA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Jvb2suZHJpdmVQZGZVcmwgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXtib29rLmRyaXZlUGRmVXJsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIGJnLWtpZC1ibHVlIGhvdmVyOmJnLXRlYWwtNDAwIHRleHQtd2hpdGUgdGV4dC1jZW50ZXIgcHktMiByb3VuZGVkLWxnIGZvbnQtYm9sZCB0ZXh0LXNtIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5OEIFBERiDXkS1Ecml2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Ym9vay5kcml2ZVppcFVybCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e2Jvb2suZHJpdmVaaXBVcmx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB3LWZ1bGwgYmcta2lkLW9yYW5nZSBob3ZlcjpiZy1vcmFuZ2UtNDAwIHRleHQtd2hpdGUgdGV4dC1jZW50ZXIgcHktMiByb3VuZGVkLWxnIGZvbnQtYm9sZCB0ZXh0LXNtIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5OmIFpJUCDXkS1Ecml2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNDAwIHRleHQteHMgdGV4dC1jZW50ZXIgcHktMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5K+INep157XldeoINeRLUZpcmVzdG9yZSDXkdec15HXk1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBGb290ZXIgKi99XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci10IGJvcmRlci1zbGF0ZS0xMDAgcHgtNiBweS00IGJnLXNsYXRlLTUwIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS00MDAgdGV4dC1zbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Ym9va3MubGVuZ3RoID4gMCA/IGAke2Jvb2tzLmxlbmd0aH0g16HXpNeo15nXnSDXoNee16bXkNeVYCA6ICfXpteV16gg16HXpNeo15nXnSDXl9eT16nXmdedINeV15TXnSDXmdeV16TXmdei15Ug15vXkNefJ31cclxuICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJvb2tzR2FsbGVyeVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImdldFNhdmVkQm9va3MiLCJCb29rc0dhbGxlcnkiLCJvbkNsb3NlIiwiYm9va3MiLCJzZXRCb29rcyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsImxvYWRCb29rcyIsInNhdmVkQm9va3MiLCJzb3J0IiwiYSIsImIiLCJjcmVhdGVkQXQiLCJzZWNvbmRzIiwiZXJyIiwiY29uc29sZSIsImZvcm1hdERhdGUiLCJ0aW1lc3RhbXAiLCJkYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInllYXIiLCJtb250aCIsImRheSIsImhvdXIiLCJtaW51dGUiLCJkaXYiLCJjbGFzc05hbWUiLCJoMiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJwIiwic3BhbiIsImxlbmd0aCIsIm1hcCIsImJvb2siLCJ0aHVtYm5haWxVcmwiLCJpbWciLCJzcmMiLCJhbHQiLCJ0aXRsZSIsImgzIiwiZHJpdmVQZGZVcmwiLCJkcml2ZVppcFVybCIsImhyZWYiLCJ0YXJnZXQiLCJyZWwiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./components/BooksGallery.tsx\n");

/***/ }),

/***/ "(ssr)/./components/CreationForm.tsx":
/*!*************************************!*\
  !*** ./components/CreationForm.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/geminiService */ \"(ssr)/./services/geminiService.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nconst ART_STYLES = [\n    {\n        id: 'Random',\n        label: '  ',\n        value: 'Magical, colorful, commercial children\\'s book illustration style'\n    },\n    {\n        id: '3D',\n        label: ' - ',\n        value: 'Cute 3D animation style, Disney-light, glossy, vibrant colors, expressive eyes, magical atmosphere'\n    },\n    {\n        id: 'Watercolor',\n        label: '  ',\n        value: 'Bright watercolor illustration, defined lines, cheerful colors, magical storybook feel'\n    },\n    {\n        id: 'Anime',\n        label: '  ',\n        value: 'Chibi style anime, bright eyes, colorful backgrounds, kawaii aesthetic'\n    },\n    {\n        id: 'Paper',\n        label: '  ',\n        value: 'Colorful layered paper cutout art, 3D depth, craft aesthetic, bright lighting'\n    },\n    {\n        id: 'Clay',\n        label: ' ',\n        value: 'Plasticine claymation style, cute, rounded shapes, handmade texture, bright colors'\n    },\n    {\n        id: 'Pencil',\n        label: '  ',\n        value: 'Vibrant colored pencil drawing, detailed, happy, storybook illustration'\n    },\n    {\n        id: 'Pixel',\n        label: '  ',\n        value: 'Retro 8-bit pixel art, vibrant, arcade colors, cute'\n    },\n    {\n        id: 'Vector',\n        label: '  ',\n        value: 'Modern flat vector art, clean curves, bold saturated colors, geometric happiness'\n    }\n];\nconst VOICE_OPTIONS = [\n    {\n        id: 'Puck',\n        label: '   (Puck)',\n        gender: ''\n    },\n    {\n        id: 'Kore',\n        label: '   (Kore)',\n        gender: ''\n    },\n    {\n        id: 'Charon',\n        label: '   (Charon)',\n        gender: ''\n    },\n    {\n        id: 'Fenrir',\n        label: '   (Fenrir)',\n        gender: ''\n    },\n    {\n        id: 'Zephyr',\n        label: '   (Zephyr)',\n        gender: ''\n    }\n];\n// Estimated costs based on Gemini API pricing (approximate)\nconst COSTS = {\n    IMAGE: 0.04,\n    AUDIO_PAGE: 0.006,\n    TEXT_BASE: 0.02 // ~$0.02 fixed cost for prompt + output tokens (Gemini Pro)\n};\nconst readFileAsBase64 = (file)=>{\n    return new Promise((resolve, reject)=>{\n        const reader = new FileReader();\n        reader.onload = ()=>{\n            const result = reader.result;\n            // Remove data URL prefix (e.g., \"data:application/pdf;base64,\")\n            const base64 = result.split(',')[1];\n            resolve(base64);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n    });\n};\nconst CreationForm = ({ onSubmit, isLoading })=>{\n    const [mode, setMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('NEW');\n    const [ageRange, setAgeRange] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('3-8');\n    const [topic, setTopic] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [pageCount, setPageCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(15);\n    const [selectedStyle, setSelectedStyle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('3D');\n    const [isGeneratingIdea, setIsGeneratingIdea] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Audio State\n    const [audioEnabled, setAudioEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [selectedVoice, setSelectedVoice] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('Puck');\n    const [previewingVoice, setPreviewingVoice] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const activeSourceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [sequelContext, setSequelContext] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isAnalyzingPdf, setIsAnalyzingPdf] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Cleanup audio on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CreationForm.useEffect\": ()=>{\n            return ({\n                \"CreationForm.useEffect\": ()=>{\n                    if (activeSourceRef.current) {\n                        activeSourceRef.current.stop();\n                    }\n                    if (audioContextRef.current) {\n                        audioContextRef.current.close();\n                    }\n                }\n            })[\"CreationForm.useEffect\"];\n        }\n    }[\"CreationForm.useEffect\"], []);\n    // Calculate Cost\n    const costEstimate = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CreationForm.useMemo[costEstimate]\": ()=>{\n            const imagesCost = pageCount * COSTS.IMAGE;\n            const audioCost = audioEnabled ? pageCount * COSTS.AUDIO_PAGE : 0;\n            const total = imagesCost + audioCost + COSTS.TEXT_BASE;\n            return {\n                images: imagesCost.toFixed(2),\n                audio: audioCost.toFixed(2),\n                base: COSTS.TEXT_BASE.toFixed(2),\n                total: total.toFixed(2)\n            };\n        }\n    }[\"CreationForm.useMemo[costEstimate]\"], [\n        pageCount,\n        audioEnabled\n    ]);\n    const handlePlayPreview = async (voiceId, e)=>{\n        e.stopPropagation(); // Prevent selecting the card when clicking play\n        // Stop current preview\n        if (activeSourceRef.current) {\n            try {\n                activeSourceRef.current.stop();\n            } catch (err) {}\n            activeSourceRef.current = null;\n        }\n        // If clicking the same button, just stop (toggle off)\n        if (previewingVoice === voiceId) {\n            setPreviewingVoice(null);\n            return;\n        }\n        setPreviewingVoice(voiceId);\n        // Init Audio Context\n        if (!audioContextRef.current) {\n            audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)({\n                sampleRate: 24000\n            });\n        }\n        if (audioContextRef.current.state === 'suspended') {\n            await audioContextRef.current.resume();\n        }\n        try {\n            const buffer = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generatePageAudio)(\" !     !\", audioContextRef.current, voiceId);\n            // If the user hasn't clicked something else in the meantime\n            if (buffer) {\n                const source = audioContextRef.current.createBufferSource();\n                source.buffer = buffer;\n                source.connect(audioContextRef.current.destination);\n                source.onended = ()=>{\n                    if (previewingVoice === voiceId) {\n                        setPreviewingVoice(null);\n                    }\n                };\n                activeSourceRef.current = source;\n                source.start();\n            } else {\n                setPreviewingVoice(null);\n            }\n        } catch (error) {\n            console.error(\"Preview failed\", error);\n            setPreviewingVoice(null);\n        }\n    };\n    const handleFileUpload = async (e)=>{\n        const file = e.target.files?.[0];\n        if (!file) return;\n        if (file.type === 'application/json') {\n            const reader = new FileReader();\n            reader.onload = (event)=>{\n                try {\n                    const json = JSON.parse(event.target?.result);\n                    if (json.metadata && json.pages) {\n                        const fullStory = json.pages.map((p)=>p.hebrewText).join('\\n');\n                        setSequelContext({\n                            title: json.metadata.title,\n                            summary: fullStory,\n                            characterDescription: json.metadata.mainCharacterDescription,\n                            artStyle: json.metadata.artStyle,\n                            baseCharacterImage: json.metadata.baseCharacterImageUrl\n                        });\n                        setAgeRange(json.metadata.targetAge);\n                        setTopic(`   ${json.metadata.title}...`);\n                    } else {\n                        alert(\" JSON  .     .\");\n                    }\n                } catch (err) {\n                    alert(\"  \");\n                    console.error(err);\n                }\n            };\n            reader.readAsText(file);\n        } else if (file.type === 'application/pdf') {\n            setIsAnalyzingPdf(true);\n            try {\n                const base64 = await readFileAsBase64(file);\n                const context = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.analyzeBookPdf)(base64);\n                setSequelContext(context);\n                // Defaults since PDF extraction might not get these perfectly\n                setAgeRange('3-8');\n                setTopic(`   ${context.title}...`);\n            } catch (err) {\n                console.error(err);\n                alert(\"    -PDF.       JSON.\");\n            } finally{\n                setIsAnalyzingPdf(false);\n            }\n        } else {\n            alert(\"   JSON  PDF .\");\n        }\n    };\n    const handleSuggestIdea = async ()=>{\n        setIsGeneratingIdea(true);\n        try {\n            const idea = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_2__.generateStoryIdea)(ageRange, topic);\n            if (idea) {\n                setTopic(idea);\n            } else {\n                // Fallback if empty string returned but no error thrown (edge case)\n                alert(\"   .  .\");\n            }\n        } catch (e) {\n            console.error(e);\n            // If fatal error occurred, handleFatalError already dispatched event to App.tsx\n            // If not fatal, we show this alert.\n            alert(\"  .       .\");\n        } finally{\n            setIsGeneratingIdea(false);\n        }\n    };\n    const handleSubmit = (e)=>{\n        e.preventDefault();\n        // Determine art style: If Sequel, use previous. If New, use selected.\n        let finalArtStyle = 'Magical 3D';\n        if (mode === 'SEQUEL' && sequelContext) {\n            finalArtStyle = sequelContext.artStyle;\n        } else {\n            const styleObj = ART_STYLES.find((s)=>s.id === selectedStyle);\n            if (styleObj) finalArtStyle = styleObj.value;\n        }\n        // Default topics\n        let finalTopic = topic.trim();\n        if (!finalTopic) {\n            if (mode === 'SEQUEL' && sequelContext) {\n                finalTopic = `A continuation of the story '${sequelContext.title}'. Create a new adventure for the same main character.`;\n            } else {\n                finalTopic = `A creative, fun, and educational story suitable for children aged ${ageRange}. Surprise me!`;\n            }\n        }\n        onSubmit({\n            ageRange,\n            topic: finalTopic,\n            pageCount,\n            artStyle: finalArtStyle,\n            previousContext: mode === 'SEQUEL' && sequelContext ? sequelContext : undefined,\n            audioEnabled,\n            voiceName: selectedVoice\n        });\n    };\n    if (isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col items-center justify-center min-h-[60vh] text-center px-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"w-24 h-24 mb-8 relative\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute inset-0 border-8 border-kid-blue/20 rounded-full\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 255,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"absolute inset-0 border-8 border-kid-blue rounded-full border-t-transparent animate-spin\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 256,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                    lineNumber: 254,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                    className: \"text-3xl font-bold text-slate-800 mb-4\",\n                    children: \"Dreaming up your story...\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                    lineNumber: 258,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-slate-600 text-lg animate-pulse\",\n                    children: \"Crafting characters, writing rhymes, and preparing magic!\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                    lineNumber: 259,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-8 text-4xl animate-bounce\",\n                    children: \"\\uD83E\\uDE84\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                    lineNumber: 262,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n            lineNumber: 253,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"max-w-3xl mx-auto py-12 px-4 sm:px-6\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-[2.5rem] shadow-xl p-8 sm:p-12 border border-slate-100\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-3xl font-extrabold text-slate-800\",\n                            children: \"What shall we create today?\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 271,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center gap-4 mt-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>{\n                                        setMode('NEW');\n                                        setSequelContext(null);\n                                    },\n                                    className: `px-6 py-2 rounded-full font-bold transition-all ${mode === 'NEW' ? 'bg-kid-blue text-white shadow-lg' : 'bg-slate-100 text-slate-500'}`,\n                                    children: \"  \"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 275,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setMode('SEQUEL'),\n                                    className: `px-6 py-2 rounded-full font-bold transition-all ${mode === 'SEQUEL' ? 'bg-kid-orange text-white shadow-lg' : 'bg-slate-100 text-slate-500'}`,\n                                    children: \"  \\uD83D\\uDD04\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 281,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 274,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                    lineNumber: 270,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleSubmit,\n                    className: \"space-y-8\",\n                    children: [\n                        mode === 'SEQUEL' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-orange-50 border-2 border-orange-100 rounded-2xl p-6 text-center animate-fade-in relative overflow-hidden\",\n                            children: [\n                                isAnalyzingPdf && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute inset-0 bg-white/80 z-10 flex flex-col items-center justify-center\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-10 h-10 border-4 border-kid-orange border-t-transparent rounded-full animate-spin mb-2\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 296,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-kid-orange font-bold\",\n                                            children: \"  ...\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 297,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 295,\n                                    columnNumber: 17\n                                }, undefined),\n                                !sequelContext ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-4xl mb-3\",\n                                            children: \"\\uD83D\\uDCC2\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 303,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                            className: \"text-xl font-bold text-slate-700 mb-2\",\n                                            children: \"   \"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 304,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-slate-500 mb-4 text-sm\",\n                                            children: \"   -JSON  PDF   .\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 305,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"file\",\n                                            accept: \".json,.pdf\",\n                                            onChange: handleFileUpload,\n                                            className: \"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-kid-orange file:text-white hover:file:bg-orange-600 cursor-pointer mx-auto max-w-xs\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 306,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-4 text-left bg-white p-4 rounded-xl border border-orange-200\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-3xl\",\n                                            children: \"\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 321,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex-1\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"font-bold text-slate-800\",\n                                                    children: [\n                                                        \" : \",\n                                                        sequelContext.title\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 323,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-xs text-slate-500\",\n                                                    children: \"  !\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 324,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 322,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setSequelContext(null),\n                                            className: \"ml-auto text-xs text-red-500 underline\",\n                                            children: \"\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 326,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 320,\n                                    columnNumber: 17\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 293,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-lg font-bold text-slate-700 mb-3\",\n                                    children: \"Target Age Group\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 340,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"grid grid-cols-3 gap-4\",\n                                    children: [\n                                        '3-8',\n                                        '9-12',\n                                        '13-16'\n                                    ].map((age)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setAgeRange(age),\n                                            className: `py-3 px-4 rounded-2xl font-bold text-lg transition-all ${ageRange === age ? 'bg-kid-blue text-white shadow-lg scale-105' : 'bg-slate-100 text-slate-500 hover:bg-slate-200'}`,\n                                            children: age\n                                        }, age, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 345,\n                                            columnNumber: 17\n                                        }, undefined))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 343,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 339,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: mode === 'SEQUEL' && sequelContext ? 'opacity-50 pointer-events-none grayscale' : '',\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between items-center mb-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"block text-lg font-bold text-slate-700\",\n                                            children: \"Art Style\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 363,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        mode === 'SEQUEL' && sequelContext && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded font-bold\",\n                                            children: \"   \"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 367,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 362,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"grid grid-cols-2 sm:grid-cols-3 gap-3\",\n                                    children: ART_STYLES.map((style)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setSelectedStyle(style.id),\n                                            className: `py-2 px-3 rounded-xl font-bold text-sm sm:text-base transition-all border-2 ${selectedStyle === style.id ? 'bg-white border-kid-orange text-kid-orange shadow-md scale-105' : 'bg-slate-50 border-transparent text-slate-600 hover:bg-slate-100'}`,\n                                            children: style.label\n                                        }, style.id, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 374,\n                                            columnNumber: 17\n                                        }, undefined))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 372,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 361,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-blue-50 border border-blue-100 rounded-2xl p-5\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-between mb-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center gap-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-2xl\",\n                                                    children: \"\\uD83D\\uDD0A\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 393,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                                            className: \"block text-lg font-bold text-slate-700\",\n                                                            children: \" \"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                            lineNumber: 395,\n                                                            columnNumber: 19\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-xs text-slate-500\",\n                                                            children: \"    \"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                            lineNumber: 398,\n                                                            columnNumber: 19\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 394,\n                                                    columnNumber: 17\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 392,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setAudioEnabled(!audioEnabled),\n                                            className: `w-14 h-8 rounded-full transition-colors relative ${audioEnabled ? 'bg-kid-blue' : 'bg-slate-300'}`,\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: `absolute top-1 w-6 h-6 bg-white rounded-full transition-all shadow-sm ${audioEnabled ? 'left-1' : 'left-7'}`\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                lineNumber: 408,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 403,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 391,\n                                    columnNumber: 13\n                                }, undefined),\n                                audioEnabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"animate-fade-in grid grid-cols-1 gap-3 mt-3 border-t border-blue-100 pt-3\",\n                                    children: VOICE_OPTIONS.map((voice)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            onClick: ()=>setSelectedVoice(voice.id),\n                                            className: `flex items-center justify-between p-3 rounded-xl transition-all border cursor-pointer ${selectedVoice === voice.id ? 'bg-white border-kid-blue text-kid-blue shadow-md' : 'bg-blue-50/50 border-transparent text-slate-600 hover:bg-blue-100'}`,\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex items-center gap-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: `w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 ${selectedVoice === voice.id ? 'border-kid-blue' : 'border-slate-400'}`,\n                                                            children: selectedVoice === voice.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"w-2.5 h-2.5 rounded-full bg-kid-blue\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                                lineNumber: 426,\n                                                                columnNumber: 56\n                                                            }, undefined)\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                            lineNumber: 425,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"flex flex-col items-start\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                    className: \"font-bold text-base\",\n                                                                    children: voice.label\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                                    lineNumber: 429,\n                                                                    columnNumber: 25\n                                                                }, undefined),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                    className: \"text-xs opacity-70 bg-slate-200/50 px-2 py-0.5 rounded-md mt-1\",\n                                                                    children: voice.gender\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                                    lineNumber: 430,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                            lineNumber: 428,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 424,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    type: \"button\",\n                                                    onClick: (e)=>handlePlayPreview(voice.id, e),\n                                                    className: `w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 hover:bg-blue-200 transition-colors ${previewingVoice === voice.id ? 'text-kid-orange animate-pulse bg-blue-100' : 'text-slate-500'}`,\n                                                    title: \" \",\n                                                    children: previewingVoice === voice.id ? // Stop Icon / Spinner\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xl\",\n                                                        children: \"\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                        lineNumber: 442,\n                                                        columnNumber: 25\n                                                    }, undefined) : // Play Icon\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xl\",\n                                                        children: \"\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                        lineNumber: 445,\n                                                        columnNumber: 25\n                                                    }, undefined)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 434,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, voice.id, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 416,\n                                            columnNumber: 19\n                                        }, undefined))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 414,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 390,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between items-center mb-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"block text-lg font-bold text-slate-700\",\n                                            children: \"Story Length\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 457,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"bg-kid-blue/10 text-kid-blue px-3 py-1 rounded-full font-bold text-sm\",\n                                            children: [\n                                                pageCount,\n                                                \" \",\n                                                pageCount === 1 ? 'Page' : 'Pages'\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 460,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 456,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"range\",\n                                    min: \"1\",\n                                    max: \"20\",\n                                    value: pageCount,\n                                    onChange: (e)=>setPageCount(parseInt(e.target.value)),\n                                    className: \"w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-kid-blue hover:bg-slate-300 transition-colors\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 465,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between text-sm text-slate-400 mt-2 font-medium px-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"Short (1)\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 474,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"Long (20)\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 475,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 473,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 455,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between items-end mb-3\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            htmlFor: \"topic\",\n                                            className: \"block text-lg font-bold text-slate-700\",\n                                            children: \"What is the story about?\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 482,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        mode === 'NEW' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: handleSuggestIdea,\n                                            disabled: isGeneratingIdea,\n                                            className: \"text-sm bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1.5 rounded-full font-bold shadow-md hover:shadow-lg transition-transform transform hover:-translate-y-0.5 flex items-center gap-1 disabled:opacity-50\",\n                                            children: isGeneratingIdea ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                        lineNumber: 495,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    \"...\"\n                                                ]\n                                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        children: \"\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                        lineNumber: 500,\n                                                        columnNumber: 23\n                                                    }, undefined),\n                                                    \"   \"\n                                                ]\n                                            }, void 0, true)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 487,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 481,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                    id: \"topic\",\n                                    rows: 4,\n                                    value: topic,\n                                    onChange: (e)=>setTopic(e.target.value),\n                                    placeholder: \"e.g., A brave turtle who wants to fly... OR leave blank for a surprise!\",\n                                    className: \"w-full bg-slate-50 border-2 border-slate-200 rounded-2xl p-4 text-lg focus:border-kid-blue focus:ring-0 outline-none transition-colors\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 506,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-slate-400 mt-2 text-right\",\n                                    children: \":       ,   !\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 514,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 480,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-slate-800 text-white p-5 rounded-2xl shadow-lg border-2 border-slate-700\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                    className: \"text-lg font-bold mb-3 flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"\\uD83D\\uDCB0\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 522,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        \"  \"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 521,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-2 text-sm text-slate-300\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex justify-between\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: [\n                                                        \" (\",\n                                                        pageCount,\n                                                        \" )\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 526,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: [\n                                                        \"$\",\n                                                        costEstimate.images\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 527,\n                                                    columnNumber: 17\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 525,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        audioEnabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex justify-between\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: \" (TTS)\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 531,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: [\n                                                        \"$\",\n                                                        costEstimate.audio\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 532,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 530,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex justify-between\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: \" \"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 536,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: [\n                                                        \"$\",\n                                                        costEstimate.base\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 537,\n                                                    columnNumber: 17\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 535,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"h-px bg-slate-600 my-2\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 539,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex justify-between text-xl font-bold text-kid-yellow\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: '\"'\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 541,\n                                                    columnNumber: 17\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    children: [\n                                                        \"$\",\n                                                        costEstimate.total\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                                    lineNumber: 542,\n                                                    columnNumber: 17\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                            lineNumber: 540,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 524,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-[10px] text-slate-500 mt-3 text-center\",\n                                    children: \"*     Gemini API .     -Google Cloud .\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                                    lineNumber: 545,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 520,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"submit\",\n                            disabled: mode === 'SEQUEL' && !sequelContext,\n                            className: \"w-full bg-kid-yellow hover:bg-yellow-400 text-kid-text text-xl font-bold py-5 rounded-2xl shadow-lg transform transition hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed\",\n                            children: mode === 'SEQUEL' ? 'Create Sequel! ' : topic.trim() ? 'Create My Book! ' : 'Surprise Me! '\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                            lineNumber: 550,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n                    lineNumber: 290,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n            lineNumber: 269,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\CreationForm.tsx\",\n        lineNumber: 268,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CreationForm);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDhEQUFDQTs7d0RBQUs7d0RBQUV6RSxhQUFhTSxLQUFLOzs7Ozs7Ozs7Ozs7O3NEQUc5Qiw4REFBQzZEOzRDQUFJQyxXQUFVOzs4REFDYiw4REFBQ0s7OERBQUs7Ozs7Ozs4REFDTiw4REFBQ0E7O3dEQUFLO3dEQUFFekUsYUFBYU8sSUFBSTs7Ozs7Ozs7Ozs7OztzREFFM0IsOERBQUM0RDs0Q0FBSUMsV0FBVTs7Ozs7O3NEQUNmLDhEQUFDRDs0Q0FBSUMsV0FBVTs7OERBQ2IsOERBQUNLOzhEQUFLOzs7Ozs7OERBQ04sOERBQUNBOzt3REFBSzt3REFBRXpFLGFBQWFHLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OENBRzlCLDhEQUFDcUM7b0NBQUU0QixXQUFVOzhDQUE4Qzs7Ozs7Ozs7Ozs7O3NDQUs3RCw4REFBQ0U7NEJBQ0N2QyxNQUFLOzRCQUNMc0QsVUFBVWhILFNBQVMsWUFBWSxDQUFDb0I7NEJBQ2hDMkUsV0FBVTtzQ0FFVC9GLFNBQVMsV0FBVyxzQkFBdUJJLE1BQU1zRixJQUFJLEtBQUssdUJBQXVCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU05RjtBQUVBLGlFQUFlN0YsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMRU5PVk9cXERlc2t0b3BcXHNoYWhhclxcYm9va2FpXFxjb21wb25lbnRzXFxDcmVhdGlvbkZvcm0udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBCb29rUmVxdWVzdCwgQm9vaywgUHJldmlvdXNCb29rQ29udGV4dCB9IGZyb20gJ0AvdHlwZXMnXG5pbXBvcnQgeyBhbmFseXplQm9va1BkZiwgZ2VuZXJhdGVQYWdlQXVkaW8sIGdlbmVyYXRlU3RvcnlJZGVhIH0gZnJvbSAnQC9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlJ1xuXG5pbnRlcmZhY2UgQ3JlYXRpb25Gb3JtUHJvcHMge1xuICBvblN1Ym1pdDogKHJlcXVlc3Q6IEJvb2tSZXF1ZXN0KSA9PiB2b2lkO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG59XG5cbmNvbnN0IEFSVF9TVFlMRVMgPSBbXG4gIHsgaWQ6ICdSYW5kb20nLCBsYWJlbDogJ/CfjrIg15TXpNeq16Ig15DXldeq15knLCB2YWx1ZTogJ01hZ2ljYWwsIGNvbG9yZnVsLCBjb21tZXJjaWFsIGNoaWxkcmVuXFwncyBib29rIGlsbHVzdHJhdGlvbiBzdHlsZScgfSxcbiAgeyBpZDogJzNEJywgbGFiZWw6ICfwn6e4INeq15zXqi3Xntee15Mg16fXodeV150nLCB2YWx1ZTogJ0N1dGUgM0QgYW5pbWF0aW9uIHN0eWxlLCBEaXNuZXktbGlnaHQsIGdsb3NzeSwgdmlicmFudCBjb2xvcnMsIGV4cHJlc3NpdmUgZXllcywgbWFnaWNhbCBhdG1vc3BoZXJlJyB9LFxuICB7IGlkOiAnV2F0ZXJjb2xvcicsIGxhYmVsOiAn8J+OqCDXpteR16LXmSDXnteZ150nLCB2YWx1ZTogJ0JyaWdodCB3YXRlcmNvbG9yIGlsbHVzdHJhdGlvbiwgZGVmaW5lZCBsaW5lcywgY2hlZXJmdWwgY29sb3JzLCBtYWdpY2FsIHN0b3J5Ym9vayBmZWVsJyB9LFxuICB7IGlkOiAnQW5pbWUnLCBsYWJlbDogJ/Cfjowg15DXoNeZ157XlCDXl9ee15XXkycsIHZhbHVlOiAnQ2hpYmkgc3R5bGUgYW5pbWUsIGJyaWdodCBleWVzLCBjb2xvcmZ1bCBiYWNrZ3JvdW5kcywga2F3YWlpIGFlc3RoZXRpYycgfSxcbiAgeyBpZDogJ1BhcGVyJywgbGFiZWw6ICfinILvuI8g15LXlteo15kg16DXmdeZ16gnLCB2YWx1ZTogJ0NvbG9yZnVsIGxheWVyZWQgcGFwZXIgY3V0b3V0IGFydCwgM0QgZGVwdGgsIGNyYWZ0IGFlc3RoZXRpYywgYnJpZ2h0IGxpZ2h0aW5nJyB9LFxuICB7IGlkOiAnQ2xheScsIGxhYmVsOiAn8J+PuiDXpNec16HXmNec15nXoNeUJywgdmFsdWU6ICdQbGFzdGljaW5lIGNsYXltYXRpb24gc3R5bGUsIGN1dGUsIHJvdW5kZWQgc2hhcGVzLCBoYW5kbWFkZSB0ZXh0dXJlLCBicmlnaHQgY29sb3JzJyB9LFxuICB7IGlkOiAnUGVuY2lsJywgbGFiZWw6ICfinI/vuI8g15DXmdeV16gg16bXkdei15XXoNeZJywgdmFsdWU6ICdWaWJyYW50IGNvbG9yZWQgcGVuY2lsIGRyYXdpbmcsIGRldGFpbGVkLCBoYXBweSwgc3Rvcnlib29rIGlsbHVzdHJhdGlvbicgfSxcbiAgeyBpZDogJ1BpeGVsJywgbGFiZWw6ICfwn5G+INek15nXp9eh15wg15DXqNeYJywgdmFsdWU6ICdSZXRybyA4LWJpdCBwaXhlbCBhcnQsIHZpYnJhbnQsIGFyY2FkZSBjb2xvcnMsIGN1dGUnIH0sXG4gIHsgaWQ6ICdWZWN0b3InLCBsYWJlbDogJ/CflLcg15XXp9eY15XXqNeZINee15XXk9eo16DXmScsIHZhbHVlOiAnTW9kZXJuIGZsYXQgdmVjdG9yIGFydCwgY2xlYW4gY3VydmVzLCBib2xkIHNhdHVyYXRlZCBjb2xvcnMsIGdlb21ldHJpYyBoYXBwaW5lc3MnIH0sXG5dO1xuXG5jb25zdCBWT0lDRV9PUFRJT05TID0gW1xuICB7IGlkOiAnUHVjaycsIGxhYmVsOiAn8J+koSDXqdeV15HXkSDXlden15zXmdecIChQdWNrKScsIGdlbmRlcjogJ9eW15vXqCcgfSxcbiAgeyBpZDogJ0tvcmUnLCBsYWJlbDogJ/CfjLgg16LXk9eZ158g15XXnteo15LXmdeiIChLb3JlKScsIGdlbmRlcjogJ9eg16fXkdeUJyB9LFxuICB7IGlkOiAnQ2hhcm9uJywgbGFiZWw6ICfwn6aBINei157XldenINeV16HXnteb15XXqteZIChDaGFyb24pJywgZ2VuZGVyOiAn15bXm9eoJyB9LFxuICB7IGlkOiAnRmVucmlyJywgbGFiZWw6ICfimqEg15fXltenINeV15DXoNeo15LXmNeZIChGZW5yaXIpJywgZ2VuZGVyOiAn15bXm9eoJyB9LFxuICB7IGlkOiAnWmVwaHlyJywgbGFiZWw6ICfwn42DINeo15og15XXnteQ15XXltefIChaZXBoeXIpJywgZ2VuZGVyOiAn16DXp9eR15QnIH0sXG5dO1xuXG4vLyBFc3RpbWF0ZWQgY29zdHMgYmFzZWQgb24gR2VtaW5pIEFQSSBwcmljaW5nIChhcHByb3hpbWF0ZSlcbmNvbnN0IENPU1RTID0ge1xuICBJTUFHRTogMC4wNCwgLy8gfiQwLjA0IHBlciBJbWFnZW4gMyBnZW5lcmF0aW9uXG4gIEFVRElPX1BBR0U6IDAuMDA2LCAvLyB+JDAuMDA2IHBlciBwYWdlIChhc3N1bWluZyB+MzAwIGNoYXJzIEAgJDE1LzFNIGNoYXJzKVxuICBURVhUX0JBU0U6IDAuMDIgLy8gfiQwLjAyIGZpeGVkIGNvc3QgZm9yIHByb21wdCArIG91dHB1dCB0b2tlbnMgKEdlbWluaSBQcm8pXG59O1xuXG5jb25zdCByZWFkRmlsZUFzQmFzZTY0ID0gKGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgLy8gUmVtb3ZlIGRhdGEgVVJMIHByZWZpeCAoZS5nLiwgXCJkYXRhOmFwcGxpY2F0aW9uL3BkZjtiYXNlNjQsXCIpXG4gICAgICBjb25zdCBiYXNlNjQgPSByZXN1bHQuc3BsaXQoJywnKVsxXTtcbiAgICAgIHJlc29sdmUoYmFzZTY0KTtcbiAgICB9O1xuICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICB9KTtcbn07XG5cbmNvbnN0IENyZWF0aW9uRm9ybTogUmVhY3QuRkM8Q3JlYXRpb25Gb3JtUHJvcHM+ID0gKHsgb25TdWJtaXQsIGlzTG9hZGluZyB9KSA9PiB7XG4gIGNvbnN0IFttb2RlLCBzZXRNb2RlXSA9IHVzZVN0YXRlPCdORVcnIHwgJ1NFUVVFTCc+KCdORVcnKTtcbiAgY29uc3QgW2FnZVJhbmdlLCBzZXRBZ2VSYW5nZV0gPSB1c2VTdGF0ZSgnMy04Jyk7XG4gIGNvbnN0IFt0b3BpYywgc2V0VG9waWNdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbcGFnZUNvdW50LCBzZXRQYWdlQ291bnRdID0gdXNlU3RhdGU8bnVtYmVyPigxNSk7XG4gIGNvbnN0IFtzZWxlY3RlZFN0eWxlLCBzZXRTZWxlY3RlZFN0eWxlXSA9IHVzZVN0YXRlPHN0cmluZz4oJzNEJyk7XG4gIGNvbnN0IFtpc0dlbmVyYXRpbmdJZGVhLCBzZXRJc0dlbmVyYXRpbmdJZGVhXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBBdWRpbyBTdGF0ZVxuICBjb25zdCBbYXVkaW9FbmFibGVkLCBzZXRBdWRpb0VuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFZvaWNlLCBzZXRTZWxlY3RlZFZvaWNlXSA9IHVzZVN0YXRlKCdQdWNrJyk7XG4gIGNvbnN0IFtwcmV2aWV3aW5nVm9pY2UsIHNldFByZXZpZXdpbmdWb2ljZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9Db250ZXh0UmVmID0gdXNlUmVmPEF1ZGlvQ29udGV4dCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBhY3RpdmVTb3VyY2VSZWYgPSB1c2VSZWY8QXVkaW9CdWZmZXJTb3VyY2VOb2RlIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW3NlcXVlbENvbnRleHQsIHNldFNlcXVlbENvbnRleHRdID0gdXNlU3RhdGU8UHJldmlvdXNCb29rQ29udGV4dCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNBbmFseXppbmdQZGYsIHNldElzQW5hbHl6aW5nUGRmXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBDbGVhbnVwIGF1ZGlvIG9uIHVubW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGFjdGl2ZVNvdXJjZVJlZi5jdXJyZW50KSB7XG4gICAgICAgIGFjdGl2ZVNvdXJjZVJlZi5jdXJyZW50LnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdWRpb0NvbnRleHRSZWYuY3VycmVudCkge1xuICAgICAgICBhdWRpb0NvbnRleHRSZWYuY3VycmVudC5jbG9zZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBDYWxjdWxhdGUgQ29zdFxuICBjb25zdCBjb3N0RXN0aW1hdGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBpbWFnZXNDb3N0ID0gcGFnZUNvdW50ICogQ09TVFMuSU1BR0U7XG4gICAgY29uc3QgYXVkaW9Db3N0ID0gYXVkaW9FbmFibGVkID8gcGFnZUNvdW50ICogQ09TVFMuQVVESU9fUEFHRSA6IDA7XG4gICAgY29uc3QgdG90YWwgPSBpbWFnZXNDb3N0ICsgYXVkaW9Db3N0ICsgQ09TVFMuVEVYVF9CQVNFO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGltYWdlczogaW1hZ2VzQ29zdC50b0ZpeGVkKDIpLFxuICAgICAgYXVkaW86IGF1ZGlvQ29zdC50b0ZpeGVkKDIpLFxuICAgICAgYmFzZTogQ09TVFMuVEVYVF9CQVNFLnRvRml4ZWQoMiksXG4gICAgICB0b3RhbDogdG90YWwudG9GaXhlZCgyKVxuICAgIH07XG4gIH0sIFtwYWdlQ291bnQsIGF1ZGlvRW5hYmxlZF0pO1xuXG4gIGNvbnN0IGhhbmRsZVBsYXlQcmV2aWV3ID0gYXN5bmMgKHZvaWNlSWQ6IHN0cmluZywgZTogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFByZXZlbnQgc2VsZWN0aW5nIHRoZSBjYXJkIHdoZW4gY2xpY2tpbmcgcGxheVxuXG4gICAgLy8gU3RvcCBjdXJyZW50IHByZXZpZXdcbiAgICBpZiAoYWN0aXZlU291cmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyeSB7IGFjdGl2ZVNvdXJjZVJlZi5jdXJyZW50LnN0b3AoKTsgfSBjYXRjaCAoZXJyKSB7IH1cbiAgICAgIGFjdGl2ZVNvdXJjZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBJZiBjbGlja2luZyB0aGUgc2FtZSBidXR0b24sIGp1c3Qgc3RvcCAodG9nZ2xlIG9mZilcbiAgICBpZiAocHJldmlld2luZ1ZvaWNlID09PSB2b2ljZUlkKSB7XG4gICAgICBzZXRQcmV2aWV3aW5nVm9pY2UobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2V0UHJldmlld2luZ1ZvaWNlKHZvaWNlSWQpO1xuXG4gICAgLy8gSW5pdCBBdWRpbyBDb250ZXh0XG4gICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCkge1xuICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dCkoeyBzYW1wbGVSYXRlOiAyNDAwMCB9KTtcbiAgICB9XG4gICAgaWYgKGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LnN0YXRlID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgYXdhaXQgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQucmVzdW1lKCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGdlbmVyYXRlUGFnZUF1ZGlvKFwi16nXnNeV150g15nXnNeT15nXnSEg15HXldeQ15Ug16DXpteQINec15TXqNek16rXp9eUINen16HXldee15Qg15HXmdeX15MhXCIsIGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LCB2b2ljZUlkKTtcblxuICAgICAgLy8gSWYgdGhlIHVzZXIgaGFzbid0IGNsaWNrZWQgc29tZXRoaW5nIGVsc2UgaW4gdGhlIG1lYW50aW1lXG4gICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBzb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChhdWRpb0NvbnRleHRSZWYuY3VycmVudC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgc291cmNlLm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHByZXZpZXdpbmdWb2ljZSA9PT0gdm9pY2VJZCkge1xuICAgICAgICAgICAgc2V0UHJldmlld2luZ1ZvaWNlKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBhY3RpdmVTb3VyY2VSZWYuY3VycmVudCA9IHNvdXJjZTtcbiAgICAgICAgc291cmNlLnN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRQcmV2aWV3aW5nVm9pY2UobnVsbCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJQcmV2aWV3IGZhaWxlZFwiLCBlcnJvcik7XG4gICAgICBzZXRQcmV2aWV3aW5nVm9pY2UobnVsbCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVVcGxvYWQgPSBhc3luYyAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgIGlmIChmaWxlLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9qc29uJykge1xuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShldmVudC50YXJnZXQ/LnJlc3VsdCBhcyBzdHJpbmcpIGFzIEJvb2s7XG4gICAgICAgICAgaWYgKGpzb24ubWV0YWRhdGEgJiYganNvbi5wYWdlcykge1xuICAgICAgICAgICAgY29uc3QgZnVsbFN0b3J5ID0ganNvbi5wYWdlcy5tYXAocCA9PiBwLmhlYnJld1RleHQpLmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgc2V0U2VxdWVsQ29udGV4dCh7XG4gICAgICAgICAgICAgIHRpdGxlOiBqc29uLm1ldGFkYXRhLnRpdGxlLFxuICAgICAgICAgICAgICBzdW1tYXJ5OiBmdWxsU3RvcnksXG4gICAgICAgICAgICAgIGNoYXJhY3RlckRlc2NyaXB0aW9uOiBqc29uLm1ldGFkYXRhLm1haW5DaGFyYWN0ZXJEZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgYXJ0U3R5bGU6IGpzb24ubWV0YWRhdGEuYXJ0U3R5bGUsXG4gICAgICAgICAgICAgIGJhc2VDaGFyYWN0ZXJJbWFnZToganNvbi5tZXRhZGF0YS5iYXNlQ2hhcmFjdGVySW1hZ2VVcmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0QWdlUmFuZ2UoanNvbi5tZXRhZGF0YS50YXJnZXRBZ2UpO1xuICAgICAgICAgICAgc2V0VG9waWMoYNeU16jXpNeq16fXlCDXl9eT16nXlCDXqdecICR7anNvbi5tZXRhZGF0YS50aXRsZX0uLi5gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQoXCLXp9eV15HXpSBKU09OINec15Ag16rXp9eZ158uINeg15Ag15zXlNei15zXldeqINen15XXkdelINep16DXldem16gg15HXkNek15zXmden16bXmdeULlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGFsZXJ0KFwi16nXkteZ15DXlCDXkden16jXmdeQ16og15TXp9eV15HXpVwiKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICB9IGVsc2UgaWYgKGZpbGUudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpIHtcbiAgICAgIHNldElzQW5hbHl6aW5nUGRmKHRydWUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmFzZTY0ID0gYXdhaXQgcmVhZEZpbGVBc0Jhc2U2NChmaWxlKTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGF3YWl0IGFuYWx5emVCb29rUGRmKGJhc2U2NCk7XG4gICAgICAgIHNldFNlcXVlbENvbnRleHQoY29udGV4dCk7XG4gICAgICAgIC8vIERlZmF1bHRzIHNpbmNlIFBERiBleHRyYWN0aW9uIG1pZ2h0IG5vdCBnZXQgdGhlc2UgcGVyZmVjdGx5XG4gICAgICAgIHNldEFnZVJhbmdlKCczLTgnKTtcbiAgICAgICAgc2V0VG9waWMoYNeU16jXpNeq16fXlCDXl9eT16nXlCDXqdecICR7Y29udGV4dC50aXRsZX0uLi5gKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIGFsZXJ0KFwi15zXkCDXlNem15zXl9eg15Ug15zXoNeq15cg15DXqiDXlC1QREYuINeQ16DXkCDXoNeh15Qg16nXldeRINeQ15Ug15TXqdeq157XqSDXkden15XXkdelIEpTT04uXCIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNBbmFseXppbmdQZGYoZmFsc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChcIteg15Ag15zXlNei15zXldeqINen15XXkdelIEpTT04g15DXlSBQREYg15HXnNeR15MuXCIpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdWdnZXN0SWRlYSA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRJc0dlbmVyYXRpbmdJZGVhKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpZGVhID0gYXdhaXQgZ2VuZXJhdGVTdG9yeUlkZWEoYWdlUmFuZ2UsIHRvcGljKTtcbiAgICAgIGlmIChpZGVhKSB7XG4gICAgICAgIHNldFRvcGljKGlkZWEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgaWYgZW1wdHkgc3RyaW5nIHJldHVybmVkIGJ1dCBubyBlcnJvciB0aHJvd24gKGVkZ2UgY2FzZSlcbiAgICAgICAgYWxlcnQoXCLXnNeQINeU16bXnNeX16DXlSDXnNeZ15nXpteoINeo16LXmdeV158uINeg16HXlCDXqdeV15EuXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAvLyBJZiBmYXRhbCBlcnJvciBvY2N1cnJlZCwgaGFuZGxlRmF0YWxFcnJvciBhbHJlYWR5IGRpc3BhdGNoZWQgZXZlbnQgdG8gQXBwLnRzeFxuICAgICAgLy8gSWYgbm90IGZhdGFsLCB3ZSBzaG93IHRoaXMgYWxlcnQuXG4gICAgICBhbGVydChcItep15LXmdeQ15Qg15HXmdem15nXqNeqINeU16jXoteZ15XXny4g15DXoNeQINeR15PXldenINeQ16og15TXl9eZ15HXldeoINeQ15Ug16DXodeUINep15XXkS5cIik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzR2VuZXJhdGluZ0lkZWEoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGFydCBzdHlsZTogSWYgU2VxdWVsLCB1c2UgcHJldmlvdXMuIElmIE5ldywgdXNlIHNlbGVjdGVkLlxuICAgIGxldCBmaW5hbEFydFN0eWxlID0gJ01hZ2ljYWwgM0QnO1xuXG4gICAgaWYgKG1vZGUgPT09ICdTRVFVRUwnICYmIHNlcXVlbENvbnRleHQpIHtcbiAgICAgIGZpbmFsQXJ0U3R5bGUgPSBzZXF1ZWxDb250ZXh0LmFydFN0eWxlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzdHlsZU9iaiA9IEFSVF9TVFlMRVMuZmluZChzID0+IHMuaWQgPT09IHNlbGVjdGVkU3R5bGUpO1xuICAgICAgaWYgKHN0eWxlT2JqKSBmaW5hbEFydFN0eWxlID0gc3R5bGVPYmoudmFsdWU7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCB0b3BpY3NcbiAgICBsZXQgZmluYWxUb3BpYyA9IHRvcGljLnRyaW0oKTtcbiAgICBpZiAoIWZpbmFsVG9waWMpIHtcbiAgICAgIGlmIChtb2RlID09PSAnU0VRVUVMJyAmJiBzZXF1ZWxDb250ZXh0KSB7XG4gICAgICAgIGZpbmFsVG9waWMgPSBgQSBjb250aW51YXRpb24gb2YgdGhlIHN0b3J5ICcke3NlcXVlbENvbnRleHQudGl0bGV9Jy4gQ3JlYXRlIGEgbmV3IGFkdmVudHVyZSBmb3IgdGhlIHNhbWUgbWFpbiBjaGFyYWN0ZXIuYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbmFsVG9waWMgPSBgQSBjcmVhdGl2ZSwgZnVuLCBhbmQgZWR1Y2F0aW9uYWwgc3Rvcnkgc3VpdGFibGUgZm9yIGNoaWxkcmVuIGFnZWQgJHthZ2VSYW5nZX0uIFN1cnByaXNlIG1lIWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgb25TdWJtaXQoe1xuICAgICAgYWdlUmFuZ2UsXG4gICAgICB0b3BpYzogZmluYWxUb3BpYyxcbiAgICAgIHBhZ2VDb3VudCxcbiAgICAgIGFydFN0eWxlOiBmaW5hbEFydFN0eWxlLFxuICAgICAgcHJldmlvdXNDb250ZXh0OiAobW9kZSA9PT0gJ1NFUVVFTCcgJiYgc2VxdWVsQ29udGV4dCkgPyBzZXF1ZWxDb250ZXh0IDogdW5kZWZpbmVkLFxuICAgICAgYXVkaW9FbmFibGVkLFxuICAgICAgdm9pY2VOYW1lOiBzZWxlY3RlZFZvaWNlXG4gICAgfSk7XG4gIH07XG5cbiAgaWYgKGlzTG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLVs2MHZoXSB0ZXh0LWNlbnRlciBweC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yNCBoLTI0IG1iLTggcmVsYXRpdmVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYm9yZGVyLTggYm9yZGVyLWtpZC1ibHVlLzIwIHJvdW5kZWQtZnVsbFwiPjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBib3JkZXItOCBib3JkZXIta2lkLWJsdWUgcm91bmRlZC1mdWxsIGJvcmRlci10LXRyYW5zcGFyZW50IGFuaW1hdGUtc3BpblwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBtYi00XCI+RHJlYW1pbmcgdXAgeW91ciBzdG9yeS4uLjwvaDI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNjAwIHRleHQtbGcgYW5pbWF0ZS1wdWxzZVwiPlxuICAgICAgICAgIENyYWZ0aW5nIGNoYXJhY3RlcnMsIHdyaXRpbmcgcmh5bWVzLCBhbmQgcHJlcGFyaW5nIG1hZ2ljIVxuICAgICAgICA8L3A+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCB0ZXh0LTR4bCBhbmltYXRlLWJvdW5jZVwiPvCfqoQ8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctM3hsIG14LWF1dG8gcHktMTIgcHgtNCBzbTpweC02XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtWzIuNXJlbV0gc2hhZG93LXhsIHAtOCBzbTpwLTEyIGJvcmRlciBib3JkZXItc2xhdGUtMTAwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbWItOFwiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWV4dHJhYm9sZCB0ZXh0LXNsYXRlLTgwMFwiPldoYXQgc2hhbGwgd2UgY3JlYXRlIHRvZGF5PzwvaDI+XG5cbiAgICAgICAgICB7LyogTW9kZSBUb2dnbGUgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC00IG10LTZcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBzZXRNb2RlKCdORVcnKTsgc2V0U2VxdWVsQ29udGV4dChudWxsKTsgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtNiBweS0yIHJvdW5kZWQtZnVsbCBmb250LWJvbGQgdHJhbnNpdGlvbi1hbGwgJHttb2RlID09PSAnTkVXJyA/ICdiZy1raWQtYmx1ZSB0ZXh0LXdoaXRlIHNoYWRvdy1sZycgOiAnYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNTAwJ31gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICDXodeZ16TXldeoINeX15PXqSDinKhcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRNb2RlKCdTRVFVRUwnKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtNiBweS0yIHJvdW5kZWQtZnVsbCBmb250LWJvbGQgdHJhbnNpdGlvbi1hbGwgJHttb2RlID09PSAnU0VRVUVMJyA/ICdiZy1raWQtb3JhbmdlIHRleHQtd2hpdGUgc2hhZG93LWxnJyA6ICdiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS01MDAnfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgINeh16TXqCDXlNee16nXmiDwn5SEXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwic3BhY2UteS04XCI+XG4gICAgICAgICAgey8qIFNFUVVFTCBVUExPQUQgU0VDVElPTiAqL31cbiAgICAgICAgICB7bW9kZSA9PT0gJ1NFUVVFTCcgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1vcmFuZ2UtNTAgYm9yZGVyLTIgYm9yZGVyLW9yYW5nZS0xMDAgcm91bmRlZC0yeGwgcC02IHRleHQtY2VudGVyIGFuaW1hdGUtZmFkZS1pbiByZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgICAge2lzQW5hbHl6aW5nUGRmICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctd2hpdGUvODAgei0xMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgYm9yZGVyLTQgYm9yZGVyLWtpZC1vcmFuZ2UgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpbiBtYi0yXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWtpZC1vcmFuZ2UgZm9udC1ib2xkXCI+16fXldeo15Ag15DXqiDXlNeh16TXqC4uLjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICB7IXNlcXVlbENvbnRleHQgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC00eGwgbWItM1wiPvCfk4I8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0yXCI+15jXotefINeQ16og15TXodek16gg15TXp9eV15PXnTwvaDM+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTUwMCBtYi00IHRleHQtc21cIj7XlNei15zXlCDXkNeqINen15XXkdelINeULUpTT04g15DXlSBQREYg16nXnCDXlNeh16TXqCDXlNen15XXk9edLjwvcD5cbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICAgICAgICAgIGFjY2VwdD1cIi5qc29uLC5wZGZcIlxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZVVwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIHRleHQtc20gdGV4dC1zbGF0ZS01MDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTptci00IGZpbGU6cHktMiBmaWxlOnB4LTRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTpyb3VuZGVkLWZ1bGwgZmlsZTpib3JkZXItMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlOnRleHQtc20gZmlsZTpmb250LXNlbWlib2xkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6Ymcta2lkLW9yYW5nZSBmaWxlOnRleHQtd2hpdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXI6ZmlsZTpiZy1vcmFuZ2UtNjAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci1wb2ludGVyIG14LWF1dG8gbWF4LXcteHNcIlxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC00IHRleHQtbGVmdCBiZy13aGl0ZSBwLTQgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLW9yYW5nZS0yMDBcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC0zeGxcIj7inIU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMFwiPtee157XqdeZ15vXmdedINeQ16o6IHtzZXF1ZWxDb250ZXh0LnRpdGxlfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXNsYXRlLTUwMFwiPteU15PXnteV16og15XXlNeh15LXoNeV158g16DXqdee16jXlSE8L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlcXVlbENvbnRleHQobnVsbCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1sLWF1dG8gdGV4dC14cyB0ZXh0LXJlZC01MDAgdW5kZXJsaW5lXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAg15TXl9ec16NcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cblxuICAgICAgICAgIHsvKiBBZ2UgU2VsZWN0aW9uICovfVxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItM1wiPlxuICAgICAgICAgICAgICBUYXJnZXQgQWdlIEdyb3VwXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0zIGdhcC00XCI+XG4gICAgICAgICAgICAgIHtbJzMtOCcsICc5LTEyJywgJzEzLTE2J10ubWFwKChhZ2UpID0+IChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBrZXk9e2FnZX1cbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWdlUmFuZ2UoYWdlKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB5LTMgcHgtNCByb3VuZGVkLTJ4bCBmb250LWJvbGQgdGV4dC1sZyB0cmFuc2l0aW9uLWFsbCAke2FnZVJhbmdlID09PSBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1raWQtYmx1ZSB0ZXh0LXdoaXRlIHNoYWRvdy1sZyBzY2FsZS0xMDUnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNTAwIGhvdmVyOmJnLXNsYXRlLTIwMCdcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2FnZX1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBBcnQgU3R5bGUgU2VsZWN0aW9uIC0gRGlzYWJsZWQgaWYgU2VxdWVsICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXttb2RlID09PSAnU0VRVUVMJyAmJiBzZXF1ZWxDb250ZXh0ID8gJ29wYWNpdHktNTAgcG9pbnRlci1ldmVudHMtbm9uZSBncmF5c2NhbGUnIDogJyd9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIj5cbiAgICAgICAgICAgICAgICBBcnQgU3R5bGVcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAge21vZGUgPT09ICdTRVFVRUwnICYmIHNlcXVlbENvbnRleHQgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgYmctb3JhbmdlLTEwMCB0ZXh0LW9yYW5nZS02MDAgcHgtMiBweS0xIHJvdW5kZWQgZm9udC1ib2xkXCI+XG4gICAgICAgICAgICAgICAgICDXoNeg16LXnCDXnNek15kg15TXodek16gg15TXp9eV15PXnVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIHNtOmdyaWQtY29scy0zIGdhcC0zXCI+XG4gICAgICAgICAgICAgIHtBUlRfU1RZTEVTLm1hcCgoc3R5bGUpID0+IChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBrZXk9e3N0eWxlLmlkfVxuICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZFN0eWxlKHN0eWxlLmlkKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB5LTIgcHgtMyByb3VuZGVkLXhsIGZvbnQtYm9sZCB0ZXh0LXNtIHNtOnRleHQtYmFzZSB0cmFuc2l0aW9uLWFsbCBib3JkZXItMiAke3NlbGVjdGVkU3R5bGUgPT09IHN0eWxlLmlkXG4gICAgICAgICAgICAgICAgICAgICAgPyAnYmctd2hpdGUgYm9yZGVyLWtpZC1vcmFuZ2UgdGV4dC1raWQtb3JhbmdlIHNoYWRvdy1tZCBzY2FsZS0xMDUnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnYmctc2xhdGUtNTAgYm9yZGVyLXRyYW5zcGFyZW50IHRleHQtc2xhdGUtNjAwIGhvdmVyOmJnLXNsYXRlLTEwMCdcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3N0eWxlLmxhYmVsfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEF1ZGlvIFNldHRpbmdzICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIHJvdW5kZWQtMnhsIHAtNVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bFwiPvCflIo8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtbGcgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgINeU16fXqNeQ16og16HXmdek15XXqFxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zbGF0ZS01MDBcIj7Xmdem15nXqNeqINeQ15XXk9eZ15Ug15DXmdeb15XXqteZINec15vXnCDXotee15XXkzwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgey8qIFRvZ2dsZSBTd2l0Y2ggKi99XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBdWRpb0VuYWJsZWQoIWF1ZGlvRW5hYmxlZCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy0xNCBoLTggcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzIHJlbGF0aXZlICR7YXVkaW9FbmFibGVkID8gJ2JnLWtpZC1ibHVlJyA6ICdiZy1zbGF0ZS0zMDAnfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFic29sdXRlIHRvcC0xIHctNiBoLTYgYmctd2hpdGUgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsIHNoYWRvdy1zbSAke2F1ZGlvRW5hYmxlZCA/ICdsZWZ0LTEnIDogJ2xlZnQtNyd9YH0+PC9kaXY+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBWb2ljZSBTZWxlY3Rpb24gLSBDb25kaXRpb25hbCAqL31cbiAgICAgICAgICAgIHthdWRpb0VuYWJsZWQgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtZmFkZS1pbiBncmlkIGdyaWQtY29scy0xIGdhcC0zIG10LTMgYm9yZGVyLXQgYm9yZGVyLWJsdWUtMTAwIHB0LTNcIj5cbiAgICAgICAgICAgICAgICB7Vk9JQ0VfT1BUSU9OUy5tYXAoKHZvaWNlKSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17dm9pY2UuaWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkVm9pY2Uodm9pY2UuaWQpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIHJvdW5kZWQteGwgdHJhbnNpdGlvbi1hbGwgYm9yZGVyIGN1cnNvci1wb2ludGVyICR7c2VsZWN0ZWRWb2ljZSA9PT0gdm9pY2UuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXdoaXRlIGJvcmRlci1raWQtYmx1ZSB0ZXh0LWtpZC1ibHVlIHNoYWRvdy1tZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLWJsdWUtNTAvNTAgYm9yZGVyLXRyYW5zcGFyZW50IHRleHQtc2xhdGUtNjAwIGhvdmVyOmJnLWJsdWUtMTAwJ1xuICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3LTUgaC01IHJvdW5kZWQtZnVsbCBib3JkZXItMiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBzaHJpbmstMCAke3NlbGVjdGVkVm9pY2UgPT09IHZvaWNlLmlkID8gJ2JvcmRlci1raWQtYmx1ZScgOiAnYm9yZGVyLXNsYXRlLTQwMCd9YH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRWb2ljZSA9PT0gdm9pY2UuaWQgJiYgPGRpdiBjbGFzc05hbWU9XCJ3LTIuNSBoLTIuNSByb3VuZGVkLWZ1bGwgYmcta2lkLWJsdWVcIj48L2Rpdj59XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLXN0YXJ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1iYXNlXCI+e3ZvaWNlLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgb3BhY2l0eS03MCBiZy1zbGF0ZS0yMDAvNTAgcHgtMiBweS0wLjUgcm91bmRlZC1tZCBtdC0xXCI+e3ZvaWNlLmdlbmRlcn08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gaGFuZGxlUGxheVByZXZpZXcodm9pY2UuaWQsIGUpfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctMTAgaC0xMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWZ1bGwgYmctc2xhdGUtMTAwIGhvdmVyOmJnLWJsdWUtMjAwIHRyYW5zaXRpb24tY29sb3JzICR7cHJldmlld2luZ1ZvaWNlID09PSB2b2ljZS5pZCA/ICd0ZXh0LWtpZC1vcmFuZ2UgYW5pbWF0ZS1wdWxzZSBiZy1ibHVlLTEwMCcgOiAndGV4dC1zbGF0ZS01MDAnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCLXlNep157XoiDXk9eV15LXnteUXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHtwcmV2aWV3aW5nVm9pY2UgPT09IHZvaWNlLmlkID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RvcCBJY29uIC8gU3Bpbm5lclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14bFwiPuKPuTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGxheSBJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhsXCI+4pa2PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBQYWdlIENvdW50IFNlbGVjdGlvbiAqL31cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItM1wiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIj5cbiAgICAgICAgICAgICAgICBTdG9yeSBMZW5ndGhcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmcta2lkLWJsdWUvMTAgdGV4dC1raWQtYmx1ZSBweC0zIHB5LTEgcm91bmRlZC1mdWxsIGZvbnQtYm9sZCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAge3BhZ2VDb3VudH0ge3BhZ2VDb3VudCA9PT0gMSA/ICdQYWdlJyA6ICdQYWdlcyd9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcbiAgICAgICAgICAgICAgbWluPVwiMVwiXG4gICAgICAgICAgICAgIG1heD1cIjIwXCJcbiAgICAgICAgICAgICAgdmFsdWU9e3BhZ2VDb3VudH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQYWdlQ291bnQocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtMyBiZy1zbGF0ZS0yMDAgcm91bmRlZC1sZyBhcHBlYXJhbmNlLW5vbmUgY3Vyc29yLXBvaW50ZXIgYWNjZW50LWtpZC1ibHVlIGhvdmVyOmJnLXNsYXRlLTMwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXNtIHRleHQtc2xhdGUtNDAwIG10LTIgZm9udC1tZWRpdW0gcHgtMVwiPlxuICAgICAgICAgICAgICA8c3Bhbj5TaG9ydCAoMSk8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuPkxvbmcgKDIwKTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFRvcGljIElucHV0ICovfVxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWVuZCBtYi0zXCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwidG9waWNcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMFwiPlxuICAgICAgICAgICAgICAgIFdoYXQgaXMgdGhlIHN0b3J5IGFib3V0P1xuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICB7LyogR2VuZXJhdGUgSWRlYSBCdXR0b24gLSBPbmx5IGZvciBORVcgbW9kZSAqL31cbiAgICAgICAgICAgICAge21vZGUgPT09ICdORVcnICYmIChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN1Z2dlc3RJZGVhfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzR2VuZXJhdGluZ0lkZWF9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNtIGJnLWdyYWRpZW50LXRvLXIgZnJvbS1wdXJwbGUtNTAwIHRvLXBpbmstNTAwIHRleHQtd2hpdGUgcHgtMyBweS0xLjUgcm91bmRlZC1mdWxsIGZvbnQtYm9sZCBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnIHRyYW5zaXRpb24tdHJhbnNmb3JtIHRyYW5zZm9ybSBob3ZlcjotdHJhbnNsYXRlLXktMC41IGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtpc0dlbmVyYXRpbmdJZGVhID8gKFxuICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0zIGgtMyBib3JkZXItMiBib3JkZXItd2hpdGUgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgINeX15XXqdeRLi4uXG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj7inKg8L3NwYW4+INeU157XpteQINec15kg16jXoteZ15XXn1xuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICBpZD1cInRvcGljXCJcbiAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgdmFsdWU9e3RvcGljfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFRvcGljKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJlLmcuLCBBIGJyYXZlIHR1cnRsZSB3aG8gd2FudHMgdG8gZmx5Li4uIE9SIGxlYXZlIGJsYW5rIGZvciBhIHN1cnByaXNlIVwiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1zbGF0ZS01MCBib3JkZXItMiBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQtMnhsIHAtNCB0ZXh0LWxnIGZvY3VzOmJvcmRlci1raWQtYmx1ZSBmb2N1czpyaW5nLTAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2xhdGUtNDAwIG10LTIgdGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICDXmNeZ16Q6INeU16nXqtee16kg15HXm9ek16rXldeoINeU16fXodedINec157Xotec15Qg15vXk9eZINec16fXkdecINeo16LXmdeV158sINep150g15PXnteV16og15XXotec15nXnNeUIVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIENvc3QgRXN0aW1hdG9yICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctc2xhdGUtODAwIHRleHQtd2hpdGUgcC01IHJvdW5kZWQtMnhsIHNoYWRvdy1sZyBib3JkZXItMiBib3JkZXItc2xhdGUtNzAwXCI+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LWJvbGQgbWItMyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8c3Bhbj7wn5KwPC9zcGFuPiDXotec15XXqiDXntep15XXoteo16pcbiAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiB0ZXh0LXNtIHRleHQtc2xhdGUtMzAwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj7Xqtee15XXoNeV16ogKHtwYWdlQ291bnR9INei157XldeT15nXnSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4+JHtjb3N0RXN0aW1hdGUuaW1hZ2VzfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIHthdWRpb0VuYWJsZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuPteQ15XXk9eZ15UgKFRUUyk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj4ke2Nvc3RFc3RpbWF0ZS5hdWRpb308L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj7XmNen16HXmCDXldei15nXkdeV15M8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4+JHtjb3N0RXN0aW1hdGUuYmFzZX08L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtcHggYmctc2xhdGUtNjAwIG15LTJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWtpZC15ZWxsb3dcIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj7XodeUXCLXmzwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj4ke2Nvc3RFc3RpbWF0ZS50b3RhbH08L3NwYW4+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVsxMHB4XSB0ZXh0LXNsYXRlLTUwMCBtdC0zIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICog15TXnteX15nXqCDXnteV16LXqNeaINec16TXmSDXqtei16jXmdek15kgR2VtaW5pIEFQSSDXlNeo16nXnteZ15nXnS4g15TXl9eZ15XXkSDXkdek15XXotecINee16rXkdem16Ig15HXl9ep15HXldefINeULUdvb2dsZSBDbG91ZCDXqdec15ouXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXttb2RlID09PSAnU0VRVUVMJyAmJiAhc2VxdWVsQ29udGV4dH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1raWQteWVsbG93IGhvdmVyOmJnLXllbGxvdy00MDAgdGV4dC1raWQtdGV4dCB0ZXh0LXhsIGZvbnQtYm9sZCBweS01IHJvdW5kZWQtMnhsIHNoYWRvdy1sZyB0cmFuc2Zvcm0gdHJhbnNpdGlvbiBob3ZlcjotdHJhbnNsYXRlLXktMSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge21vZGUgPT09ICdTRVFVRUwnID8gJ0NyZWF0ZSBTZXF1ZWwhIPCflIQnIDogKHRvcGljLnRyaW0oKSA/ICdDcmVhdGUgTXkgQm9vayEg8J+agCcgOiAnU3VycHJpc2UgTWUhIPCfjrInKX1cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDcmVhdGlvbkZvcm07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJhbmFseXplQm9va1BkZiIsImdlbmVyYXRlUGFnZUF1ZGlvIiwiZ2VuZXJhdGVTdG9yeUlkZWEiLCJBUlRfU1RZTEVTIiwiaWQiLCJsYWJlbCIsInZhbHVlIiwiVk9JQ0VfT1BUSU9OUyIsImdlbmRlciIsIkNPU1RTIiwiSU1BR0UiLCJBVURJT19QQUdFIiwiVEVYVF9CQVNFIiwicmVhZEZpbGVBc0Jhc2U2NCIsImZpbGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJyZXN1bHQiLCJiYXNlNjQiLCJzcGxpdCIsIm9uZXJyb3IiLCJyZWFkQXNEYXRhVVJMIiwiQ3JlYXRpb25Gb3JtIiwib25TdWJtaXQiLCJpc0xvYWRpbmciLCJtb2RlIiwic2V0TW9kZSIsImFnZVJhbmdlIiwic2V0QWdlUmFuZ2UiLCJ0b3BpYyIsInNldFRvcGljIiwicGFnZUNvdW50Iiwic2V0UGFnZUNvdW50Iiwic2VsZWN0ZWRTdHlsZSIsInNldFNlbGVjdGVkU3R5bGUiLCJpc0dlbmVyYXRpbmdJZGVhIiwic2V0SXNHZW5lcmF0aW5nSWRlYSIsImF1ZGlvRW5hYmxlZCIsInNldEF1ZGlvRW5hYmxlZCIsInNlbGVjdGVkVm9pY2UiLCJzZXRTZWxlY3RlZFZvaWNlIiwicHJldmlld2luZ1ZvaWNlIiwic2V0UHJldmlld2luZ1ZvaWNlIiwiYXVkaW9Db250ZXh0UmVmIiwiYWN0aXZlU291cmNlUmVmIiwic2VxdWVsQ29udGV4dCIsInNldFNlcXVlbENvbnRleHQiLCJpc0FuYWx5emluZ1BkZiIsInNldElzQW5hbHl6aW5nUGRmIiwiY3VycmVudCIsInN0b3AiLCJjbG9zZSIsImNvc3RFc3RpbWF0ZSIsImltYWdlc0Nvc3QiLCJhdWRpb0Nvc3QiLCJ0b3RhbCIsImltYWdlcyIsInRvRml4ZWQiLCJhdWRpbyIsImJhc2UiLCJoYW5kbGVQbGF5UHJldmlldyIsInZvaWNlSWQiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiZXJyIiwid2luZG93IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0Iiwic2FtcGxlUmF0ZSIsInN0YXRlIiwicmVzdW1lIiwiYnVmZmVyIiwic291cmNlIiwiY3JlYXRlQnVmZmVyU291cmNlIiwiY29ubmVjdCIsImRlc3RpbmF0aW9uIiwib25lbmRlZCIsInN0YXJ0IiwiZXJyb3IiLCJjb25zb2xlIiwiaGFuZGxlRmlsZVVwbG9hZCIsInRhcmdldCIsImZpbGVzIiwidHlwZSIsImV2ZW50IiwianNvbiIsIkpTT04iLCJwYXJzZSIsIm1ldGFkYXRhIiwicGFnZXMiLCJmdWxsU3RvcnkiLCJtYXAiLCJwIiwiaGVicmV3VGV4dCIsImpvaW4iLCJ0aXRsZSIsInN1bW1hcnkiLCJjaGFyYWN0ZXJEZXNjcmlwdGlvbiIsIm1haW5DaGFyYWN0ZXJEZXNjcmlwdGlvbiIsImFydFN0eWxlIiwiYmFzZUNoYXJhY3RlckltYWdlIiwiYmFzZUNoYXJhY3RlckltYWdlVXJsIiwidGFyZ2V0QWdlIiwiYWxlcnQiLCJyZWFkQXNUZXh0IiwiY29udGV4dCIsImhhbmRsZVN1Z2dlc3RJZGVhIiwiaWRlYSIsImhhbmRsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiZmluYWxBcnRTdHlsZSIsInN0eWxlT2JqIiwiZmluZCIsInMiLCJmaW5hbFRvcGljIiwidHJpbSIsInByZXZpb3VzQ29udGV4dCIsInVuZGVmaW5lZCIsInZvaWNlTmFtZSIsImRpdiIsImNsYXNzTmFtZSIsImgyIiwiYnV0dG9uIiwib25DbGljayIsImZvcm0iLCJzcGFuIiwiaDMiLCJpbnB1dCIsImFjY2VwdCIsIm9uQ2hhbmdlIiwiYWdlIiwic3R5bGUiLCJ2b2ljZSIsIm1pbiIsIm1heCIsInBhcnNlSW50IiwiaHRtbEZvciIsImRpc2FibGVkIiwidGV4dGFyZWEiLCJyb3dzIiwicGxhY2Vob2xkZXIiLCJoNCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./components/CreationForm.tsx\n");

/***/ }),

/***/ "(ssr)/./components/DriveConnectButton.tsx":
/*!*******************************************!*\
  !*** ./components/DriveConnectButton.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_oauth_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-oauth/google */ \"(ssr)/./node_modules/@react-oauth/google/dist/index.esm.js\");\n/* harmony import */ var _services_googleDrive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/googleDrive */ \"(ssr)/./services/googleDrive.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\nconst GOOGLE_CLIENT_ID = \"1053745923463-unb5d0288ujvdfavlg4kvtkq2m22sjvh.apps.googleusercontent.com\" || 0;\nconst DriveConnectButtonInner = ({ onConnect, onDisconnect })=>{\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"DriveConnectButtonInner.useEffect\": ()=>{\n            setIsConnected((0,_services_googleDrive__WEBPACK_IMPORTED_MODULE_3__.hasDriveAccess)());\n        }\n    }[\"DriveConnectButtonInner.useEffect\"], []);\n    const login = (0,_react_oauth_google__WEBPACK_IMPORTED_MODULE_2__.useGoogleLogin)({\n        onSuccess: {\n            \"DriveConnectButtonInner.useGoogleLogin[login]\": (response)=>{\n                (0,_services_googleDrive__WEBPACK_IMPORTED_MODULE_3__.setDriveAccessToken)(response.access_token);\n                setIsConnected(true);\n                setIsLoading(false);\n                onConnect?.();\n            }\n        }[\"DriveConnectButtonInner.useGoogleLogin[login]\"],\n        onError: {\n            \"DriveConnectButtonInner.useGoogleLogin[login]\": (error)=>{\n                console.error('Google login error:', error);\n                setIsLoading(false);\n                alert(' .    Google Cloud Console .');\n            }\n        }[\"DriveConnectButtonInner.useGoogleLogin[login]\"],\n        scope: 'https://www.googleapis.com/auth/drive.file',\n        flow: 'implicit'\n    });\n    const handleConnect = ()=>{\n        setIsLoading(true);\n        login();\n    };\n    const handleDisconnect = ()=>{\n        (0,_services_googleDrive__WEBPACK_IMPORTED_MODULE_3__.clearDriveAccess)();\n        setIsConnected(false);\n        onDisconnect?.();\n    };\n    if (isConnected) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n            onClick: handleDisconnect,\n            className: \"flex items-center gap-2 px-3 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-bold hover:bg-green-200 transition-colors\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: \"\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                    lineNumber: 55,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"hidden sm:inline\",\n                    children: \" -Drive\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                    lineNumber: 56,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-xs opacity-60\",\n                    children: \"|\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                    lineNumber: 57,\n                    columnNumber: 17\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"text-xs text-green-600 hover:text-red-500\",\n                    children: \"\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                    lineNumber: 58,\n                    columnNumber: 17\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n            lineNumber: 51,\n            columnNumber: 13\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        onClick: handleConnect,\n        disabled: isLoading,\n        className: \"flex items-center gap-2 px-4 py-2 bg-white border-2 border-slate-200 rounded-lg text-sm font-bold text-slate-700 hover:border-blue-400 hover:bg-blue-50 transition-all disabled:opacity-50\",\n        children: [\n            isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: \"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                lineNumber: 70,\n                columnNumber: 17\n            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                className: \"w-5 h-5\",\n                viewBox: \"0 0 87.3 78\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        d: \"m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z\",\n                        fill: \"#0066da\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                        lineNumber: 73,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        d: \"m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z\",\n                        fill: \"#00ac47\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                        lineNumber: 74,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        d: \"m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z\",\n                        fill: \"#ea4335\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                        lineNumber: 75,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        d: \"m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z\",\n                        fill: \"#00832d\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                        lineNumber: 76,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        d: \"m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z\",\n                        fill: \"#2684fc\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                        lineNumber: 77,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        d: \"m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z\",\n                        fill: \"#ffba00\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                        lineNumber: 78,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                lineNumber: 72,\n                columnNumber: 17\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: \" -Drive\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n                lineNumber: 81,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n        lineNumber: 64,\n        columnNumber: 9\n    }, undefined);\n};\n// Wrapper with OAuth Provider\nconst DriveConnectButton = (props)=>{\n    if (!GOOGLE_CLIENT_ID) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-xs text-slate-400\",\n            children: \"Google Drive  \"\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n            lineNumber: 90,\n            columnNumber: 13\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_oauth_google__WEBPACK_IMPORTED_MODULE_2__.GoogleOAuthProvider, {\n        clientId: GOOGLE_CLIENT_ID,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DriveConnectButtonInner, {\n            ...props\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n            lineNumber: 98,\n            columnNumber: 13\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\DriveConnectButton.tsx\",\n        lineNumber: 97,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DriveConnectButton);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL0RyaXZlQ29ubmVjdEJ1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFFa0Q7QUFDdUI7QUFDcUI7QUFFOUYsTUFBTVEsbUJBQW1CQywyRUFBd0MsSUFBSSxDQUFFO0FBT3ZFLE1BQU1HLDBCQUE2RCxDQUFDLEVBQUVDLFNBQVMsRUFBRUMsWUFBWSxFQUFFO0lBQzNGLE1BQU0sQ0FBQ0MsYUFBYUMsZUFBZSxHQUFHZiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNnQixXQUFXQyxhQUFhLEdBQUdqQiwrQ0FBUUEsQ0FBQztJQUUzQ0MsZ0RBQVNBOzZDQUFDO1lBQ05jLGVBQWVWLHFFQUFjQTtRQUNqQzs0Q0FBRyxFQUFFO0lBRUwsTUFBTWEsUUFBUWYsbUVBQWNBLENBQUM7UUFDekJnQixTQUFTOzZEQUFFLENBQUNDO2dCQUNSaEIsMEVBQW1CQSxDQUFDZ0IsU0FBU0MsWUFBWTtnQkFDekNOLGVBQWU7Z0JBQ2ZFLGFBQWE7Z0JBQ2JMO1lBQ0o7O1FBQ0FVLE9BQU87NkRBQUUsQ0FBQ0M7Z0JBQ05DLFFBQVFELEtBQUssQ0FBQyx1QkFBdUJBO2dCQUNyQ04sYUFBYTtnQkFDYlEsTUFBTTtZQUNWOztRQUNBQyxPQUFPO1FBQ1BDLE1BQU07SUFDVjtJQUVBLE1BQU1DLGdCQUFnQjtRQUNsQlgsYUFBYTtRQUNiQztJQUNKO0lBRUEsTUFBTVcsbUJBQW1CO1FBQ3JCdkIsdUVBQWdCQTtRQUNoQlMsZUFBZTtRQUNmRjtJQUNKO0lBRUEsSUFBSUMsYUFBYTtRQUNiLHFCQUNJLDhEQUFDZ0I7WUFDR0MsU0FBU0Y7WUFDVEcsV0FBVTs7OEJBRVYsOERBQUNDOzhCQUFLOzs7Ozs7OEJBQ04sOERBQUNBO29CQUFLRCxXQUFVOzhCQUFtQjs7Ozs7OzhCQUNuQyw4REFBQ0M7b0JBQUtELFdBQVU7OEJBQXFCOzs7Ozs7OEJBQ3JDLDhEQUFDQztvQkFBS0QsV0FBVTs4QkFBNEM7Ozs7Ozs7Ozs7OztJQUd4RTtJQUVBLHFCQUNJLDhEQUFDRjtRQUNHQyxTQUFTSDtRQUNUTSxVQUFVbEI7UUFDVmdCLFdBQVU7O1lBRVRoQiwwQkFDRyw4REFBQ2lCO2dCQUFLRCxXQUFVOzs7OzswQ0FFaEIsOERBQUNHO2dCQUFJSCxXQUFVO2dCQUFVSSxTQUFRO2dCQUFjQyxPQUFNOztrQ0FDakQsOERBQUNDO3dCQUFLQyxHQUFFO3dCQUFzRkMsTUFBSzs7Ozs7O2tDQUNuRyw4REFBQ0Y7d0JBQUtDLEdBQUU7d0JBQXVGQyxNQUFLOzs7Ozs7a0NBQ3BHLDhEQUFDRjt3QkFBS0MsR0FBRTt3QkFBc0dDLE1BQUs7Ozs7OztrQ0FDbkgsOERBQUNGO3dCQUFLQyxHQUFFO3dCQUE4RUMsTUFBSzs7Ozs7O2tDQUMzRiw4REFBQ0Y7d0JBQUtDLEdBQUU7d0JBQWlGQyxNQUFLOzs7Ozs7a0NBQzlGLDhEQUFDRjt3QkFBS0MsR0FBRTt3QkFBZ0dDLE1BQUs7Ozs7Ozs7Ozs7OzswQkFHckgsOERBQUNQOzBCQUFLOzs7Ozs7Ozs7Ozs7QUFHbEI7QUFFQSw4QkFBOEI7QUFDOUIsTUFBTVEscUJBQXdELENBQUNDO0lBQzNELElBQUksQ0FBQ25DLGtCQUFrQjtRQUNuQixxQkFDSSw4REFBQ29DO1lBQUlYLFdBQVU7c0JBQXlCOzs7Ozs7SUFJaEQ7SUFFQSxxQkFDSSw4REFBQzlCLG9FQUFtQkE7UUFBQzBDLFVBQVVyQztrQkFDM0IsNEVBQUNJO1lBQXlCLEdBQUcrQixLQUFLOzs7Ozs7Ozs7OztBQUc5QztBQUVBLGlFQUFlRCxrQkFBa0JBLEVBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcY29tcG9uZW50c1xcRHJpdmVDb25uZWN0QnV0dG9uLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IEdvb2dsZU9BdXRoUHJvdmlkZXIsIHVzZUdvb2dsZUxvZ2luIH0gZnJvbSAnQHJlYWN0LW9hdXRoL2dvb2dsZSdcclxuaW1wb3J0IHsgc2V0RHJpdmVBY2Nlc3NUb2tlbiwgaGFzRHJpdmVBY2Nlc3MsIGNsZWFyRHJpdmVBY2Nlc3MgfSBmcm9tICdAL3NlcnZpY2VzL2dvb2dsZURyaXZlJ1xyXG5cclxuY29uc3QgR09PR0xFX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9DTElFTlRfSUQgfHwgJydcclxuXHJcbmludGVyZmFjZSBEcml2ZUNvbm5lY3RCdXR0b25Qcm9wcyB7XHJcbiAgICBvbkNvbm5lY3Q/OiAoKSA9PiB2b2lkXHJcbiAgICBvbkRpc2Nvbm5lY3Q/OiAoKSA9PiB2b2lkXHJcbn1cclxuXHJcbmNvbnN0IERyaXZlQ29ubmVjdEJ1dHRvbklubmVyOiBSZWFjdC5GQzxEcml2ZUNvbm5lY3RCdXR0b25Qcm9wcz4gPSAoeyBvbkNvbm5lY3QsIG9uRGlzY29ubmVjdCB9KSA9PiB7XHJcbiAgICBjb25zdCBbaXNDb25uZWN0ZWQsIHNldElzQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG4gICAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgc2V0SXNDb25uZWN0ZWQoaGFzRHJpdmVBY2Nlc3MoKSlcclxuICAgIH0sIFtdKVxyXG5cclxuICAgIGNvbnN0IGxvZ2luID0gdXNlR29vZ2xlTG9naW4oe1xyXG4gICAgICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHNldERyaXZlQWNjZXNzVG9rZW4ocmVzcG9uc2UuYWNjZXNzX3Rva2VuKVxyXG4gICAgICAgICAgICBzZXRJc0Nvbm5lY3RlZCh0cnVlKVxyXG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXHJcbiAgICAgICAgICAgIG9uQ29ubmVjdD8uKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgbG9naW4gZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSlcclxuICAgICAgICAgICAgYWxlcnQoJ9eU15TXqteX15HXqNeV16og16DXm9ep15zXlC4g15XXldeT15Ag16nXlNeS15PXqNeqINeQ16ogR29vZ2xlIENsb3VkIENvbnNvbGUg16DXm9eV158uJylcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjb3BlOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZS5maWxlJyxcclxuICAgICAgICBmbG93OiAnaW1wbGljaXQnLCAgLy8gVXNlIGltcGxpY2l0IGZsb3cgLSBubyByZWRpcmVjdCBuZWVkZWRcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgaGFuZGxlQ29ubmVjdCA9ICgpID0+IHtcclxuICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcclxuICAgICAgICBsb2dpbigpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFuZGxlRGlzY29ubmVjdCA9ICgpID0+IHtcclxuICAgICAgICBjbGVhckRyaXZlQWNjZXNzKClcclxuICAgICAgICBzZXRJc0Nvbm5lY3RlZChmYWxzZSlcclxuICAgICAgICBvbkRpc2Nvbm5lY3Q/LigpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQ29ubmVjdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlRGlzY29ubmVjdH1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMiBiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi03MDAgcm91bmRlZC1sZyB0ZXh0LXNtIGZvbnQtYm9sZCBob3ZlcjpiZy1ncmVlbi0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj7inJM8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJoaWRkZW4gc206aW5saW5lXCI+157Xl9eV15HXqCDXnC1Ecml2ZTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgb3BhY2l0eS02MFwiPnw8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JlZW4tNjAwIGhvdmVyOnRleHQtcmVkLTUwMFwiPteg16rXpzwvc3Bhbj5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDb25uZWN0fVxyXG4gICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBweC00IHB5LTIgYmctd2hpdGUgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLWxnIHRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIGhvdmVyOmJvcmRlci1ibHVlLTQwMCBob3ZlcjpiZy1ibHVlLTUwIHRyYW5zaXRpb24tYWxsIGRpc2FibGVkOm9wYWNpdHktNTBcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgICAge2lzTG9hZGluZyA/IChcclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInctNCBoLTQgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTQwMCBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTUgaC01XCIgdmlld0JveD1cIjAgMCA4Ny4zIDc4XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJtNi42IDY2Ljg1IDMuODUgNi42NWMuOCAxLjQgMS45NSAyLjUgMy4zIDMuM2wxMy43NS0yMy44aC0yNy41YzAgMS41NS40IDMuMSAxLjIgNC41elwiIGZpbGw9XCIjMDA2NmRhXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwibTQzLjY1IDI1LTEzLjc1LTIzLjhjLTEuMzUuOC0yLjUgMS45LTMuMyAzLjNsLTI1LjQgNDRhOS4wNiA5LjA2IDAgMCAwIC0xLjIgNC41aDI3LjV6XCIgZmlsbD1cIiMwMGFjNDdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJtNzMuNTUgNzYuOGMxLjM1LS44IDIuNS0xLjkgMy4zLTMuM2wxLjYtMi43NSA3LjY1LTEzLjI1Yy44LTEuNCAxLjItMi45NSAxLjItNC41aC0yNy41MDJsNS44NTIgMTEuNXpcIiBmaWxsPVwiI2VhNDMzNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIm00My42NSAyNSAxMy43NS0yMy44Yy0xLjM1LS44LTIuOS0xLjItNC41LTEuMmgtMTguNWMtMS42IDAtMy4xNS40NS00LjUgMS4yelwiIGZpbGw9XCIjMDA4MzJkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwibTU5LjggNTNoLTMyLjNsLTEzLjc1IDIzLjhjMS4zNS44IDIuOSAxLjIgNC41IDEuMmg1MC44YzEuNiAwIDMuMTUtLjQ1IDQuNS0xLjJ6XCIgZmlsbD1cIiMyNjg0ZmNcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJtNzMuNCAyNi41LTEyLjctMjJjLS44LTEuNC0xLjk1LTIuNS0zLjMtMy4zbC0xMy43NSAyMy44IDE2LjE1IDI4aDI3LjQ1YzAtMS41NS0uNC0zLjEtMS4yLTQuNXpcIiBmaWxsPVwiI2ZmYmEwMFwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPHNwYW4+15TXqteX15HXqCDXnC1Ecml2ZTwvc3Bhbj5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgIClcclxufVxyXG5cclxuLy8gV3JhcHBlciB3aXRoIE9BdXRoIFByb3ZpZGVyXHJcbmNvbnN0IERyaXZlQ29ubmVjdEJ1dHRvbjogUmVhY3QuRkM8RHJpdmVDb25uZWN0QnV0dG9uUHJvcHM+ID0gKHByb3BzKSA9PiB7XHJcbiAgICBpZiAoIUdPT0dMRV9DTElFTlRfSUQpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1zbGF0ZS00MDBcIj5cclxuICAgICAgICAgICAgICAgIEdvb2dsZSBEcml2ZSDXnNeQINee15XXkteT16hcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPEdvb2dsZU9BdXRoUHJvdmlkZXIgY2xpZW50SWQ9e0dPT0dMRV9DTElFTlRfSUR9PlxyXG4gICAgICAgICAgICA8RHJpdmVDb25uZWN0QnV0dG9uSW5uZXIgey4uLnByb3BzfSAvPlxyXG4gICAgICAgIDwvR29vZ2xlT0F1dGhQcm92aWRlcj5cclxuICAgIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRHJpdmVDb25uZWN0QnV0dG9uXHJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiR29vZ2xlT0F1dGhQcm92aWRlciIsInVzZUdvb2dsZUxvZ2luIiwic2V0RHJpdmVBY2Nlc3NUb2tlbiIsImhhc0RyaXZlQWNjZXNzIiwiY2xlYXJEcml2ZUFjY2VzcyIsIkdPT0dMRV9DTElFTlRfSUQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRCIsIkRyaXZlQ29ubmVjdEJ1dHRvbklubmVyIiwib25Db25uZWN0Iiwib25EaXNjb25uZWN0IiwiaXNDb25uZWN0ZWQiLCJzZXRJc0Nvbm5lY3RlZCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImxvZ2luIiwib25TdWNjZXNzIiwicmVzcG9uc2UiLCJhY2Nlc3NfdG9rZW4iLCJvbkVycm9yIiwiZXJyb3IiLCJjb25zb2xlIiwiYWxlcnQiLCJzY29wZSIsImZsb3ciLCJoYW5kbGVDb25uZWN0IiwiaGFuZGxlRGlzY29ubmVjdCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJzcGFuIiwiZGlzYWJsZWQiLCJzdmciLCJ2aWV3Qm94IiwieG1sbnMiLCJwYXRoIiwiZCIsImZpbGwiLCJEcml2ZUNvbm5lY3RCdXR0b24iLCJwcm9wcyIsImRpdiIsImNsaWVudElkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./components/DriveConnectButton.tsx\n");

/***/ }),

/***/ "(ssr)/./components/Header.tsx":
/*!*******************************!*\
  !*** ./components/Header.tsx ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types */ \"(ssr)/./types.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nconst Header = ({ onNavigate, onChangeKey, onShowGallery })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n        className: \"w-full bg-white shadow-sm sticky top-0 z-50\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex justify-between items-center h-16\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center cursor-pointer\",\n                        onClick: ()=>onNavigate(_types__WEBPACK_IMPORTED_MODULE_2__.AppView.HOME),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-3xl mr-2\",\n                                children: \"\\uD83D\\uDE80\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                lineNumber: 21,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-2xl font-extrabold text-kid-blue tracking-tight\",\n                                children: [\n                                    \"KidCraft \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-kid-orange\",\n                                        children: \"AI\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                        lineNumber: 23,\n                                        columnNumber: 24\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                lineNumber: 22,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                        lineNumber: 17,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"nav\", {\n                        className: \"flex items-center gap-3\",\n                        children: [\n                            onShowGallery && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: onShowGallery,\n                                className: \"text-kid-blue hover:text-teal-600 px-3 py-1 rounded-full text-sm font-bold border border-kid-blue/30 hover:border-kid-blue transition-colors flex items-center gap-1\",\n                                title: \" \",\n                                children: [\n                                    \"\\uD83D\\uDCDA \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"hidden sm:inline\",\n                                        children: \" \"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                        lineNumber: 33,\n                                        columnNumber: 20\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                lineNumber: 28,\n                                columnNumber: 15\n                            }, undefined),\n                            onChangeKey && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: onChangeKey,\n                                className: \"text-slate-400 hover:text-slate-600 px-3 py-1 rounded-full text-xs font-bold border border-slate-200 hover:border-slate-300 transition-colors flex items-center gap-1\",\n                                title: \"  API\",\n                                children: [\n                                    \"\\uD83D\\uDD11 \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"hidden sm:inline\",\n                                        children: \"API\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                        lineNumber: 42,\n                                        columnNumber: 20\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                lineNumber: 37,\n                                columnNumber: 15\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>onNavigate(_types__WEBPACK_IMPORTED_MODULE_2__.AppView.CREATE),\n                                className: \"bg-kid-yellow hover:bg-yellow-400 text-kid-text font-bold py-2 px-6 rounded-full transition-transform transform hover:scale-105 shadow-md\",\n                                children: \"Start Creating\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                                lineNumber: 45,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                        lineNumber: 26,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n                lineNumber: 16,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n            lineNumber: 15,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Header.tsx\",\n        lineNumber: 14,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Header);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL0hlYWRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUV5QjtBQUNRO0FBUWpDLE1BQU1FLFNBQWdDLENBQUMsRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUVDLGFBQWEsRUFBRTtJQUMvRSxxQkFDRSw4REFBQ0M7UUFBT0MsV0FBVTtrQkFDaEIsNEVBQUNDO1lBQUlELFdBQVU7c0JBQ2IsNEVBQUNDO2dCQUFJRCxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQ0NELFdBQVU7d0JBQ1ZFLFNBQVMsSUFBTU4sV0FBV0YsMkNBQU9BLENBQUNTLElBQUk7OzBDQUV0Qyw4REFBQ0M7Z0NBQUtKLFdBQVU7MENBQWdCOzs7Ozs7MENBQ2hDLDhEQUFDSztnQ0FBR0wsV0FBVTs7b0NBQXVEO2tEQUMxRCw4REFBQ0k7d0NBQUtKLFdBQVU7a0RBQWtCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBRy9DLDhEQUFDTTt3QkFBSU4sV0FBVTs7NEJBQ1pGLCtCQUNDLDhEQUFDUztnQ0FDQ0wsU0FBU0o7Z0NBQ1RFLFdBQVU7Z0NBQ1ZRLE9BQU07O29DQUNQO2tEQUNJLDhEQUFDSjt3Q0FBS0osV0FBVTtrREFBbUI7Ozs7Ozs7Ozs7Ozs0QkFHekNILDZCQUNDLDhEQUFDVTtnQ0FDQ0wsU0FBU0w7Z0NBQ1RHLFdBQVU7Z0NBQ1ZRLE9BQU07O29DQUNQO2tEQUNJLDhEQUFDSjt3Q0FBS0osV0FBVTtrREFBbUI7Ozs7Ozs7Ozs7OzswQ0FHMUMsOERBQUNPO2dDQUNDTCxTQUFTLElBQU1OLFdBQVdGLDJDQUFPQSxDQUFDZSxNQUFNO2dDQUN4Q1QsV0FBVTswQ0FDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFiO0FBRUEsaUVBQWVMLE1BQU1BLEVBQUEiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcY29tcG9uZW50c1xcSGVhZGVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgQXBwVmlldyB9IGZyb20gJ0AvdHlwZXMnXG5cbmludGVyZmFjZSBIZWFkZXJQcm9wcyB7XG4gIG9uTmF2aWdhdGU6ICh2aWV3OiBBcHBWaWV3KSA9PiB2b2lkXG4gIG9uQ2hhbmdlS2V5PzogKCkgPT4gdm9pZFxuICBvblNob3dHYWxsZXJ5PzogKCkgPT4gdm9pZFxufVxuXG5jb25zdCBIZWFkZXI6IFJlYWN0LkZDPEhlYWRlclByb3BzPiA9ICh7IG9uTmF2aWdhdGUsIG9uQ2hhbmdlS2V5LCBvblNob3dHYWxsZXJ5IH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8aGVhZGVyIGNsYXNzTmFtZT1cInctZnVsbCBiZy13aGl0ZSBzaGFkb3ctc20gc3RpY2t5IHRvcC0wIHotNTBcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LThcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgaC0xNlwiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uTmF2aWdhdGUoQXBwVmlldy5IT01FKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBtci0yXCI+8J+agDwvc3Bhbj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWV4dHJhYm9sZCB0ZXh0LWtpZC1ibHVlIHRyYWNraW5nLXRpZ2h0XCI+XG4gICAgICAgICAgICAgIEtpZENyYWZ0IDxzcGFuIGNsYXNzTmFtZT1cInRleHQta2lkLW9yYW5nZVwiPkFJPC9zcGFuPlxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8bmF2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgICB7b25TaG93R2FsbGVyeSAmJiAoXG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblNob3dHYWxsZXJ5fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQta2lkLWJsdWUgaG92ZXI6dGV4dC10ZWFsLTYwMCBweC0zIHB5LTEgcm91bmRlZC1mdWxsIHRleHQtc20gZm9udC1ib2xkIGJvcmRlciBib3JkZXIta2lkLWJsdWUvMzAgaG92ZXI6Ym9yZGVyLWtpZC1ibHVlIHRyYW5zaXRpb24tY29sb3JzIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIteU16HXpNeo15nXnSDXqdec15lcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAg8J+TmiA8c3BhbiBjbGFzc05hbWU9XCJoaWRkZW4gc206aW5saW5lXCI+15TXodek16jXmdedINep15zXmTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge29uQ2hhbmdlS2V5ICYmIChcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2hhbmdlS2V5fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtc2xhdGUtNjAwIHB4LTMgcHktMSByb3VuZGVkLWZ1bGwgdGV4dC14cyBmb250LWJvbGQgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgaG92ZXI6Ym9yZGVyLXNsYXRlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMVwiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCLXlNeX15zXoyDXntek16rXlyBBUElcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAg8J+UkSA8c3BhbiBjbGFzc05hbWU9XCJoaWRkZW4gc206aW5saW5lXCI+QVBJPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uTmF2aWdhdGUoQXBwVmlldy5DUkVBVEUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1raWQteWVsbG93IGhvdmVyOmJnLXllbGxvdy00MDAgdGV4dC1raWQtdGV4dCBmb250LWJvbGQgcHktMiBweC02IHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLXRyYW5zZm9ybSB0cmFuc2Zvcm0gaG92ZXI6c2NhbGUtMTA1IHNoYWRvdy1tZFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFN0YXJ0IENyZWF0aW5nXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L25hdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2hlYWRlcj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkFwcFZpZXciLCJIZWFkZXIiLCJvbk5hdmlnYXRlIiwib25DaGFuZ2VLZXkiLCJvblNob3dHYWxsZXJ5IiwiaGVhZGVyIiwiY2xhc3NOYW1lIiwiZGl2Iiwib25DbGljayIsIkhPTUUiLCJzcGFuIiwiaDEiLCJuYXYiLCJidXR0b24iLCJ0aXRsZSIsIkNSRUFURSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./components/Header.tsx\n");

/***/ }),

/***/ "(ssr)/./components/Hero.tsx":
/*!*****************************!*\
  !*** ./components/Hero.tsx ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\nconst Hero = ({ onStart })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative overflow-hidden bg-sky-50 py-16 sm:py-24\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center text-center\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                    className: \"text-sm font-bold text-kid-blue uppercase tracking-wide mb-2\",\n                    children: \"The Magic of AI for Kids\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                    lineNumber: 13,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                    className: \"text-4xl sm:text-6xl font-extrabold text-slate-800 mb-6 leading-tight\",\n                    children: [\n                        \"Create Magical Stories \",\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                            lineNumber: 17,\n                            columnNumber: 34\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"text-kid-orange\",\n                            children: \"In Seconds.\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                            lineNumber: 18,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                    lineNumber: 16,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-xl text-slate-600 max-w-2xl mx-auto mb-10\",\n                    children: \"Turn any idea into a fully illustrated children's book, complete with educational values, Hebrew translations, and beautiful characters.\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col sm:flex-row gap-4\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onStart,\n                        className: \"bg-kid-blue text-white text-xl font-bold py-4 px-10 rounded-full shadow-lg hover:bg-teal-400 hover:shadow-xl transition-all transform hover:-translate-y-1\",\n                        children: \"Create a Book Now \"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                        lineNumber: 26,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                    lineNumber: 25,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-3 gap-8 mt-20 text-left\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-white p-8 rounded-3xl shadow-sm border border-slate-100\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-4xl mb-4\",\n                                    children: \"\\uD83C\\uDFA8\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 37,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-xl font-bold text-slate-800 mb-2\",\n                                    children: \"Instant Illustrations\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 38,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-slate-600\",\n                                    children: \"Magical 3D Pixar-style visuals generated automatically for your story.\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 39,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                            lineNumber: 36,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-white p-8 rounded-3xl shadow-sm border border-slate-100\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-4xl mb-4\",\n                                    children: \"\\uD83E\\uDDE0\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 42,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-xl font-bold text-slate-800 mb-2\",\n                                    children: \"Educational Value\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 43,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-slate-600\",\n                                    children: \"Every story comes with a tailored moral, learning goals, and age-appropriate language.\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 44,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                            lineNumber: 41,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-white p-8 rounded-3xl shadow-sm border border-slate-100\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-4xl mb-4\",\n                                    children: \"\\uD83C\\uDF0D\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 47,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-xl font-bold text-slate-800 mb-2\",\n                                    children: \"Bilingual\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 48,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-slate-600\",\n                                    children: \"Automatic translation between English and Hebrew to support language learning.\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                                    lineNumber: 49,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                            lineNumber: 46,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n                    lineNumber: 35,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n            lineNumber: 12,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\shahar\\\\bookai\\\\components\\\\Hero.tsx\",\n        lineNumber: 11,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Hero);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9jb21wb25lbnRzL0hlcm8udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUV5QjtBQU16QixNQUFNQyxPQUE0QixDQUFDLEVBQUVDLE9BQU8sRUFBRTtJQUM1QyxxQkFDRSw4REFBQ0M7UUFBSUMsV0FBVTtrQkFDYiw0RUFBQ0Q7WUFBSUMsV0FBVTs7OEJBQ2IsOERBQUNDO29CQUFHRCxXQUFVOzhCQUErRDs7Ozs7OzhCQUc3RSw4REFBQ0U7b0JBQUdGLFdBQVU7O3dCQUF3RTtzQ0FDN0QsOERBQUNHOzs7OztzQ0FDeEIsOERBQUNDOzRCQUFLSixXQUFVO3NDQUFrQjs7Ozs7Ozs7Ozs7OzhCQUVwQyw4REFBQ0s7b0JBQUVMLFdBQVU7OEJBQXNEOzs7Ozs7OEJBS25FLDhEQUFDRDtvQkFBSUMsV0FBVTs4QkFDYiw0RUFBQ007d0JBQ0NDLFNBQVNUO3dCQUNURSxXQUFVO2tDQUNYOzs7Ozs7Ozs7Ozs4QkFNSCw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDRDs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNEO29DQUFJQyxXQUFVOzhDQUFnQjs7Ozs7OzhDQUMvQiw4REFBQ1E7b0NBQUdSLFdBQVU7OENBQXdDOzs7Ozs7OENBQ3RELDhEQUFDSztvQ0FBRUwsV0FBVTs4Q0FBaUI7Ozs7Ozs7Ozs7OztzQ0FFaEMsOERBQUNEOzRCQUFJQyxXQUFVOzs4Q0FDYiw4REFBQ0Q7b0NBQUlDLFdBQVU7OENBQWdCOzs7Ozs7OENBQy9CLDhEQUFDUTtvQ0FBR1IsV0FBVTs4Q0FBd0M7Ozs7Ozs4Q0FDdEQsOERBQUNLO29DQUFFTCxXQUFVOzhDQUFpQjs7Ozs7Ozs7Ozs7O3NDQUVoQyw4REFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDRDtvQ0FBSUMsV0FBVTs4Q0FBZ0I7Ozs7Ozs4Q0FDL0IsOERBQUNRO29DQUFHUixXQUFVOzhDQUF3Qzs7Ozs7OzhDQUN0RCw4REFBQ0s7b0NBQUVMLFdBQVU7OENBQWlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU0xQztBQUVBLGlFQUFlSCxJQUFJQSxFQUFBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExFTk9WT1xcRGVza3RvcFxcc2hhaGFyXFxib29rYWlcXGNvbXBvbmVudHNcXEhlcm8udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmludGVyZmFjZSBIZXJvUHJvcHMge1xuICBvblN0YXJ0OiAoKSA9PiB2b2lkXG59XG5cbmNvbnN0IEhlcm86IFJlYWN0LkZDPEhlcm9Qcm9wcz4gPSAoeyBvblN0YXJ0IH0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIG92ZXJmbG93LWhpZGRlbiBiZy1za3ktNTAgcHktMTYgc206cHktMjRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgbWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LTggZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1ib2xkIHRleHQta2lkLWJsdWUgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgbWItMlwiPlxuICAgICAgICAgIFRoZSBNYWdpYyBvZiBBSSBmb3IgS2lkc1xuICAgICAgICA8L2gyPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC00eGwgc206dGV4dC02eGwgZm9udC1leHRyYWJvbGQgdGV4dC1zbGF0ZS04MDAgbWItNiBsZWFkaW5nLXRpZ2h0XCI+XG4gICAgICAgICAgQ3JlYXRlIE1hZ2ljYWwgU3RvcmllcyA8YnIgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWtpZC1vcmFuZ2VcIj5JbiBTZWNvbmRzLjwvc3Bhbj5cbiAgICAgICAgPC9oMT5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LXhsIHRleHQtc2xhdGUtNjAwIG1heC13LTJ4bCBteC1hdXRvIG1iLTEwXCI+XG4gICAgICAgICAgVHVybiBhbnkgaWRlYSBpbnRvIGEgZnVsbHkgaWxsdXN0cmF0ZWQgY2hpbGRyZW4mYXBvcztzIGJvb2ssIGNvbXBsZXRlIHdpdGggZWR1Y2F0aW9uYWwgdmFsdWVzLFxuICAgICAgICAgIEhlYnJldyB0cmFuc2xhdGlvbnMsIGFuZCBiZWF1dGlmdWwgY2hhcmFjdGVycy5cbiAgICAgICAgPC9wPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBzbTpmbGV4LXJvdyBnYXAtNFwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uU3RhcnR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1raWQtYmx1ZSB0ZXh0LXdoaXRlIHRleHQteGwgZm9udC1ib2xkIHB5LTQgcHgtMTAgcm91bmRlZC1mdWxsIHNoYWRvdy1sZyBob3ZlcjpiZy10ZWFsLTQwMCBob3ZlcjpzaGFkb3cteGwgdHJhbnNpdGlvbi1hbGwgdHJhbnNmb3JtIGhvdmVyOi10cmFuc2xhdGUteS0xXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICBDcmVhdGUgYSBCb29rIE5vdyDinKhcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEZlYXR1cmUgR3JpZCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC04IG10LTIwIHRleHQtbGVmdFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC04IHJvdW5kZWQtM3hsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBtYi00XCI+8J+OqDwvZGl2PlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTJcIj5JbnN0YW50IElsbHVzdHJhdGlvbnM8L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS02MDBcIj5NYWdpY2FsIDNEIFBpeGFyLXN0eWxlIHZpc3VhbHMgZ2VuZXJhdGVkIGF1dG9tYXRpY2FsbHkgZm9yIHlvdXIgc3RvcnkuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC04IHJvdW5kZWQtM3hsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBtYi00XCI+8J+noDwvZGl2PlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTJcIj5FZHVjYXRpb25hbCBWYWx1ZTwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMFwiPkV2ZXJ5IHN0b3J5IGNvbWVzIHdpdGggYSB0YWlsb3JlZCBtb3JhbCwgbGVhcm5pbmcgZ29hbHMsIGFuZCBhZ2UtYXBwcm9wcmlhdGUgbGFuZ3VhZ2UuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC04IHJvdW5kZWQtM3hsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBtYi00XCI+8J+MjTwvZGl2PlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTJcIj5CaWxpbmd1YWw8L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS02MDBcIj5BdXRvbWF0aWMgdHJhbnNsYXRpb24gYmV0d2VlbiBFbmdsaXNoIGFuZCBIZWJyZXcgdG8gc3VwcG9ydCBsYW5ndWFnZSBsZWFybmluZy48L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgSGVyb1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiSGVybyIsIm9uU3RhcnQiLCJkaXYiLCJjbGFzc05hbWUiLCJoMiIsImgxIiwiYnIiLCJzcGFuIiwicCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJoMyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./components/Hero.tsx\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!*******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \*******************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(ssr)/./app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNhcHAlNUMlNUNwYWdlLnRzeCUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsd0lBQThGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXGFwcFxcXFxwYWdlLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/builtin/global-error.js */ \"(ssr)/./node_modules/next/dist/client/components/builtin/global-error.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-segment.js */ \"(ssr)/./node_modules/next/dist/client/components/client-segment.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/http-access-fallback/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/metadata/async-metadata.js */ \"(ssr)/./node_modules/next/dist/client/components/metadata/async-metadata.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/framework/boundary-components.js */ \"(ssr)/./node_modules/next/dist/lib/framework/boundary-components.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./node_modules/next/dist/lib/metadata/generate/icon-mark.js */ \"(ssr)/./node_modules/next/dist/lib/metadata/generate/icon-mark.js\"));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js */ \"(ssr)/./node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNidWlsdGluJTVDJTVDZ2xvYmFsLWVycm9yLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q2NsaWVudCU1QyU1Q2NvbXBvbmVudHMlNUMlNUNjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDVXNlcnMlNUMlNUNMRU5PVk8lNUMlNUNEZXNrdG9wJTVDJTVDc2hhaGFyJTVDJTVDYm9va2FpJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNjbGllbnQlNUMlNUNjb21wb25lbnRzJTVDJTVDY2xpZW50LXNlZ21lbnQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2h0dHAtYWNjZXNzLWZhbGxiYWNrJTVDJTVDZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q2xheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q21ldGFkYXRhJTVDJTVDYXN5bmMtbWV0YWRhdGEuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDY2xpZW50JTVDJTVDY29tcG9uZW50cyU1QyU1Q3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDTEVOT1ZPJTVDJTVDRGVza3RvcCU1QyU1Q3NoYWhhciU1QyU1Q2Jvb2thaSU1QyU1Q25vZGVfbW9kdWxlcyU1QyU1Q25leHQlNUMlNUNkaXN0JTVDJTVDbGliJTVDJTVDZnJhbWV3b3JrJTVDJTVDYm91bmRhcnktY29tcG9uZW50cy5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjJDJTNBJTVDJTVDVXNlcnMlNUMlNUNMRU5PVk8lNUMlNUNEZXNrdG9wJTVDJTVDc2hhaGFyJTVDJTVDYm9va2FpJTVDJTVDbm9kZV9tb2R1bGVzJTVDJTVDbmV4dCU1QyU1Q2Rpc3QlNUMlNUNsaWIlNUMlNUNtZXRhZGF0YSU1QyU1Q2dlbmVyYXRlJTVDJTVDaWNvbi1tYXJrLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMkMlM0ElNUMlNUNVc2VycyU1QyU1Q0xFTk9WTyU1QyU1Q0Rlc2t0b3AlNUMlNUNzaGFoYXIlNUMlNUNib29rYWklNUMlNUNub2RlX21vZHVsZXMlNUMlNUNuZXh0JTVDJTVDZGlzdCU1QyU1Q25leHQtZGV2dG9vbHMlNUMlNUN1c2Vyc3BhY2UlNUMlNUNhcHAlNUMlNUNzZWdtZW50LWV4cGxvcmVyLW5vZGUuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0Qmc2VydmVyPXRydWUhIiwibWFwcGluZ3MiOiJBQUFBLHNQQUF1SjtBQUN2SjtBQUNBLG9PQUE2STtBQUM3STtBQUNBLDBPQUFnSjtBQUNoSjtBQUNBLG9SQUFzSztBQUN0SztBQUNBLHdPQUErSTtBQUMvSTtBQUNBLDRQQUEwSjtBQUMxSjtBQUNBLHNRQUE4SjtBQUM5SjtBQUNBLDRPQUFpSjtBQUNqSjtBQUNBLGtPQUFnSjtBQUNoSjtBQUNBLDRRQUFrSyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGJ1aWx0aW5cXFxcZ2xvYmFsLWVycm9yLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcY2xpZW50LXBhZ2UuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXHNoYWhhclxcXFxib29rYWlcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxjbGllbnQtc2VnbWVudC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGh0dHAtYWNjZXNzLWZhbGxiYWNrXFxcXGVycm9yLWJvdW5kYXJ5LmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcbGF5b3V0LXJvdXRlci5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXG1ldGFkYXRhXFxcXGFzeW5jLW1ldGFkYXRhLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxVc2Vyc1xcXFxMRU5PVk9cXFxcRGVza3RvcFxcXFxzaGFoYXJcXFxcYm9va2FpXFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxccmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxmcmFtZXdvcmtcXFxcYm91bmRhcnktY29tcG9uZW50cy5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcVXNlcnNcXFxcTEVOT1ZPXFxcXERlc2t0b3BcXFxcc2hhaGFyXFxcXGJvb2thaVxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGxpYlxcXFxtZXRhZGF0YVxcXFxnZW5lcmF0ZVxcXFxpY29uLW1hcmsuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXHNoYWhhclxcXFxib29rYWlcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxuZXh0LWRldnRvb2xzXFxcXHVzZXJzcGFjZVxcXFxhcHBcXFxcc2VnbWVudC1leHBsb3Jlci1ub2RlLmpzXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cbuiltin%5C%5Cglobal-error.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cclient-segment.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Chttp-access-fallback%5C%5Cerror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Clayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Cmetadata%5C%5Casync-metadata.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cclient%5C%5Ccomponents%5C%5Crender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cframework%5C%5Cboundary-components.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Clib%5C%5Cmetadata%5C%5Cgenerate%5C%5Cicon-mark.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cdist%5C%5Cnext-devtools%5C%5Cuserspace%5C%5Capp%5C%5Csegment-explorer-node.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Nunito%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-nunito%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22nunito%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Fredoka%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-fredoka%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22fredoka%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Rubik%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%2C%5C%22hebrew%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-rubik%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22rubik%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Nunito%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-nunito%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22nunito%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Fredoka%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-fredoka%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22fredoka%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Cnode_modules%5C%5Cnext%5C%5Cfont%5C%5Cgoogle%5C%5Ctarget.css%3F%7B%5C%22path%5C%22%3A%5C%22app%5C%5C%5C%5Clayout.tsx%5C%22%2C%5C%22import%5C%22%3A%5C%22Rubik%5C%22%2C%5C%22arguments%5C%22%3A%5B%7B%5C%22subsets%5C%22%3A%5B%5C%22latin%5C%22%2C%5C%22hebrew%5C%22%5D%2C%5C%22variable%5C%22%3A%5C%22--font-rubik%5C%22%2C%5C%22display%5C%22%3A%5C%22swap%5C%22%7D%5D%2C%5C%22variableName%5C%22%3A%5C%22rubik%5C%22%7D%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5CLENOVO%5C%5CDesktop%5C%5Cshahar%5C%5Cbookai%5C%5Capp%5C%5Cglobals.css%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./services/apiKeyManager.ts":
/*!***********************************!*\
  !*** ./services/apiKeyManager.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiKeyManager: () => (/* binding */ apiKeyManager)\n/* harmony export */ });\n/* __next_internal_client_entry_do_not_use__ apiKeyManager auto */ const API_KEY_STORAGE_KEY = 'kidcraft_gemini_api_key';\nconst apiKeyManager = {\n    getKey: ()=>{\n        if (true) return null;\n        return localStorage.getItem(API_KEY_STORAGE_KEY);\n    },\n    setKey: (key)=>{\n        if (true) return;\n        localStorage.setItem(API_KEY_STORAGE_KEY, key);\n    },\n    removeKey: ()=>{\n        if (true) return;\n        localStorage.removeItem(API_KEY_STORAGE_KEY);\n    },\n    hasKey: ()=>{\n        return !!apiKeyManager.getKey();\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zZXJ2aWNlcy9hcGlLZXlNYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7bUVBRUEsTUFBTUEsc0JBQXNCO0FBRXJCLE1BQU1DLGdCQUFnQjtJQUN6QkMsUUFBUTtRQUNKLElBQUksSUFBNkIsRUFBRSxPQUFPO1FBQzFDLE9BQU9DLGFBQWFDLE9BQU8sQ0FBQ0o7SUFDaEM7SUFFQUssUUFBUSxDQUFDQztRQUNMLElBQUksSUFBNkIsRUFBRTtRQUNuQ0gsYUFBYUksT0FBTyxDQUFDUCxxQkFBcUJNO0lBQzlDO0lBRUFFLFdBQVc7UUFDUCxJQUFJLElBQTZCLEVBQUU7UUFDbkNMLGFBQWFNLFVBQVUsQ0FBQ1Q7SUFDNUI7SUFFQVUsUUFBUTtRQUNKLE9BQU8sQ0FBQyxDQUFDVCxjQUFjQyxNQUFNO0lBQ2pDO0FBQ0osRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMRU5PVk9cXERlc2t0b3BcXHNoYWhhclxcYm9va2FpXFxzZXJ2aWNlc1xcYXBpS2V5TWFuYWdlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmNvbnN0IEFQSV9LRVlfU1RPUkFHRV9LRVkgPSAna2lkY3JhZnRfZ2VtaW5pX2FwaV9rZXknXHJcblxyXG5leHBvcnQgY29uc3QgYXBpS2V5TWFuYWdlciA9IHtcclxuICAgIGdldEtleTogKCk6IHN0cmluZyB8IG51bGwgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIG51bGxcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oQVBJX0tFWV9TVE9SQUdFX0tFWSlcclxuICAgIH0sXHJcblxyXG4gICAgc2V0S2V5OiAoa2V5OiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVyblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFQSV9LRVlfU1RPUkFHRV9LRVksIGtleSlcclxuICAgIH0sXHJcblxyXG4gICAgcmVtb3ZlS2V5OiAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShBUElfS0VZX1NUT1JBR0VfS0VZKVxyXG4gICAgfSxcclxuXHJcbiAgICBoYXNLZXk6ICgpOiBib29sZWFuID0+IHtcclxuICAgICAgICByZXR1cm4gISFhcGlLZXlNYW5hZ2VyLmdldEtleSgpXHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkFQSV9LRVlfU1RPUkFHRV9LRVkiLCJhcGlLZXlNYW5hZ2VyIiwiZ2V0S2V5IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEtleSIsImtleSIsInNldEl0ZW0iLCJyZW1vdmVLZXkiLCJyZW1vdmVJdGVtIiwiaGFzS2V5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./services/apiKeyManager.ts\n");

/***/ }),

/***/ "(ssr)/./services/firebase.ts":
/*!******************************!*\
  !*** ./services/firebase.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkSimilarPrompts: () => (/* binding */ checkSimilarPrompts),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   getSavedBooks: () => (/* binding */ getSavedBooks),\n/* harmony export */   saveBookPrompts: () => (/* binding */ saveBookPrompts),\n/* harmony export */   saveBookRecord: () => (/* binding */ saveBookRecord),\n/* harmony export */   storage: () => (/* binding */ storage),\n/* harmony export */   uploadAudio: () => (/* binding */ uploadAudio),\n/* harmony export */   uploadPdf: () => (/* binding */ uploadPdf),\n/* harmony export */   uploadThumbnail: () => (/* binding */ uploadThumbnail)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(ssr)/./node_modules/firebase/app/dist/index.mjs\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(ssr)/./node_modules/firebase/firestore/dist/index.mjs\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/storage */ \"(ssr)/./node_modules/firebase/storage/dist/index.mjs\");\n/* __next_internal_client_entry_do_not_use__ saveBookPrompts,uploadPdf,uploadAudio,uploadThumbnail,saveBookRecord,getSavedBooks,checkSimilarPrompts,db,storage auto */ \n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyApO7AYdRZJwORAdoRnB1vjPGtFMcP0j4E\",\n    authDomain: \"kidi-books.firebaseapp.com\",\n    projectId: \"kidi-books\",\n    storageBucket: \"kidi-books.firebasestorage.app\",\n    messagingSenderId: \"346803654720\",\n    appId: \"1:346803654720:web:361e1abea9c8c42e6c0fa5\",\n    measurementId: \"G-XP7XC41LPY\"\n};\n// Initialize Firebase only once\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length === 0 ? (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig) : (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)()[0];\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\nconst storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.getStorage)(app);\n// Save a book's prompts to Firebase\nconst saveBookPrompts = async (record)=>{\n    try {\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, 'prompts'), {\n            ...record,\n            createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now()\n        });\n        console.log('Saved prompts to Firebase:', docRef.id);\n        return docRef.id;\n    } catch (error) {\n        console.error('Error saving to Firebase:', error);\n        throw error;\n    }\n};\n// Upload PDF to Firebase Storage\nconst uploadPdf = async (pdfBlob, bookTitle)=>{\n    try {\n        const safeTitle = bookTitle.replace(/[\\\\/:*?\"<>|]/g, '_');\n        const timestamp = Date.now();\n        const fileName = `books/${timestamp}_${safeTitle}.pdf`;\n        const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.ref)(storage, fileName);\n        await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.uploadBytes)(storageRef, pdfBlob, {\n            contentType: 'application/pdf'\n        });\n        const downloadUrl = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.getDownloadURL)(storageRef);\n        console.log('PDF uploaded to Firebase:', downloadUrl);\n        return downloadUrl;\n    } catch (error) {\n        console.error('Error uploading PDF:', error);\n        throw error;\n    }\n};\n// Upload Audio file to Firebase Storage\nconst uploadAudio = async (audioBlob, bookTitle, pageNumber)=>{\n    try {\n        const safeTitle = bookTitle.replace(/[\\\\/:*?\"<>|]/g, '_');\n        const timestamp = Date.now();\n        const fileName = `audio/${timestamp}_${safeTitle}_page_${pageNumber}.wav`;\n        const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.ref)(storage, fileName);\n        await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.uploadBytes)(storageRef, audioBlob, {\n            contentType: 'audio/wav'\n        });\n        const downloadUrl = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.getDownloadURL)(storageRef);\n        console.log('Audio uploaded to Firebase:', downloadUrl);\n        return downloadUrl;\n    } catch (error) {\n        console.error('Error uploading audio:', error);\n        throw error;\n    }\n};\n// Upload cover image as thumbnail\nconst uploadThumbnail = async (imageDataUrl, bookTitle)=>{\n    try {\n        // Convert data URL to blob\n        const response = await fetch(imageDataUrl);\n        const blob = await response.blob();\n        const safeTitle = bookTitle.replace(/[\\\\/:*?\"<>|]/g, '_');\n        const timestamp = Date.now();\n        const fileName = `thumbnails/${timestamp}_${safeTitle}.jpg`;\n        const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.ref)(storage, fileName);\n        await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.uploadBytes)(storageRef, blob, {\n            contentType: 'image/jpeg'\n        });\n        const downloadUrl = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.getDownloadURL)(storageRef);\n        console.log('Thumbnail uploaded to Firebase:', downloadUrl);\n        return downloadUrl;\n    } catch (error) {\n        console.error('Error uploading thumbnail:', error);\n        throw error;\n    }\n};\n// Save complete book record to Firestore\nconst saveBookRecord = async (bookTitle, pdfUrl, thumbnailUrl, audioUrls)=>{\n    try {\n        const bookData = {\n            title: bookTitle,\n            pdfUrl,\n            thumbnailUrl,\n            audioUrls,\n            createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now()\n        };\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, 'books'), bookData);\n        console.log('Book saved to Firebase:', docRef.id);\n        return docRef.id;\n    } catch (error) {\n        console.error('Error saving book:', error);\n        throw error;\n    }\n};\n// Get all saved books (from prompts collection)\nconst getSavedBooks = async ()=>{\n    try {\n        // Read from prompts collection since that's where we save\n        const promptsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, 'prompts'));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(promptsQuery);\n        return snapshot.docs.map((doc)=>{\n            const data = doc.data();\n            return {\n                id: doc.id,\n                title: data.bookTitle || ' ',\n                pdfUrl: data.drivePdfUrl || '',\n                driveZipUrl: data.driveZipUrl,\n                drivePdfUrl: data.drivePdfUrl,\n                thumbnailUrl: undefined,\n                createdAt: data.createdAt\n            };\n        });\n    } catch (error) {\n        console.error('Error getting saved books:', error);\n        return [];\n    }\n};\n// Check if a similar character/book already exists\nconst checkSimilarPrompts = async (mainCharacter, bookTitle)=>{\n    try {\n        const titleQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, 'prompts'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('bookTitle', '==', bookTitle));\n        const titleSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(titleQuery);\n        if (!titleSnapshot.empty) {\n            return {\n                exists: true,\n                similarTo: '   '\n            };\n        }\n        const charQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(db, 'prompts'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('mainCharacter', '==', mainCharacter));\n        const charSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(charQuery);\n        if (!charSnapshot.empty) {\n            return {\n                exists: true,\n                similarTo: '    '\n            };\n        }\n        return {\n            exists: false\n        };\n    } catch (error) {\n        console.error('Error checking Firebase:', error);\n        return {\n            exists: false\n        };\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zZXJ2aWNlcy9maXJlYmFzZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7dUtBRXFEO0FBQytEO0FBQ3JDO0FBRS9FLE1BQU1hLGlCQUFpQjtJQUNuQkMsUUFBUTtJQUNSQyxZQUFZO0lBQ1pDLFdBQVc7SUFDWEMsZUFBZTtJQUNmQyxtQkFBbUI7SUFDbkJDLE9BQU87SUFDUEMsZUFBZTtBQUNuQjtBQUVBLGdDQUFnQztBQUNoQyxNQUFNQyxNQUFNcEIscURBQU9BLEdBQUdxQixNQUFNLEtBQUssSUFBSXRCLDJEQUFhQSxDQUFDYSxrQkFBa0JaLHFEQUFPQSxFQUFFLENBQUMsRUFBRTtBQUNqRixNQUFNc0IsS0FBS3JCLGdFQUFZQSxDQUFDbUI7QUFDeEIsTUFBTUcsVUFBVWYsNERBQVVBLENBQUNZO0FBeUIzQixvQ0FBb0M7QUFDN0IsTUFBTUksa0JBQWtCLE9BQU9DO0lBQ2xDLElBQUk7UUFDQSxNQUFNQyxTQUFTLE1BQU12QiwwREFBTUEsQ0FBQ0QsOERBQVVBLENBQUNvQixJQUFJLFlBQVk7WUFDbkQsR0FBR0csTUFBTTtZQUNURSxXQUFXcEIseURBQVNBLENBQUNxQixHQUFHO1FBQzVCO1FBQ0FDLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJKLE9BQU9LLEVBQUU7UUFDbkQsT0FBT0wsT0FBT0ssRUFBRTtJQUNwQixFQUFFLE9BQU9DLE9BQU87UUFDWkgsUUFBUUcsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsTUFBTUE7SUFDVjtBQUNKLEVBQUM7QUFFRCxpQ0FBaUM7QUFDMUIsTUFBTUMsWUFBWSxPQUNyQkMsU0FDQUM7SUFFQSxJQUFJO1FBQ0EsTUFBTUMsWUFBWUQsVUFBVUUsT0FBTyxDQUFDLGlCQUFpQjtRQUNyRCxNQUFNQyxZQUFZQyxLQUFLWCxHQUFHO1FBQzFCLE1BQU1ZLFdBQVcsQ0FBQyxNQUFNLEVBQUVGLFVBQVUsQ0FBQyxFQUFFRixVQUFVLElBQUksQ0FBQztRQUV0RCxNQUFNSyxhQUFhaEMscURBQUdBLENBQUNjLFNBQVNpQjtRQUNoQyxNQUFNOUIsNkRBQVdBLENBQUMrQixZQUFZUCxTQUFTO1lBQ25DUSxhQUFhO1FBQ2pCO1FBRUEsTUFBTUMsY0FBYyxNQUFNaEMsZ0VBQWNBLENBQUM4QjtRQUN6Q1osUUFBUUMsR0FBRyxDQUFDLDZCQUE2QmE7UUFDekMsT0FBT0E7SUFDWCxFQUFFLE9BQU9YLE9BQU87UUFDWkgsUUFBUUcsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdEMsTUFBTUE7SUFDVjtBQUNKLEVBQUM7QUFFRCx3Q0FBd0M7QUFDakMsTUFBTVksY0FBYyxPQUN2QkMsV0FDQVYsV0FDQVc7SUFFQSxJQUFJO1FBQ0EsTUFBTVYsWUFBWUQsVUFBVUUsT0FBTyxDQUFDLGlCQUFpQjtRQUNyRCxNQUFNQyxZQUFZQyxLQUFLWCxHQUFHO1FBQzFCLE1BQU1ZLFdBQVcsQ0FBQyxNQUFNLEVBQUVGLFVBQVUsQ0FBQyxFQUFFRixVQUFVLE1BQU0sRUFBRVUsV0FBVyxJQUFJLENBQUM7UUFFekUsTUFBTUwsYUFBYWhDLHFEQUFHQSxDQUFDYyxTQUFTaUI7UUFDaEMsTUFBTTlCLDZEQUFXQSxDQUFDK0IsWUFBWUksV0FBVztZQUNyQ0gsYUFBYTtRQUNqQjtRQUVBLE1BQU1DLGNBQWMsTUFBTWhDLGdFQUFjQSxDQUFDOEI7UUFDekNaLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0JhO1FBQzNDLE9BQU9BO0lBQ1gsRUFBRSxPQUFPWCxPQUFPO1FBQ1pILFFBQVFHLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE1BQU1BO0lBQ1Y7QUFDSixFQUFDO0FBRUQsa0NBQWtDO0FBQzNCLE1BQU1lLGtCQUFrQixPQUMzQkMsY0FDQWI7SUFFQSxJQUFJO1FBQ0EsMkJBQTJCO1FBQzNCLE1BQU1jLFdBQVcsTUFBTUMsTUFBTUY7UUFDN0IsTUFBTUcsT0FBTyxNQUFNRixTQUFTRSxJQUFJO1FBRWhDLE1BQU1mLFlBQVlELFVBQVVFLE9BQU8sQ0FBQyxpQkFBaUI7UUFDckQsTUFBTUMsWUFBWUMsS0FBS1gsR0FBRztRQUMxQixNQUFNWSxXQUFXLENBQUMsV0FBVyxFQUFFRixVQUFVLENBQUMsRUFBRUYsVUFBVSxJQUFJLENBQUM7UUFFM0QsTUFBTUssYUFBYWhDLHFEQUFHQSxDQUFDYyxTQUFTaUI7UUFDaEMsTUFBTTlCLDZEQUFXQSxDQUFDK0IsWUFBWVUsTUFBTTtZQUNoQ1QsYUFBYTtRQUNqQjtRQUVBLE1BQU1DLGNBQWMsTUFBTWhDLGdFQUFjQSxDQUFDOEI7UUFDekNaLFFBQVFDLEdBQUcsQ0FBQyxtQ0FBbUNhO1FBQy9DLE9BQU9BO0lBQ1gsRUFBRSxPQUFPWCxPQUFPO1FBQ1pILFFBQVFHLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE1BQU1BO0lBQ1Y7QUFDSixFQUFDO0FBRUQseUNBQXlDO0FBQ2xDLE1BQU1vQixpQkFBaUIsT0FDMUJqQixXQUNBa0IsUUFDQUMsY0FDQUM7SUFFQSxJQUFJO1FBQ0EsTUFBTUMsV0FBa0M7WUFDcENDLE9BQU90QjtZQUNQa0I7WUFDQUM7WUFDQUM7WUFDQTVCLFdBQVdwQix5REFBU0EsQ0FBQ3FCLEdBQUc7UUFDNUI7UUFFQSxNQUFNRixTQUFTLE1BQU12QiwwREFBTUEsQ0FBQ0QsOERBQVVBLENBQUNvQixJQUFJLFVBQVVrQztRQUNyRDNCLFFBQVFDLEdBQUcsQ0FBQywyQkFBMkJKLE9BQU9LLEVBQUU7UUFDaEQsT0FBT0wsT0FBT0ssRUFBRTtJQUNwQixFQUFFLE9BQU9DLE9BQU87UUFDWkgsUUFBUUcsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsTUFBTUE7SUFDVjtBQUNKLEVBQUM7QUFFRCxnREFBZ0Q7QUFDekMsTUFBTTBCLGdCQUFnQjtJQUN6QixJQUFJO1FBQ0EsMERBQTBEO1FBQzFELE1BQU1DLGVBQWV2RCx5REFBS0EsQ0FBQ0YsOERBQVVBLENBQUNvQixJQUFJO1FBQzFDLE1BQU1zQyxXQUFXLE1BQU10RCwyREFBT0EsQ0FBQ3FEO1FBRS9CLE9BQU9DLFNBQVNDLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxDQUFBQTtZQUNyQixNQUFNQyxPQUFPRCxJQUFJQyxJQUFJO1lBQ3JCLE9BQU87Z0JBQ0hqQyxJQUFJZ0MsSUFBSWhDLEVBQUU7Z0JBQ1YwQixPQUFPTyxLQUFLN0IsU0FBUyxJQUFJO2dCQUN6QmtCLFFBQVFXLEtBQUtDLFdBQVcsSUFBSTtnQkFDNUJDLGFBQWFGLEtBQUtFLFdBQVc7Z0JBQzdCRCxhQUFhRCxLQUFLQyxXQUFXO2dCQUM3QlgsY0FBY2E7Z0JBQ2R4QyxXQUFXcUMsS0FBS3JDLFNBQVM7WUFDN0I7UUFDSjtJQUNKLEVBQUUsT0FBT0ssT0FBTztRQUNaSCxRQUFRRyxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPLEVBQUU7SUFDYjtBQUNKLEVBQUM7QUFFRCxtREFBbUQ7QUFDNUMsTUFBTW9DLHNCQUFzQixPQUMvQkMsZUFDQWxDO0lBRUEsSUFBSTtRQUNBLE1BQU1tQyxhQUFhbEUseURBQUtBLENBQ3BCRiw4REFBVUEsQ0FBQ29CLElBQUksWUFDZmpCLHlEQUFLQSxDQUFDLGFBQWEsTUFBTThCO1FBRTdCLE1BQU1vQyxnQkFBZ0IsTUFBTWpFLDJEQUFPQSxDQUFDZ0U7UUFFcEMsSUFBSSxDQUFDQyxjQUFjQyxLQUFLLEVBQUU7WUFDdEIsT0FBTztnQkFBRUMsUUFBUTtnQkFBTUMsV0FBVztZQUF1QjtRQUM3RDtRQUVBLE1BQU1DLFlBQVl2RSx5REFBS0EsQ0FDbkJGLDhEQUFVQSxDQUFDb0IsSUFBSSxZQUNmakIseURBQUtBLENBQUMsaUJBQWlCLE1BQU1nRTtRQUVqQyxNQUFNTyxlQUFlLE1BQU10RSwyREFBT0EsQ0FBQ3FFO1FBRW5DLElBQUksQ0FBQ0MsYUFBYUosS0FBSyxFQUFFO1lBQ3JCLE9BQU87Z0JBQUVDLFFBQVE7Z0JBQU1DLFdBQVc7WUFBNEI7UUFDbEU7UUFFQSxPQUFPO1lBQUVELFFBQVE7UUFBTTtJQUMzQixFQUFFLE9BQU96QyxPQUFPO1FBQ1pILFFBQVFHLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE9BQU87WUFBRXlDLFFBQVE7UUFBTTtJQUMzQjtBQUNKLEVBQUM7QUFFcUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTEVOT1ZPXFxEZXNrdG9wXFxzaGFoYXJcXGJvb2thaVxcc2VydmljZXNcXGZpcmViYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCwgZ2V0QXBwcyB9IGZyb20gJ2ZpcmViYXNlL2FwcCdcclxuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlLCBjb2xsZWN0aW9uLCBhZGREb2MsIHF1ZXJ5LCB3aGVyZSwgZ2V0RG9jcywgVGltZXN0YW1wLCBkb2MsIHNldERvYyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSdcclxuaW1wb3J0IHsgZ2V0U3RvcmFnZSwgcmVmLCB1cGxvYWRCeXRlcywgZ2V0RG93bmxvYWRVUkwgfSBmcm9tICdmaXJlYmFzZS9zdG9yYWdlJ1xyXG5cclxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcbiAgICBhcGlLZXk6IFwiQUl6YVN5QXBPN0FZZFJaSndPUkFkb1JuQjF2alBHdEZNY1AwajRFXCIsXHJcbiAgICBhdXRoRG9tYWluOiBcImtpZGktYm9va3MuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgICBwcm9qZWN0SWQ6IFwia2lkaS1ib29rc1wiLFxyXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJraWRpLWJvb2tzLmZpcmViYXNlc3RvcmFnZS5hcHBcIixcclxuICAgIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjM0NjgwMzY1NDcyMFwiLFxyXG4gICAgYXBwSWQ6IFwiMTozNDY4MDM2NTQ3MjA6d2ViOjM2MWUxYWJlYTljOGM0MmU2YzBmYTVcIixcclxuICAgIG1lYXN1cmVtZW50SWQ6IFwiRy1YUDdYQzQxTFBZXCJcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZSBvbmx5IG9uY2VcclxuY29uc3QgYXBwID0gZ2V0QXBwcygpLmxlbmd0aCA9PT0gMCA/IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpIDogZ2V0QXBwcygpWzBdXHJcbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcClcclxuY29uc3Qgc3RvcmFnZSA9IGdldFN0b3JhZ2UoYXBwKVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9tcHRSZWNvcmQge1xyXG4gICAgYm9va1RpdGxlOiBzdHJpbmdcclxuICAgIG1haW5DaGFyYWN0ZXI6IHN0cmluZ1xyXG4gICAgc2Vjb25kYXJ5Q2hhcmFjdGVyPzogc3RyaW5nXHJcbiAgICBhcnRTdHlsZTogc3RyaW5nXHJcbiAgICB0b3BpYzogc3RyaW5nXHJcbiAgICBjcmVhdGVkQXQ6IFRpbWVzdGFtcFxyXG4gICAgaW1hZ2VQcm9tcHRzOiBzdHJpbmdbXVxyXG4gICAgZHJpdmVaaXBVcmw/OiBzdHJpbmdcclxuICAgIGRyaXZlUGRmVXJsPzogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2F2ZWRCb29rIHtcclxuICAgIGlkOiBzdHJpbmdcclxuICAgIHRpdGxlOiBzdHJpbmdcclxuICAgIHBkZlVybDogc3RyaW5nXHJcbiAgICBkcml2ZVppcFVybD86IHN0cmluZ1xyXG4gICAgZHJpdmVQZGZVcmw/OiBzdHJpbmdcclxuICAgIGF1ZGlvVXJscz86IHN0cmluZ1tdXHJcbiAgICB0aHVtYm5haWxVcmw/OiBzdHJpbmdcclxuICAgIGNyZWF0ZWRBdDogVGltZXN0YW1wXHJcbn1cclxuXHJcbi8vIFNhdmUgYSBib29rJ3MgcHJvbXB0cyB0byBGaXJlYmFzZVxyXG5leHBvcnQgY29uc3Qgc2F2ZUJvb2tQcm9tcHRzID0gYXN5bmMgKHJlY29yZDogT21pdDxQcm9tcHRSZWNvcmQsICdjcmVhdGVkQXQnPik6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAncHJvbXB0cycpLCB7XHJcbiAgICAgICAgICAgIC4uLnJlY29yZCxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBUaW1lc3RhbXAubm93KClcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTYXZlZCBwcm9tcHRzIHRvIEZpcmViYXNlOicsIGRvY1JlZi5pZClcclxuICAgICAgICByZXR1cm4gZG9jUmVmLmlkXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB0byBGaXJlYmFzZTonLCBlcnJvcilcclxuICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBVcGxvYWQgUERGIHRvIEZpcmViYXNlIFN0b3JhZ2VcclxuZXhwb3J0IGNvbnN0IHVwbG9hZFBkZiA9IGFzeW5jIChcclxuICAgIHBkZkJsb2I6IEJsb2IsXHJcbiAgICBib29rVGl0bGU6IHN0cmluZ1xyXG4pOiBQcm9taXNlPHN0cmluZz4gPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzYWZlVGl0bGUgPSBib29rVGl0bGUucmVwbGFjZSgvW1xcXFwvOio/XCI8PnxdL2csICdfJylcclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpXHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgYm9va3MvJHt0aW1lc3RhbXB9XyR7c2FmZVRpdGxlfS5wZGZgXHJcblxyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSByZWYoc3RvcmFnZSwgZmlsZU5hbWUpXHJcbiAgICAgICAgYXdhaXQgdXBsb2FkQnl0ZXMoc3RvcmFnZVJlZiwgcGRmQmxvYiwge1xyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL3BkZidcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCBkb3dubG9hZFVybCA9IGF3YWl0IGdldERvd25sb2FkVVJMKHN0b3JhZ2VSZWYpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1BERiB1cGxvYWRlZCB0byBGaXJlYmFzZTonLCBkb3dubG9hZFVybClcclxuICAgICAgICByZXR1cm4gZG93bmxvYWRVcmxcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIFBERjonLCBlcnJvcilcclxuICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBVcGxvYWQgQXVkaW8gZmlsZSB0byBGaXJlYmFzZSBTdG9yYWdlXHJcbmV4cG9ydCBjb25zdCB1cGxvYWRBdWRpbyA9IGFzeW5jIChcclxuICAgIGF1ZGlvQmxvYjogQmxvYixcclxuICAgIGJvb2tUaXRsZTogc3RyaW5nLFxyXG4gICAgcGFnZU51bWJlcjogbnVtYmVyXHJcbik6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNhZmVUaXRsZSA9IGJvb2tUaXRsZS5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJ18nKVxyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KClcclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGBhdWRpby8ke3RpbWVzdGFtcH1fJHtzYWZlVGl0bGV9X3BhZ2VfJHtwYWdlTnVtYmVyfS53YXZgXHJcblxyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSByZWYoc3RvcmFnZSwgZmlsZU5hbWUpXHJcbiAgICAgICAgYXdhaXQgdXBsb2FkQnl0ZXMoc3RvcmFnZVJlZiwgYXVkaW9CbG9iLCB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXVkaW8vd2F2J1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNvbnN0IGRvd25sb2FkVXJsID0gYXdhaXQgZ2V0RG93bmxvYWRVUkwoc3RvcmFnZVJlZilcclxuICAgICAgICBjb25zb2xlLmxvZygnQXVkaW8gdXBsb2FkZWQgdG8gRmlyZWJhc2U6JywgZG93bmxvYWRVcmwpXHJcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkVXJsXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBhdWRpbzonLCBlcnJvcilcclxuICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBVcGxvYWQgY292ZXIgaW1hZ2UgYXMgdGh1bWJuYWlsXHJcbmV4cG9ydCBjb25zdCB1cGxvYWRUaHVtYm5haWwgPSBhc3luYyAoXHJcbiAgICBpbWFnZURhdGFVcmw6IHN0cmluZyxcclxuICAgIGJvb2tUaXRsZTogc3RyaW5nXHJcbik6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgZGF0YSBVUkwgdG8gYmxvYlxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW1hZ2VEYXRhVXJsKVxyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKClcclxuXHJcbiAgICAgICAgY29uc3Qgc2FmZVRpdGxlID0gYm9va1RpdGxlLnJlcGxhY2UoL1tcXFxcLzoqP1wiPD58XS9nLCAnXycpXHJcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKVxyXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYHRodW1ibmFpbHMvJHt0aW1lc3RhbXB9XyR7c2FmZVRpdGxlfS5qcGdgXHJcblxyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSByZWYoc3RvcmFnZSwgZmlsZU5hbWUpXHJcbiAgICAgICAgYXdhaXQgdXBsb2FkQnl0ZXMoc3RvcmFnZVJlZiwgYmxvYiwge1xyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2ltYWdlL2pwZWcnXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY29uc3QgZG93bmxvYWRVcmwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChzdG9yYWdlUmVmKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUaHVtYm5haWwgdXBsb2FkZWQgdG8gRmlyZWJhc2U6JywgZG93bmxvYWRVcmwpXHJcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkVXJsXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwbG9hZGluZyB0aHVtYm5haWw6JywgZXJyb3IpXHJcbiAgICAgICAgdGhyb3cgZXJyb3JcclxuICAgIH1cclxufVxyXG5cclxuLy8gU2F2ZSBjb21wbGV0ZSBib29rIHJlY29yZCB0byBGaXJlc3RvcmVcclxuZXhwb3J0IGNvbnN0IHNhdmVCb29rUmVjb3JkID0gYXN5bmMgKFxyXG4gICAgYm9va1RpdGxlOiBzdHJpbmcsXHJcbiAgICBwZGZVcmw6IHN0cmluZyxcclxuICAgIHRodW1ibmFpbFVybD86IHN0cmluZyxcclxuICAgIGF1ZGlvVXJscz86IHN0cmluZ1tdXHJcbik6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGJvb2tEYXRhOiBPbWl0PFNhdmVkQm9vaywgJ2lkJz4gPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBib29rVGl0bGUsXHJcbiAgICAgICAgICAgIHBkZlVybCxcclxuICAgICAgICAgICAgdGh1bWJuYWlsVXJsLFxyXG4gICAgICAgICAgICBhdWRpb1VybHMsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogVGltZXN0YW1wLm5vdygpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2Jvb2tzJyksIGJvb2tEYXRhKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdCb29rIHNhdmVkIHRvIEZpcmViYXNlOicsIGRvY1JlZi5pZClcclxuICAgICAgICByZXR1cm4gZG9jUmVmLmlkXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBib29rOicsIGVycm9yKVxyXG4gICAgICAgIHRocm93IGVycm9yXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEdldCBhbGwgc2F2ZWQgYm9va3MgKGZyb20gcHJvbXB0cyBjb2xsZWN0aW9uKVxyXG5leHBvcnQgY29uc3QgZ2V0U2F2ZWRCb29rcyA9IGFzeW5jICgpOiBQcm9taXNlPFNhdmVkQm9va1tdPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFJlYWQgZnJvbSBwcm9tcHRzIGNvbGxlY3Rpb24gc2luY2UgdGhhdCdzIHdoZXJlIHdlIHNhdmVcclxuICAgICAgICBjb25zdCBwcm9tcHRzUXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCAncHJvbXB0cycpKVxyXG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhwcm9tcHRzUXVlcnkpXHJcblxyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmJvb2tUaXRsZSB8fCAn15zXnNeQINeb15XXqteo16onLFxyXG4gICAgICAgICAgICAgICAgcGRmVXJsOiBkYXRhLmRyaXZlUGRmVXJsIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgZHJpdmVaaXBVcmw6IGRhdGEuZHJpdmVaaXBVcmwsXHJcbiAgICAgICAgICAgICAgICBkcml2ZVBkZlVybDogZGF0YS5kcml2ZVBkZlVybCxcclxuICAgICAgICAgICAgICAgIHRodW1ibmFpbFVybDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdFxyXG4gICAgICAgICAgICB9IGFzIFNhdmVkQm9va1xyXG4gICAgICAgIH0pXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc2F2ZWQgYm9va3M6JywgZXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIENoZWNrIGlmIGEgc2ltaWxhciBjaGFyYWN0ZXIvYm9vayBhbHJlYWR5IGV4aXN0c1xyXG5leHBvcnQgY29uc3QgY2hlY2tTaW1pbGFyUHJvbXB0cyA9IGFzeW5jIChcclxuICAgIG1haW5DaGFyYWN0ZXI6IHN0cmluZyxcclxuICAgIGJvb2tUaXRsZTogc3RyaW5nXHJcbik6IFByb21pc2U8eyBleGlzdHM6IGJvb2xlYW47IHNpbWlsYXJUbz86IHN0cmluZyB9PiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHRpdGxlUXVlcnkgPSBxdWVyeShcclxuICAgICAgICAgICAgY29sbGVjdGlvbihkYiwgJ3Byb21wdHMnKSxcclxuICAgICAgICAgICAgd2hlcmUoJ2Jvb2tUaXRsZScsICc9PScsIGJvb2tUaXRsZSlcclxuICAgICAgICApXHJcbiAgICAgICAgY29uc3QgdGl0bGVTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModGl0bGVRdWVyeSlcclxuXHJcbiAgICAgICAgaWYgKCF0aXRsZVNuYXBzaG90LmVtcHR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGV4aXN0czogdHJ1ZSwgc2ltaWxhclRvOiAn15vXldeq16jXqiDXk9eV157XlCDXm9eR16gg16fXmdeZ157XqicgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2hhclF1ZXJ5ID0gcXVlcnkoXHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb24oZGIsICdwcm9tcHRzJyksXHJcbiAgICAgICAgICAgIHdoZXJlKCdtYWluQ2hhcmFjdGVyJywgJz09JywgbWFpbkNoYXJhY3RlcilcclxuICAgICAgICApXHJcbiAgICAgICAgY29uc3QgY2hhclNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjaGFyUXVlcnkpXHJcblxyXG4gICAgICAgIGlmICghY2hhclNuYXBzaG90LmVtcHR5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGV4aXN0czogdHJ1ZSwgc2ltaWxhclRvOiAn15PXnteV16og16jXkNep15nXqiDXk9eV157XlCDXm9eR16gg16fXmdeZ157XqicgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgZXhpc3RzOiBmYWxzZSB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIEZpcmViYXNlOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiB7IGV4aXN0czogZmFsc2UgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBkYiwgc3RvcmFnZSB9XHJcbiJdLCJuYW1lcyI6WyJpbml0aWFsaXplQXBwIiwiZ2V0QXBwcyIsImdldEZpcmVzdG9yZSIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsIlRpbWVzdGFtcCIsImdldFN0b3JhZ2UiLCJyZWYiLCJ1cGxvYWRCeXRlcyIsImdldERvd25sb2FkVVJMIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiYXBwSWQiLCJtZWFzdXJlbWVudElkIiwiYXBwIiwibGVuZ3RoIiwiZGIiLCJzdG9yYWdlIiwic2F2ZUJvb2tQcm9tcHRzIiwicmVjb3JkIiwiZG9jUmVmIiwiY3JlYXRlZEF0Iiwibm93IiwiY29uc29sZSIsImxvZyIsImlkIiwiZXJyb3IiLCJ1cGxvYWRQZGYiLCJwZGZCbG9iIiwiYm9va1RpdGxlIiwic2FmZVRpdGxlIiwicmVwbGFjZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJmaWxlTmFtZSIsInN0b3JhZ2VSZWYiLCJjb250ZW50VHlwZSIsImRvd25sb2FkVXJsIiwidXBsb2FkQXVkaW8iLCJhdWRpb0Jsb2IiLCJwYWdlTnVtYmVyIiwidXBsb2FkVGh1bWJuYWlsIiwiaW1hZ2VEYXRhVXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsImJsb2IiLCJzYXZlQm9va1JlY29yZCIsInBkZlVybCIsInRodW1ibmFpbFVybCIsImF1ZGlvVXJscyIsImJvb2tEYXRhIiwidGl0bGUiLCJnZXRTYXZlZEJvb2tzIiwicHJvbXB0c1F1ZXJ5Iiwic25hcHNob3QiLCJkb2NzIiwibWFwIiwiZG9jIiwiZGF0YSIsImRyaXZlUGRmVXJsIiwiZHJpdmVaaXBVcmwiLCJ1bmRlZmluZWQiLCJjaGVja1NpbWlsYXJQcm9tcHRzIiwibWFpbkNoYXJhY3RlciIsInRpdGxlUXVlcnkiLCJ0aXRsZVNuYXBzaG90IiwiZW1wdHkiLCJleGlzdHMiLCJzaW1pbGFyVG8iLCJjaGFyUXVlcnkiLCJjaGFyU25hcHNob3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./services/firebase.ts\n");

/***/ }),

/***/ "(ssr)/./services/geminiService.ts":
/*!***********************************!*\
  !*** ./services/geminiService.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeBookPdf: () => (/* binding */ analyzeBookPdf),\n/* harmony export */   generateBookContent: () => (/* binding */ generateBookContent),\n/* harmony export */   generatePageAudio: () => (/* binding */ generatePageAudio),\n/* harmony export */   generatePageImage: () => (/* binding */ generatePageImage),\n/* harmony export */   generateStoryIdea: () => (/* binding */ generateStoryIdea)\n/* harmony export */ });\n/* harmony import */ var _google_genai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/genai */ \"(ssr)/./node_modules/@google/genai/dist/node/index.mjs\");\n/* harmony import */ var _apiKeyManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./apiKeyManager */ \"(ssr)/./services/apiKeyManager.ts\");\n\n\n// Helper to get API key\nconst getApiKey = ()=>{\n    const key = _apiKeyManager__WEBPACK_IMPORTED_MODULE_1__.apiKeyManager.getKey();\n    if (!key) {\n        throw new Error('API key not configured');\n    }\n    return key;\n};\n// Helper to check for fatal auth/quota errors\nconst handleFatalError = (err)=>{\n    // Inspect if the error is wrapped in an 'error' property (common in Google JSON responses)\n    const errorObj = err?.error || err;\n    const msg = (errorObj?.message || JSON.stringify(err)).toLowerCase();\n    const status = errorObj?.status || errorObj?.code;\n    // Check for Quota issues\n    const isQuota = status === 429 || status === 'RESOURCE_EXHAUSTED' || msg.includes(\"quota\") || msg.includes(\"resource_exhausted\") || // Specific check for \"limit: 0\" which often means model not available in plan or exhausted\n    msg.includes(\"limit: 0\");\n    // Check for Auth issues (Invalid Key, Expired Key, Project not found)\n    const isAuth = status === 403 || // Status 400 is normally Invalid Argument, but if message says \"API key expired\", it's auth.\n    status === 400 && (msg.includes(\"api key\") || msg.includes(\"expired\")) || msg.includes(\"api key\") || msg.includes(\"unauthenticated\") || msg.includes(\"permission denied\") || msg.includes(\"requested entity was not found\") || msg.includes(\"expired\");\n    if (isQuota || isAuth) {\n        console.warn(`Fatal API Error (${isQuota ? 'Quota' : 'Auth'}). Triggering Re-auth.`, err);\n        window.dispatchEvent(new CustomEvent('reselect-api-key'));\n        return true;\n    }\n    return false;\n};\n// Helper for retry logic with exponential backoff\nasync function retryWithBackoff(fn, retries = 3, baseDelay = 1000) {\n    try {\n        return await fn();\n    } catch (error) {\n        // Check for fatal errors first. If fatal, do not retry.\n        if (handleFatalError(error)) {\n            throw error;\n        }\n        const status = error.status || error.code;\n        const message = (error.message || '').toLowerCase();\n        // Check if error is retryable (Transient 5xx server errors)\n        // Note: We handled 429/Quota above as fatal because usually in this context implies Daily Limit, not just QPM.\n        const isRetryable = status && [\n            500,\n            503\n        ].includes(status) || message.includes('internal') || message.includes('overloaded') || message.includes('timeout');\n        if (retries > 0 && isRetryable) {\n            console.warn(`Retrying operation due to error: ${message}. Attempts left: ${retries}. Waiting ${baseDelay}ms.`);\n            await new Promise((resolve)=>setTimeout(resolve, baseDelay));\n            return retryWithBackoff(fn, retries - 1, baseDelay * 2);\n        }\n        throw error;\n    }\n}\n// Define the response schema for the book using the Type enum\nconst bookSchema = {\n    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n    properties: {\n        metadata: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n            properties: {\n                title: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"The title of the book in Hebrew ONLY. Do NOT include English translation.\"\n                },\n                targetAge: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                },\n                mainTheme: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                },\n                educationalMessage: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                },\n                artStyle: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"Detailed description of the art style.\"\n                },\n                mainCharacterDescription: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"Comprehensive physical description of the MAIN character (clothing, hair, accessories). Be very specific about colors.\"\n                },\n                mainCharacterDistinctiveMark: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"A specific, unique visual feature for the main character that acts as a visual anchor (e.g., 'big red glasses', 'a star patch on the overalls', 'a glowing blue pendant', 'a purple feather in hat'). This MUST be included in every single image description.\"\n                },\n                secondaryCharacterDescription: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"If there is a constant companion (animal, friend, sibling) that appears in multiple pages, describe them here with EXTREME DETAIL. Include: Species, Color (specific shade), Size, Accessories, and Distinctive Marks. e.g. 'A rotund bright-yellow chick with large anime-style blue eyes, a tiny orange beak, and wearing a miniature red wool scarf'. This description MUST be unique and unchanging.\"\n                },\n                secondaryCharacterDistinctiveMark: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"A specific, unique visual feature for the secondary character (if present) that acts as a visual anchor.\"\n                },\n                keyObjectDescription: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    description: \"Description of any recurring magical or key object.\"\n                },\n                titlePrimaryColor: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                },\n                titleSecondaryColor: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                },\n                titleEffectTheme: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                    enum: [\n                        'magical',\n                        'natural',\n                        'tech',\n                        'classic',\n                        'playful',\n                        'elegant'\n                    ]\n                },\n                visualConsistencyGuide: {\n                    type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n                    properties: {\n                        characterTraits: {\n                            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n                            items: {\n                                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                            }\n                        },\n                        objectTraits: {\n                            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n                            items: {\n                                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                            }\n                        },\n                        backgroundStyle: {\n                            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                        }\n                    },\n                    required: [\n                        \"characterTraits\",\n                        \"objectTraits\",\n                        \"backgroundStyle\"\n                    ]\n                }\n            },\n            required: [\n                \"title\",\n                \"targetAge\",\n                \"mainTheme\",\n                \"educationalMessage\",\n                \"mainCharacterDescription\",\n                \"mainCharacterDistinctiveMark\",\n                \"artStyle\",\n                \"keyObjectDescription\",\n                \"titlePrimaryColor\",\n                \"titleSecondaryColor\",\n                \"titleEffectTheme\",\n                \"visualConsistencyGuide\"\n            ]\n        },\n        pages: {\n            type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.ARRAY,\n            items: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n                properties: {\n                    pageNumber: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.INTEGER\n                    },\n                    hebrewText: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n                    },\n                    imagePrompt: {\n                        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING,\n                        description: \"Detailed ENGLISH visual scene description. IMPORTANT: Describe a SPECIFIC CAMERA ANGLE (e.g., 'Close-up on face', 'Wide shot from above', 'Low angle looking up') and SPECIFIC BACKGROUND DETAILS relevant to the action. Do NOT just say 'in the forest'. Say 'next to a giant oak tree with sunlight filtering through'.\"\n                    }\n                },\n                required: [\n                    \"pageNumber\",\n                    \"hebrewText\",\n                    \"imagePrompt\"\n                ]\n            }\n        }\n    },\n    required: [\n        \"metadata\",\n        \"pages\"\n    ]\n};\nconst generateStoryIdea = async (ageRange, currentTopic)=>{\n    const ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n        apiKey: getApiKey()\n    });\n    const prompt = `You are a creative children's book editor. \n  The user wants an idea for a book.\n  Target Age: ${ageRange}\n  User's rough idea (optional): \"${currentTopic}\"\n\n  Please generate a short, structured concept in HEBREW ().\n  Structure:\n  1.   (Title)\n  2.   (Main Character - Name + A unique visual trait/mark)\n  3.   (Short Plot Summary)\n  \n  Make it engaging, magical, and suitable for the age group. \n  Do not include markdown formatting like ** or ##. Just clean text.`;\n    try {\n        // Using flash for speed\n        const response = await retryWithBackoff(()=>ai.models.generateContent({\n                model: 'gemini-3-flash-preview',\n                contents: {\n                    parts: [\n                        {\n                            text: prompt\n                        }\n                    ]\n                },\n                config: {\n                    maxOutputTokens: 300\n                }\n            }));\n        return response.text || \"\";\n    } catch (error) {\n        console.error(\"Error generating idea:\", error);\n        // If handleFatalError returns true, it's a critical auth/quota error and we let the UI redirect.\n        // If it returns false, we throw so the component can show a specific alert.\n        if (!handleFatalError(error)) {\n            throw error;\n        }\n        return \"\";\n    }\n};\nconst generateBookContent = async (request)=>{\n    // Copyright check before generation\n    const { validateBookRequest, logGeneratedBook } = await __webpack_require__.e(/*! import() */ \"_ssr_services_promptGuard_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./promptGuard */ \"(ssr)/./services/promptGuard.ts\"));\n    const copyrightCheck = await validateBookRequest(request.topic);\n    if (!copyrightCheck.allowed) {\n        throw new Error(copyrightCheck.reason || 'Content blocked');\n    }\n    const ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n        apiKey: getApiKey()\n    });\n    const systemInstruction = `You are a world-class children's book author and art director.\n  \n  TASK: Create a magical children's book in Hebrew with detailed English art direction.\n  \n  STRICT PAGE COUNT: EXACTLY ${request.pageCount} pages.\n  \n  GUIDELINES:\n  1. STORY (Hebrew): Engaging, age-appropriate, perfect grammar.\n     - CRITICAL: The 'title' in metadata MUST be in Hebrew ONLY. Do not include an English translation.\n  2. ART DIRECTION (English):\n     - 'mainCharacterDescription': A precise, unchanging visual definition.\n     - 'mainCharacterDistinctiveMark': CREATE A UNIQUE IDENTIFIER (e.g., \"Rainbow Scarf\", \"Golden Goggles\"). This is CRITICAL for consistency.\n     - 'visualConsistencyGuide': List specific items/colors that MUST appear in every image.\n     - 'imagePrompt' (for each page): A FULL SCENE DESCRIPTION. \n  3. VISUAL VARIETY (CRITICAL):\n     - **VARY CAMERA ANGLES**: Do NOT use the same \"medium shot\" for every page. Use Close-ups, Wide shots, Bird's-eye view, Low angles.\n     - **VARY BACKGROUNDS**: Even if the setting is the same (e.g., a forest), focus on DIFFERENT parts of it (e.g., \"next to a stream\", \"inside a hollow log\", \"looking up at the canopy\").\n     - **DYNAMIC ACTION**: Characters should be doing different things, not just standing.\n  4. COMPOSITION AWARENESS:\n     - The images must be FULL BLEED, filling the entire square 1:1 canvas.\n     - Center the action.\n     - Do NOT leave empty space for text. Text will be added externally.\n  `;\n    let prompt = `Create a children's book.\n  Target Age: ${request.ageRange}\n  Topic: ${request.topic}\n  REQUIRED LENGTH: EXACTLY ${request.pageCount} pages. Start with page 1 as the cover and end with page ${request.pageCount}.\n  Art Style Selection: ${request.artStyle}`;\n    if (request.previousContext) {\n        prompt += `\n    SEQUEL MODE: Maintain character consistency with the previous story: \"${request.previousContext.title}\".\n    Previous Main Character: ${request.previousContext.characterDescription}.\n    ${request.previousContext.secondaryCharacterDescription ? `Previous Secondary Character: ${request.previousContext.secondaryCharacterDescription}` : ''}\n    `;\n    }\n    try {\n        const response = await retryWithBackoff(()=>ai.models.generateContent({\n                model: 'gemini-3-pro-preview',\n                contents: prompt,\n                config: {\n                    responseMimeType: 'application/json',\n                    responseSchema: bookSchema,\n                    systemInstruction: systemInstruction\n                }\n            }));\n        if (!response.text) {\n            throw new Error(\"Failed to generate book content\");\n        }\n        const book = JSON.parse(response.text);\n        // Safety check for page count\n        console.log(`Requested ${request.pageCount} pages, received ${book.pages.length} pages.`);\n        // Inject Audio Configuration from Request\n        book.metadata.audioConfig = {\n            enabled: request.audioEnabled,\n            voiceName: request.voiceName\n        };\n        if (request.previousContext?.baseCharacterImage) {\n            book.metadata.baseCharacterImageUrl = request.previousContext.baseCharacterImage;\n        }\n        // Refine all image prompts to include the consistency guide for BOTH characters\n        const traits = book.metadata.visualConsistencyGuide.characterTraits.join(\", \");\n        const objTraits = book.metadata.visualConsistencyGuide.objectTraits.join(\", \");\n        const mainMark = book.metadata.mainCharacterDistinctiveMark || \"Distinctive feature\";\n        const secMark = book.metadata.secondaryCharacterDistinctiveMark;\n        book.pages = book.pages.map((page, idx)=>{\n            // 1. Establish the visual anchor (Characters & Style)\n            let refinedPrompt = `[MAIN CHARACTER]: ${book.metadata.mainCharacterDescription}. DISTINCTIVE FEATURE: ${mainMark}. Key Features: ${traits}. `;\n            if (book.metadata.secondaryCharacterDescription) {\n                refinedPrompt += `[SECONDARY CHARACTER]: ${book.metadata.secondaryCharacterDescription}. DISTINCTIVE FEATURE: ${secMark || 'None'}. `;\n            }\n            // 2. Set the Environment/Atmosphere \n            // NOTE: We label this \"General Context\" so it doesn't override the specific scene action\n            refinedPrompt += `[GENERAL CONTEXT]: ${book.metadata.visualConsistencyGuide.backgroundStyle}. `;\n            if (objTraits) refinedPrompt += `[PROPS]: ${objTraits}. `;\n            // 3. Define the specific scene action - THIS IS PRIORITY\n            refinedPrompt += `[SPECIFIC SCENE ACTION & ANGLE]: ${page.imagePrompt}. `;\n            return {\n                ...page,\n                imagePrompt: refinedPrompt\n            };\n        });\n        // Don't save here - saved during export instead\n        return book;\n    } catch (error) {\n        console.error(\"Error generating book content:\", error);\n        // Extra catch just in case retryWithBackoff didn't catch it\n        handleFatalError(error);\n        throw error;\n    }\n};\nconst generatePageImage = async (actionPrompt, characterDescription, artStyle, baseCharacterImageUrl, isCover = false, textToRender)=>{\n    const ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n        apiKey: getApiKey()\n    });\n    let finalPrompt = \"\";\n    let modelName = \"\";\n    let imageConfig = {};\n    if (isCover) {\n        // COVER STRATEGY: Use Pro model, bake text.\n        modelName = 'gemini-3-pro-image-preview';\n        imageConfig = {\n            aspectRatio: \"1:1\",\n            imageSize: \"1K\"\n        };\n        finalPrompt = `\n      [ROLE]: Expert Children's Book Cover Designer.\n      [ART STYLE]: ${artStyle}.\n      \n      [CAST DEFINITIONS]: \n      ${characterDescription}\n      \n      [SCENE DESCRIPTION]: ${actionPrompt}\n      \n      [TITLE TEXT - ABSOLUTE REQUIREMENT]:\n      The ONLY text in this entire image is: \"${textToRender}\"\n      \n      CRITICAL - TEXT RULES:\n      1. ONLY display the exact title above - NO other text whatsoever\n      2. ABSOLUTELY NO: subtitle, author, age range, page count, tagline, description\n      3. ABSOLUTELY NO: \"\", \"\", \"\", numbers, credits, watermarks\n      4. ABSOLUTELY NO: English text, Latin letters, any text not in the title\n      5. The title should be in the TOP THIRD of the image\n      6. Use artistic Hebrew font matching ${artStyle} style\n      7. Add glow/shadow behind text for readability\n      \n      [CHARACTER]:\n      1. Main character must match Reference Image (if provided)\n      2. Character in dynamic, inviting pose\n      \n      [TECHNICAL]: 8k resolution, cinematic lighting, vivid colors.\n      [NEGATIVE PROMPT]: subtitle, author name, page count, age range, English text, extra text, watermark, tagline, credits, , , , numbers at bottom, description text, any text besides title.\n    `;\n    } else {\n        // INNER PAGE STRATEGY: Use Flash model, NO text.\n        modelName = 'gemini-2.5-flash-image';\n        // Enhanced prompt with stronger character consistency\n        finalPrompt = `\n      [ROLE]: Professional Children's Book Illustrator specializing in character consistency.\n      [ART STYLE]: ${artStyle}.\n      \n      [CAST DEFINITIONS - CRITICAL FOR CONSISTENCY]: \n      ${characterDescription}\n      \n      [SCENE TO ILLUSTRATE]: \n      ${actionPrompt}\n      \n      [CHARACTER CONSISTENCY - MANDATORY]:\n      1. SAME CHARACTER = IDENTICAL APPEARANCE in every illustration\n      2. Main character MUST have the EXACT same:\n         - Face shape and features\n         - Hair color and style\n         - Clothing and accessories\n         - Any distinctive marks mentioned in CAST DEFINITIONS\n      3. If a Reference Image is provided, the character MUST match it EXACTLY\n      4. Secondary character (if present) must also be consistent\n      5. DO NOT change character appearance between pages\n      \n      [ILLUSTRATION RULES]:\n      1. **ABSOLUTELY NO TEXT**: No text, captions, speech bubbles, or words\n      2. **FULL BLEED**: Use entire canvas, no borders or margins\n      3. **DYNAMIC COMPOSITION**: Use the camera angle specified in the scene description\n      \n      [BACKGROUND INSTRUCTION]: \n      Match background to the specific scene action described above.\n      Use varied camera angles (Close-up, Wide shot, Low angle) for visual variety.\n      \n      [TECHNICAL SPECS]: 8k resolution, cinematic lighting, vivid saturated colors.\n      [NEGATIVE]: text, writing, letters, words, watermark, logo, blurry, low quality, inconsistent character, different outfit, changed appearance.\n    `;\n    }\n    const parts = [\n        {\n            text: finalPrompt\n        }\n    ];\n    // If we have a base character image, we MUST send it as a reference for EVERY page\n    if (baseCharacterImageUrl && baseCharacterImageUrl.startsWith('data:image/')) {\n        const matches = baseCharacterImageUrl.match(/^data:(.+);base64,(.+)$/);\n        if (matches) {\n            parts.unshift({\n                inlineData: {\n                    mimeType: matches[1],\n                    data: matches[2]\n                }\n            });\n            parts.push({\n                text: \"REFERENCE IMAGE INSTRUCTION: The image above is the MAIN character reference. Match this character exactly.\"\n            });\n        }\n    }\n    try {\n        const response = await retryWithBackoff(()=>ai.models.generateContent({\n                model: modelName,\n                contents: {\n                    parts\n                },\n                config: isCover ? {\n                    imageConfig\n                } : undefined\n            }));\n        for (const candidate of response.candidates || []){\n            for (const part of candidate.content.parts){\n                if (part.inlineData && part.inlineData.data) {\n                    return `data:${part.inlineData.mimeType};base64,${part.inlineData.data}`;\n                }\n            }\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Error generating image:\", error);\n        handleFatalError(error);\n        return null;\n    }\n};\nconst analyzeBookPdf = async (pdfBase64)=>{\n    const ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n        apiKey: getApiKey()\n    });\n    const prompt = `\n    Analyze this PDF children's book. \n    Extract the following information to create a sequel context:\n    1. Title of the book.\n    2. A summary of the plot.\n    3. A detailed visual description of the MAIN character (appearance, clothes, hair, colors).\n    4. A detailed visual description of any SECONDARY character (sidekick) if present.\n    5. The art style used.\n    \n    Return the result as a JSON object.\n  `;\n    const extractionSchema = {\n        type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.OBJECT,\n        properties: {\n            title: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            summary: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            characterDescription: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            secondaryCharacterDescription: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            },\n            artStyle: {\n                type: _google_genai__WEBPACK_IMPORTED_MODULE_0__.Type.STRING\n            }\n        },\n        required: [\n            \"title\",\n            \"summary\",\n            \"characterDescription\",\n            \"artStyle\"\n        ]\n    };\n    try {\n        const response = await retryWithBackoff(()=>ai.models.generateContent({\n                model: 'gemini-3-flash-preview',\n                contents: {\n                    parts: [\n                        {\n                            inlineData: {\n                                mimeType: 'application/pdf',\n                                data: pdfBase64\n                            }\n                        },\n                        {\n                            text: prompt\n                        }\n                    ]\n                },\n                config: {\n                    responseMimeType: 'application/json',\n                    responseSchema: extractionSchema\n                }\n            }));\n        if (!response.text) throw new Error(\"Failed to analyze PDF\");\n        return JSON.parse(response.text);\n    } catch (error) {\n        console.error(\"Error analyzing PDF:\", error);\n        handleFatalError(error);\n        throw error;\n    }\n};\n// AUDIO GENERATION UTILS\n// Decode base64 to binary string to Uint8Array to Int16Array\nfunction decodeAudio(base64) {\n    const binaryString = atob(base64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n    for(let i = 0; i < len; i++){\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return new Int16Array(bytes.buffer);\n}\nconst generatePageAudio = async (text, audioContext, voiceName = 'Puck')=>{\n    const ai = new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n        apiKey: getApiKey()\n    });\n    // Validate and Truncate Text\n    if (!text || !text.trim()) return null;\n    // Truncate to ~500 chars to avoid 500 Internal Error from TTS model which has input limits\n    const safeText = text.trim().slice(0, 500);\n    const prompt = `Read the following Hebrew text clearly, slowly, and warmly, suitable for a children's book storytelling:\n    \n    ${safeText}`;\n    try {\n        const response = await retryWithBackoff(()=>ai.models.generateContent({\n                model: \"gemini-2.5-flash-preview-tts\",\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: prompt\n                            }\n                        ]\n                    }\n                ],\n                config: {\n                    responseModalities: [\n                        _google_genai__WEBPACK_IMPORTED_MODULE_0__.Modality.AUDIO\n                    ],\n                    speechConfig: {\n                        voiceConfig: {\n                            prebuiltVoiceConfig: {\n                                voiceName: voiceName\n                            }\n                        }\n                    }\n                }\n            }));\n        const base64Audio = response.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;\n        if (!base64Audio) return null;\n        // Decode PCM data\n        const pcmData = decodeAudio(base64Audio);\n        // Convert Int16 PCM to Float32 for AudioContext (-1.0 to 1.0)\n        const float32Data = new Float32Array(pcmData.length);\n        for(let i = 0; i < pcmData.length; i++){\n            float32Data[i] = pcmData[i] / 32768.0;\n        }\n        // Create Audio Buffer (Mono, 24kHz as per standard GenAI output usually, but context sample rate matters)\n        // Note: The raw output is usually 24000Hz.\n        const audioBuffer = audioContext.createBuffer(1, float32Data.length, 24000);\n        audioBuffer.getChannelData(0).set(float32Data);\n        return audioBuffer;\n    } catch (error) {\n        console.error(\"Error generating audio:\", error);\n        // Propagate fatal errors to prompt key change\n        handleFatalError(error);\n        return null;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDcUY7QUFFckM7QUFFaEQsd0JBQXdCO0FBQ3hCLE1BQU1JLFlBQVk7SUFDaEIsTUFBTUMsTUFBTUYseURBQWFBLENBQUNHLE1BQU07SUFDaEMsSUFBSSxDQUFDRCxLQUFLO1FBQ1IsTUFBTSxJQUFJRSxNQUFNO0lBQ2xCO0lBQ0EsT0FBT0Y7QUFDVDtBQUVBLDhDQUE4QztBQUM5QyxNQUFNRyxtQkFBbUIsQ0FBQ0M7SUFDeEIsMkZBQTJGO0lBQzNGLE1BQU1DLFdBQVdELEtBQUtFLFNBQVNGO0lBRS9CLE1BQU1HLE1BQU0sQ0FBQ0YsVUFBVUcsV0FBV0MsS0FBS0MsU0FBUyxDQUFDTixJQUFHLEVBQUdPLFdBQVc7SUFDbEUsTUFBTUMsU0FBU1AsVUFBVU8sVUFBVVAsVUFBVVE7SUFFN0MseUJBQXlCO0lBQ3pCLE1BQU1DLFVBQ0pGLFdBQVcsT0FDWEEsV0FBVyx3QkFDWEwsSUFBSVEsUUFBUSxDQUFDLFlBQ2JSLElBQUlRLFFBQVEsQ0FBQyx5QkFDYiwyRkFBMkY7SUFDM0ZSLElBQUlRLFFBQVEsQ0FBQztJQUVmLHNFQUFzRTtJQUN0RSxNQUFNQyxTQUNKSixXQUFXLE9BQ1gsNkZBQTZGO0lBQzVGQSxXQUFXLE9BQVFMLENBQUFBLElBQUlRLFFBQVEsQ0FBQyxjQUFjUixJQUFJUSxRQUFRLENBQUMsVUFBUyxLQUNyRVIsSUFBSVEsUUFBUSxDQUFDLGNBQ2JSLElBQUlRLFFBQVEsQ0FBQyxzQkFDYlIsSUFBSVEsUUFBUSxDQUFDLHdCQUNiUixJQUFJUSxRQUFRLENBQUMscUNBQ2JSLElBQUlRLFFBQVEsQ0FBQztJQUVmLElBQUlELFdBQVdFLFFBQVE7UUFDckJDLFFBQVFDLElBQUksQ0FBQyxDQUFDLGlCQUFpQixFQUFFSixVQUFVLFVBQVUsT0FBTyxzQkFBc0IsQ0FBQyxFQUFFVjtRQUNyRmUsT0FBT0MsYUFBYSxDQUFDLElBQUlDLFlBQVk7UUFDckMsT0FBTztJQUNUO0lBQ0EsT0FBTztBQUNUO0FBRUEsa0RBQWtEO0FBQ2xELGVBQWVDLGlCQUNiQyxFQUFvQixFQUNwQkMsVUFBVSxDQUFDLEVBQ1hDLFlBQVksSUFBSTtJQUVoQixJQUFJO1FBQ0YsT0FBTyxNQUFNRjtJQUNmLEVBQUUsT0FBT2pCLE9BQVk7UUFDbkIsd0RBQXdEO1FBQ3hELElBQUlILGlCQUFpQkcsUUFBUTtZQUMzQixNQUFNQTtRQUNSO1FBRUEsTUFBTU0sU0FBU04sTUFBTU0sTUFBTSxJQUFJTixNQUFNTyxJQUFJO1FBQ3pDLE1BQU1MLFVBQVUsQ0FBQ0YsTUFBTUUsT0FBTyxJQUFJLEVBQUMsRUFBR0csV0FBVztRQUVqRCw0REFBNEQ7UUFDNUQsK0dBQStHO1FBQy9HLE1BQU1lLGNBQ0osVUFBVztZQUFDO1lBQUs7U0FBSSxDQUFDWCxRQUFRLENBQUNILFdBQzlCSixRQUFRTyxRQUFRLENBQUMsZUFDaEJQLFFBQVFPLFFBQVEsQ0FBQyxpQkFDakJQLFFBQVFPLFFBQVEsQ0FBQztRQUVyQixJQUFJUyxVQUFVLEtBQUtFLGFBQWE7WUFDOUJULFFBQVFDLElBQUksQ0FBQyxDQUFDLGlDQUFpQyxFQUFFVixRQUFRLGlCQUFpQixFQUFFZ0IsUUFBUSxVQUFVLEVBQUVDLFVBQVUsR0FBRyxDQUFDO1lBQzlHLE1BQU0sSUFBSUUsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBU0g7WUFDakQsT0FBT0gsaUJBQWlCQyxJQUFJQyxVQUFVLEdBQUdDLFlBQVk7UUFDdkQ7UUFDQSxNQUFNbkI7SUFDUjtBQUNGO0FBRUEsOERBQThEO0FBQzlELE1BQU13QixhQUFhO0lBQ2pCQyxNQUFNbkMsK0NBQUlBLENBQUNvQyxNQUFNO0lBQ2pCQyxZQUFZO1FBQ1ZDLFVBQVU7WUFDUkgsTUFBTW5DLCtDQUFJQSxDQUFDb0MsTUFBTTtZQUNqQkMsWUFBWTtnQkFDVkUsT0FBTztvQkFDTEosTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtvQkFDakJDLGFBQWE7Z0JBQ2Y7Z0JBQ0FDLFdBQVc7b0JBQUVQLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07Z0JBQUM7Z0JBQy9CRyxXQUFXO29CQUFFUixNQUFNbkMsK0NBQUlBLENBQUN3QyxNQUFNO2dCQUFDO2dCQUMvQkksb0JBQW9CO29CQUFFVCxNQUFNbkMsK0NBQUlBLENBQUN3QyxNQUFNO2dCQUFDO2dCQUN4Q0ssVUFBVTtvQkFDUlYsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtvQkFDakJDLGFBQWE7Z0JBQ2Y7Z0JBQ0FLLDBCQUEwQjtvQkFDeEJYLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07b0JBQ2pCQyxhQUFhO2dCQUNmO2dCQUNBTSw4QkFBOEI7b0JBQzVCWixNQUFNbkMsK0NBQUlBLENBQUN3QyxNQUFNO29CQUNqQkMsYUFBYTtnQkFDZjtnQkFDQU8sK0JBQStCO29CQUM3QmIsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtvQkFDakJDLGFBQWE7Z0JBQ2Y7Z0JBQ0FRLG1DQUFtQztvQkFDakNkLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07b0JBQ2pCQyxhQUFhO2dCQUNmO2dCQUNBUyxzQkFBc0I7b0JBQ3BCZixNQUFNbkMsK0NBQUlBLENBQUN3QyxNQUFNO29CQUNqQkMsYUFBYTtnQkFDZjtnQkFDQVUsbUJBQW1CO29CQUFFaEIsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtnQkFBQztnQkFDdkNZLHFCQUFxQjtvQkFBRWpCLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07Z0JBQUM7Z0JBQ3pDYSxrQkFBa0I7b0JBQ2hCbEIsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtvQkFDakJjLE1BQU07d0JBQUM7d0JBQVc7d0JBQVc7d0JBQVE7d0JBQVc7d0JBQVc7cUJBQVU7Z0JBQ3ZFO2dCQUNBQyx3QkFBd0I7b0JBQ3RCcEIsTUFBTW5DLCtDQUFJQSxDQUFDb0MsTUFBTTtvQkFDakJDLFlBQVk7d0JBQ1ZtQixpQkFBaUI7NEJBQUVyQixNQUFNbkMsK0NBQUlBLENBQUN5RCxLQUFLOzRCQUFFQyxPQUFPO2dDQUFFdkIsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTs0QkFBQzt3QkFBRTt3QkFDbEVtQixjQUFjOzRCQUFFeEIsTUFBTW5DLCtDQUFJQSxDQUFDeUQsS0FBSzs0QkFBRUMsT0FBTztnQ0FBRXZCLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07NEJBQUM7d0JBQUU7d0JBQy9Eb0IsaUJBQWlCOzRCQUFFekIsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTt3QkFBQztvQkFDdkM7b0JBQ0FxQixVQUFVO3dCQUFDO3dCQUFtQjt3QkFBZ0I7cUJBQWtCO2dCQUNsRTtZQUNGO1lBQ0FBLFVBQVU7Z0JBQUM7Z0JBQVM7Z0JBQWE7Z0JBQWE7Z0JBQXNCO2dCQUE0QjtnQkFBZ0M7Z0JBQVk7Z0JBQXdCO2dCQUFxQjtnQkFBdUI7Z0JBQW9CO2FBQXlCO1FBQy9QO1FBQ0FDLE9BQU87WUFDTDNCLE1BQU1uQywrQ0FBSUEsQ0FBQ3lELEtBQUs7WUFDaEJDLE9BQU87Z0JBQ0x2QixNQUFNbkMsK0NBQUlBLENBQUNvQyxNQUFNO2dCQUNqQkMsWUFBWTtvQkFDVjBCLFlBQVk7d0JBQUU1QixNQUFNbkMsK0NBQUlBLENBQUNnRSxPQUFPO29CQUFDO29CQUNqQ0MsWUFBWTt3QkFBRTlCLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07b0JBQUM7b0JBQ2hDMEIsYUFBYTt3QkFDWC9CLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07d0JBQ2pCQyxhQUFhO29CQUNmO2dCQUNGO2dCQUNBb0IsVUFBVTtvQkFBQztvQkFBYztvQkFBYztpQkFBYztZQUN2RDtRQUNGO0lBQ0Y7SUFDQUEsVUFBVTtRQUFDO1FBQVk7S0FBUTtBQUNqQztBQUVPLE1BQU1NLG9CQUFvQixPQUFPQyxVQUFrQkM7SUFDeEQsTUFBTUMsS0FBSyxJQUFJdkUsc0RBQVdBLENBQUM7UUFBRXdFLFFBQVFwRTtJQUFZO0lBQ2pELE1BQU1xRSxTQUFTLENBQUM7O2NBRUosRUFBRUosU0FBUztpQ0FDUSxFQUFFQyxhQUFhOzs7Ozs7Ozs7b0VBU29CLENBQUM7SUFFbkUsSUFBSTtRQUNGLHdCQUF3QjtRQUN4QixNQUFNSSxXQUFXLE1BQU0vQyxpQkFBMEMsSUFBTTRDLEdBQUdJLE1BQU0sQ0FBQ0MsZUFBZSxDQUFDO2dCQUMvRkMsT0FBTztnQkFDUEMsVUFBVTtvQkFBRUMsT0FBTzt3QkFBQzs0QkFBRUMsTUFBTVA7d0JBQU87cUJBQUU7Z0JBQUM7Z0JBQ3RDUSxRQUFRO29CQUNOQyxpQkFBaUI7Z0JBQ25CO1lBQ0Y7UUFDQSxPQUFPUixTQUFTTSxJQUFJLElBQUk7SUFDMUIsRUFBRSxPQUFPckUsT0FBWTtRQUNuQlcsUUFBUVgsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsaUdBQWlHO1FBQ2pHLDRFQUE0RTtRQUM1RSxJQUFJLENBQUNILGlCQUFpQkcsUUFBUTtZQUM1QixNQUFNQTtRQUNSO1FBQ0EsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU13RSxzQkFBc0IsT0FBT0M7SUFDeEMsb0NBQW9DO0lBQ3BDLE1BQU0sRUFBRUMsbUJBQW1CLEVBQUVDLGdCQUFnQixFQUFFLEdBQUcsTUFBTSxpTEFBdUI7SUFDL0UsTUFBTUMsaUJBQWlCLE1BQU1GLG9CQUFvQkQsUUFBUUksS0FBSztJQUM5RCxJQUFJLENBQUNELGVBQWVFLE9BQU8sRUFBRTtRQUMzQixNQUFNLElBQUlsRixNQUFNZ0YsZUFBZUcsTUFBTSxJQUFJO0lBQzNDO0lBRUEsTUFBTW5CLEtBQUssSUFBSXZFLHNEQUFXQSxDQUFDO1FBQUV3RSxRQUFRcEU7SUFBWTtJQUNqRCxNQUFNdUYsb0JBQW9CLENBQUM7Ozs7NkJBSUEsRUFBRVAsUUFBUVEsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFrQi9DLENBQUM7SUFFRCxJQUFJbkIsU0FBUyxDQUFDO2NBQ0YsRUFBRVcsUUFBUWYsUUFBUSxDQUFDO1NBQ3hCLEVBQUVlLFFBQVFJLEtBQUssQ0FBQzsyQkFDRSxFQUFFSixRQUFRUSxTQUFTLENBQUMseURBQXlELEVBQUVSLFFBQVFRLFNBQVMsQ0FBQzt1QkFDckcsRUFBRVIsUUFBUXRDLFFBQVEsRUFBRTtJQUV6QyxJQUFJc0MsUUFBUVMsZUFBZSxFQUFFO1FBQzNCcEIsVUFBVSxDQUFDOzBFQUMyRCxFQUFFVyxRQUFRUyxlQUFlLENBQUNyRCxLQUFLLENBQUM7NkJBQzdFLEVBQUU0QyxRQUFRUyxlQUFlLENBQUNDLG9CQUFvQixDQUFDO0lBQ3hFLEVBQUVWLFFBQVFTLGVBQWUsQ0FBQzVDLDZCQUE2QixHQUFHLENBQUMsOEJBQThCLEVBQUVtQyxRQUFRUyxlQUFlLENBQUM1Qyw2QkFBNkIsRUFBRSxHQUFHLEdBQUc7SUFDeEosQ0FBQztJQUNIO0lBRUEsSUFBSTtRQUNGLE1BQU15QixXQUFXLE1BQU0vQyxpQkFBMEMsSUFBTTRDLEdBQUdJLE1BQU0sQ0FBQ0MsZUFBZSxDQUFDO2dCQUMvRkMsT0FBTztnQkFDUEMsVUFBVUw7Z0JBQ1ZRLFFBQVE7b0JBQ05jLGtCQUFrQjtvQkFDbEJDLGdCQUFnQjdEO29CQUNoQndELG1CQUFtQkE7Z0JBQ3JCO1lBQ0Y7UUFFQSxJQUFJLENBQUNqQixTQUFTTSxJQUFJLEVBQUU7WUFDbEIsTUFBTSxJQUFJekUsTUFBTTtRQUNsQjtRQUVBLE1BQU0wRixPQUFPbkYsS0FBS29GLEtBQUssQ0FBQ3hCLFNBQVNNLElBQUk7UUFFckMsOEJBQThCO1FBQzlCMUQsUUFBUTZFLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRWYsUUFBUVEsU0FBUyxDQUFDLGlCQUFpQixFQUFFSyxLQUFLbEMsS0FBSyxDQUFDcUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztRQUV4RiwwQ0FBMEM7UUFDMUNILEtBQUsxRCxRQUFRLENBQUM4RCxXQUFXLEdBQUc7WUFDMUJDLFNBQVNsQixRQUFRbUIsWUFBWTtZQUM3QkMsV0FBV3BCLFFBQVFvQixTQUFTO1FBQzlCO1FBRUEsSUFBSXBCLFFBQVFTLGVBQWUsRUFBRVksb0JBQW9CO1lBQy9DUixLQUFLMUQsUUFBUSxDQUFDbUUscUJBQXFCLEdBQUd0QixRQUFRUyxlQUFlLENBQUNZLGtCQUFrQjtRQUNsRjtRQUVBLGdGQUFnRjtRQUNoRixNQUFNRSxTQUFTVixLQUFLMUQsUUFBUSxDQUFDaUIsc0JBQXNCLENBQUNDLGVBQWUsQ0FBQ21ELElBQUksQ0FBQztRQUN6RSxNQUFNQyxZQUFZWixLQUFLMUQsUUFBUSxDQUFDaUIsc0JBQXNCLENBQUNJLFlBQVksQ0FBQ2dELElBQUksQ0FBQztRQUN6RSxNQUFNRSxXQUFXYixLQUFLMUQsUUFBUSxDQUFDUyw0QkFBNEIsSUFBSTtRQUMvRCxNQUFNK0QsVUFBVWQsS0FBSzFELFFBQVEsQ0FBQ1csaUNBQWlDO1FBRS9EK0MsS0FBS2xDLEtBQUssR0FBR2tDLEtBQUtsQyxLQUFLLENBQUNpRCxHQUFHLENBQUMsQ0FBQ0MsTUFBTUM7WUFDakMsc0RBQXNEO1lBQ3RELElBQUlDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFbEIsS0FBSzFELFFBQVEsQ0FBQ1Esd0JBQXdCLENBQUMsdUJBQXVCLEVBQUUrRCxTQUFTLGdCQUFnQixFQUFFSCxPQUFPLEVBQUUsQ0FBQztZQUU5SSxJQUFJVixLQUFLMUQsUUFBUSxDQUFDVSw2QkFBNkIsRUFBRTtnQkFDL0NrRSxpQkFBaUIsQ0FBQyx1QkFBdUIsRUFBRWxCLEtBQUsxRCxRQUFRLENBQUNVLDZCQUE2QixDQUFDLHVCQUF1QixFQUFFOEQsV0FBVyxPQUFPLEVBQUUsQ0FBQztZQUN2STtZQUVBLHFDQUFxQztZQUNyQyx5RkFBeUY7WUFDekZJLGlCQUFpQixDQUFDLG1CQUFtQixFQUFFbEIsS0FBSzFELFFBQVEsQ0FBQ2lCLHNCQUFzQixDQUFDSyxlQUFlLENBQUMsRUFBRSxDQUFDO1lBQy9GLElBQUlnRCxXQUFXTSxpQkFBaUIsQ0FBQyxTQUFTLEVBQUVOLFVBQVUsRUFBRSxDQUFDO1lBRXpELHlEQUF5RDtZQUN6RE0saUJBQWlCLENBQUMsaUNBQWlDLEVBQUVGLEtBQUs5QyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBRXpFLE9BQU87Z0JBQUUsR0FBRzhDLElBQUk7Z0JBQUU5QyxhQUFhZ0Q7WUFBYztRQUMvQztRQUVBLGdEQUFnRDtRQUNoRCxPQUFPbEI7SUFDVCxFQUFFLE9BQU90RixPQUFZO1FBQ25CVyxRQUFRWCxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCw0REFBNEQ7UUFDNURILGlCQUFpQkc7UUFDakIsTUFBTUE7SUFDUjtBQUNGLEVBQUU7QUFFSyxNQUFNeUcsb0JBQW9CLE9BQy9CQyxjQUNBdkIsc0JBQ0FoRCxVQUNBNEQsdUJBQ0FZLFVBQW1CLEtBQUssRUFDeEJDO0lBRUEsTUFBTWhELEtBQUssSUFBSXZFLHNEQUFXQSxDQUFDO1FBQUV3RSxRQUFRcEU7SUFBWTtJQUVqRCxJQUFJb0gsY0FBYztJQUNsQixJQUFJQyxZQUFZO0lBQ2hCLElBQUlDLGNBQWMsQ0FBQztJQUVuQixJQUFJSixTQUFTO1FBQ1gsNENBQTRDO1FBQzVDRyxZQUFZO1FBQ1pDLGNBQWM7WUFBRUMsYUFBYTtZQUFPQyxXQUFXO1FBQUs7UUFFcERKLGNBQWMsQ0FBQzs7bUJBRUEsRUFBRTFFLFNBQVM7OztNQUd4QixFQUFFZ0QscUJBQXFCOzsyQkFFRixFQUFFdUIsYUFBYTs7OzhDQUdJLEVBQUVFLGFBQWE7Ozs7Ozs7OzJDQVFsQixFQUFFekUsU0FBUzs7Ozs7Ozs7O0lBU2xELENBQUM7SUFDSCxPQUFPO1FBQ0wsaURBQWlEO1FBQ2pEMkUsWUFBWTtRQUVaLHNEQUFzRDtRQUN0REQsY0FBYyxDQUFDOzttQkFFQSxFQUFFMUUsU0FBUzs7O01BR3hCLEVBQUVnRCxxQkFBcUI7OztNQUd2QixFQUFFdUIsYUFBYTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBd0JqQixDQUFDO0lBQ0g7SUFFQSxNQUFNdEMsUUFBZTtRQUFDO1lBQUVDLE1BQU13QztRQUFZO0tBQUU7SUFFNUMsbUZBQW1GO0lBQ25GLElBQUlkLHlCQUF5QkEsc0JBQXNCbUIsVUFBVSxDQUFDLGdCQUFnQjtRQUM1RSxNQUFNQyxVQUFVcEIsc0JBQXNCcUIsS0FBSyxDQUFDO1FBQzVDLElBQUlELFNBQVM7WUFDWC9DLE1BQU1pRCxPQUFPLENBQUM7Z0JBQ1pDLFlBQVk7b0JBQ1ZDLFVBQVVKLE9BQU8sQ0FBQyxFQUFFO29CQUNwQkssTUFBTUwsT0FBTyxDQUFDLEVBQUU7Z0JBQ2xCO1lBQ0Y7WUFDQS9DLE1BQU1xRCxJQUFJLENBQUM7Z0JBQUVwRCxNQUFNO1lBQThHO1FBQ25JO0lBQ0Y7SUFFQSxJQUFJO1FBQ0YsTUFBTU4sV0FBVyxNQUFNL0MsaUJBQTBDLElBQU00QyxHQUFHSSxNQUFNLENBQUNDLGVBQWUsQ0FBQztnQkFDL0ZDLE9BQU80QztnQkFDUDNDLFVBQVU7b0JBQUVDO2dCQUFNO2dCQUNsQkUsUUFBUXFDLFVBQVU7b0JBQUVJO2dCQUFZLElBQUlXO1lBQ3RDO1FBRUEsS0FBSyxNQUFNQyxhQUFhNUQsU0FBUzZELFVBQVUsSUFBSSxFQUFFLENBQUU7WUFDakQsS0FBSyxNQUFNQyxRQUFRRixVQUFVRyxPQUFPLENBQUMxRCxLQUFLLENBQUU7Z0JBQzFDLElBQUl5RCxLQUFLUCxVQUFVLElBQUlPLEtBQUtQLFVBQVUsQ0FBQ0UsSUFBSSxFQUFFO29CQUMzQyxPQUFPLENBQUMsS0FBSyxFQUFFSyxLQUFLUCxVQUFVLENBQUNDLFFBQVEsQ0FBQyxRQUFRLEVBQUVNLEtBQUtQLFVBQVUsQ0FBQ0UsSUFBSSxFQUFFO2dCQUMxRTtZQUNGO1FBQ0Y7UUFDQSxPQUFPO0lBQ1QsRUFBRSxPQUFPeEgsT0FBWTtRQUNuQlcsUUFBUVgsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekNILGlCQUFpQkc7UUFDakIsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVLLE1BQU0rSCxpQkFBaUIsT0FBT0M7SUFDbkMsTUFBTXBFLEtBQUssSUFBSXZFLHNEQUFXQSxDQUFDO1FBQUV3RSxRQUFRcEU7SUFBWTtJQUVqRCxNQUFNcUUsU0FBUyxDQUFDOzs7Ozs7Ozs7O0VBVWhCLENBQUM7SUFFRCxNQUFNbUUsbUJBQW1CO1FBQ3ZCeEcsTUFBTW5DLCtDQUFJQSxDQUFDb0MsTUFBTTtRQUNqQkMsWUFBWTtZQUNWRSxPQUFPO2dCQUFFSixNQUFNbkMsK0NBQUlBLENBQUN3QyxNQUFNO1lBQUM7WUFDM0JvRyxTQUFTO2dCQUFFekcsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtZQUFDO1lBQzdCcUQsc0JBQXNCO2dCQUFFMUQsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtZQUFDO1lBQzFDUSwrQkFBK0I7Z0JBQUViLE1BQU1uQywrQ0FBSUEsQ0FBQ3dDLE1BQU07WUFBQztZQUNuREssVUFBVTtnQkFBRVYsTUFBTW5DLCtDQUFJQSxDQUFDd0MsTUFBTTtZQUFDO1FBQ2hDO1FBQ0FxQixVQUFVO1lBQUM7WUFBUztZQUFXO1lBQXdCO1NBQVc7SUFDcEU7SUFFQSxJQUFJO1FBQ0YsTUFBTVksV0FBVyxNQUFNL0MsaUJBQTBDLElBQU00QyxHQUFHSSxNQUFNLENBQUNDLGVBQWUsQ0FBQztnQkFDL0ZDLE9BQU87Z0JBQ1BDLFVBQVU7b0JBQ1JDLE9BQU87d0JBQ0w7NEJBQUVrRCxZQUFZO2dDQUFFQyxVQUFVO2dDQUFtQkMsTUFBTVE7NEJBQVU7d0JBQUU7d0JBQy9EOzRCQUFFM0QsTUFBTVA7d0JBQU87cUJBQ2hCO2dCQUNIO2dCQUNBUSxRQUFRO29CQUNOYyxrQkFBa0I7b0JBQ2xCQyxnQkFBZ0I0QztnQkFDbEI7WUFDRjtRQUVBLElBQUksQ0FBQ2xFLFNBQVNNLElBQUksRUFBRSxNQUFNLElBQUl6RSxNQUFNO1FBQ3BDLE9BQU9PLEtBQUtvRixLQUFLLENBQUN4QixTQUFTTSxJQUFJO0lBQ2pDLEVBQUUsT0FBT3JFLE9BQVk7UUFDbkJXLFFBQVFYLEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDSCxpQkFBaUJHO1FBQ2pCLE1BQU1BO0lBQ1I7QUFDRixFQUFFO0FBRUYseUJBQXlCO0FBRXpCLDZEQUE2RDtBQUM3RCxTQUFTbUksWUFBWUMsTUFBYztJQUNqQyxNQUFNQyxlQUFlQyxLQUFLRjtJQUMxQixNQUFNRyxNQUFNRixhQUFhNUMsTUFBTTtJQUMvQixNQUFNK0MsUUFBUSxJQUFJQyxXQUFXRjtJQUM3QixJQUFLLElBQUlHLElBQUksR0FBR0EsSUFBSUgsS0FBS0csSUFBSztRQUM1QkYsS0FBSyxDQUFDRSxFQUFFLEdBQUdMLGFBQWFNLFVBQVUsQ0FBQ0Q7SUFDckM7SUFDQSxPQUFPLElBQUlFLFdBQVdKLE1BQU1LLE1BQU07QUFDcEM7QUFFTyxNQUFNQyxvQkFBb0IsT0FBT3pFLE1BQWMwRSxjQUE0QmxELFlBQW9CLE1BQU07SUFDMUcsTUFBTWpDLEtBQUssSUFBSXZFLHNEQUFXQSxDQUFDO1FBQUV3RSxRQUFRcEU7SUFBWTtJQUVqRCw2QkFBNkI7SUFDN0IsSUFBSSxDQUFDNEUsUUFBUSxDQUFDQSxLQUFLMkUsSUFBSSxJQUFJLE9BQU87SUFFbEMsMkZBQTJGO0lBQzNGLE1BQU1DLFdBQVc1RSxLQUFLMkUsSUFBSSxHQUFHRSxLQUFLLENBQUMsR0FBRztJQUV0QyxNQUFNcEYsU0FBUyxDQUFDOztJQUVkLEVBQUVtRixVQUFVO0lBRWQsSUFBSTtRQUNGLE1BQU1sRixXQUFXLE1BQU0vQyxpQkFBMEMsSUFBTTRDLEdBQUdJLE1BQU0sQ0FBQ0MsZUFBZSxDQUFDO2dCQUMvRkMsT0FBTztnQkFDUEMsVUFBVTtvQkFBQzt3QkFBRUMsT0FBTzs0QkFBQztnQ0FBRUMsTUFBTVA7NEJBQU87eUJBQUU7b0JBQUM7aUJBQUU7Z0JBQ3pDUSxRQUFRO29CQUNONkUsb0JBQW9CO3dCQUFDNUosbURBQVFBLENBQUM2SixLQUFLO3FCQUFDO29CQUNwQ0MsY0FBYzt3QkFDWkMsYUFBYTs0QkFDWEMscUJBQXFCO2dDQUFFMUQsV0FBV0E7NEJBQVU7d0JBQzlDO29CQUNGO2dCQUNGO1lBQ0Y7UUFFQSxNQUFNMkQsY0FBY3pGLFNBQVM2RCxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUVFLFNBQVMxRCxPQUFPLENBQUMsRUFBRSxFQUFFa0QsWUFBWUU7UUFFL0UsSUFBSSxDQUFDZ0MsYUFBYSxPQUFPO1FBRXpCLGtCQUFrQjtRQUNsQixNQUFNQyxVQUFVdEIsWUFBWXFCO1FBRTVCLDhEQUE4RDtRQUM5RCxNQUFNRSxjQUFjLElBQUlDLGFBQWFGLFFBQVFoRSxNQUFNO1FBQ25ELElBQUssSUFBSWlELElBQUksR0FBR0EsSUFBSWUsUUFBUWhFLE1BQU0sRUFBRWlELElBQUs7WUFDdkNnQixXQUFXLENBQUNoQixFQUFFLEdBQUdlLE9BQU8sQ0FBQ2YsRUFBRSxHQUFHO1FBQ2hDO1FBRUEsMEdBQTBHO1FBQzFHLDJDQUEyQztRQUMzQyxNQUFNa0IsY0FBY2IsYUFBYWMsWUFBWSxDQUFDLEdBQUdILFlBQVlqRSxNQUFNLEVBQUU7UUFDckVtRSxZQUFZRSxjQUFjLENBQUMsR0FBR0MsR0FBRyxDQUFDTDtRQUVsQyxPQUFPRTtJQUVULEVBQUUsT0FBTzVKLE9BQVk7UUFDbkJXLFFBQVFYLEtBQUssQ0FBQywyQkFBMkJBO1FBRXpDLDhDQUE4QztRQUM5Q0gsaUJBQWlCRztRQUVqQixPQUFPO0lBQ1Q7QUFDRixFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExFTk9WT1xcRGVza3RvcFxcc2hhaGFyXFxib29rYWlcXHNlcnZpY2VzXFxnZW1pbmlTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgR29vZ2xlR2VuQUksIFR5cGUsIE1vZGFsaXR5LCBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZSB9IGZyb20gXCJAZ29vZ2xlL2dlbmFpXCI7XG5pbXBvcnQgeyBCb29rLCBCb29rUmVxdWVzdCwgUHJldmlvdXNCb29rQ29udGV4dCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgYXBpS2V5TWFuYWdlciB9IGZyb20gXCIuL2FwaUtleU1hbmFnZXJcIjtcblxuLy8gSGVscGVyIHRvIGdldCBBUEkga2V5XG5jb25zdCBnZXRBcGlLZXkgPSAoKTogc3RyaW5nID0+IHtcbiAgY29uc3Qga2V5ID0gYXBpS2V5TWFuYWdlci5nZXRLZXkoKTtcbiAgaWYgKCFrZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBrZXkgbm90IGNvbmZpZ3VyZWQnKTtcbiAgfVxuICByZXR1cm4ga2V5O1xufTtcblxuLy8gSGVscGVyIHRvIGNoZWNrIGZvciBmYXRhbCBhdXRoL3F1b3RhIGVycm9yc1xuY29uc3QgaGFuZGxlRmF0YWxFcnJvciA9IChlcnI6IGFueSkgPT4ge1xuICAvLyBJbnNwZWN0IGlmIHRoZSBlcnJvciBpcyB3cmFwcGVkIGluIGFuICdlcnJvcicgcHJvcGVydHkgKGNvbW1vbiBpbiBHb29nbGUgSlNPTiByZXNwb25zZXMpXG4gIGNvbnN0IGVycm9yT2JqID0gZXJyPy5lcnJvciB8fCBlcnI7XG5cbiAgY29uc3QgbXNnID0gKGVycm9yT2JqPy5tZXNzYWdlIHx8IEpTT04uc3RyaW5naWZ5KGVycikpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHN0YXR1cyA9IGVycm9yT2JqPy5zdGF0dXMgfHwgZXJyb3JPYmo/LmNvZGU7XG5cbiAgLy8gQ2hlY2sgZm9yIFF1b3RhIGlzc3Vlc1xuICBjb25zdCBpc1F1b3RhID1cbiAgICBzdGF0dXMgPT09IDQyOSB8fFxuICAgIHN0YXR1cyA9PT0gJ1JFU09VUkNFX0VYSEFVU1RFRCcgfHxcbiAgICBtc2cuaW5jbHVkZXMoXCJxdW90YVwiKSB8fFxuICAgIG1zZy5pbmNsdWRlcyhcInJlc291cmNlX2V4aGF1c3RlZFwiKSB8fFxuICAgIC8vIFNwZWNpZmljIGNoZWNrIGZvciBcImxpbWl0OiAwXCIgd2hpY2ggb2Z0ZW4gbWVhbnMgbW9kZWwgbm90IGF2YWlsYWJsZSBpbiBwbGFuIG9yIGV4aGF1c3RlZFxuICAgIG1zZy5pbmNsdWRlcyhcImxpbWl0OiAwXCIpO1xuXG4gIC8vIENoZWNrIGZvciBBdXRoIGlzc3VlcyAoSW52YWxpZCBLZXksIEV4cGlyZWQgS2V5LCBQcm9qZWN0IG5vdCBmb3VuZClcbiAgY29uc3QgaXNBdXRoID1cbiAgICBzdGF0dXMgPT09IDQwMyB8fFxuICAgIC8vIFN0YXR1cyA0MDAgaXMgbm9ybWFsbHkgSW52YWxpZCBBcmd1bWVudCwgYnV0IGlmIG1lc3NhZ2Ugc2F5cyBcIkFQSSBrZXkgZXhwaXJlZFwiLCBpdCdzIGF1dGguXG4gICAgKHN0YXR1cyA9PT0gNDAwICYmIChtc2cuaW5jbHVkZXMoXCJhcGkga2V5XCIpIHx8IG1zZy5pbmNsdWRlcyhcImV4cGlyZWRcIikpKSB8fFxuICAgIG1zZy5pbmNsdWRlcyhcImFwaSBrZXlcIikgfHxcbiAgICBtc2cuaW5jbHVkZXMoXCJ1bmF1dGhlbnRpY2F0ZWRcIikgfHxcbiAgICBtc2cuaW5jbHVkZXMoXCJwZXJtaXNzaW9uIGRlbmllZFwiKSB8fFxuICAgIG1zZy5pbmNsdWRlcyhcInJlcXVlc3RlZCBlbnRpdHkgd2FzIG5vdCBmb3VuZFwiKSB8fFxuICAgIG1zZy5pbmNsdWRlcyhcImV4cGlyZWRcIik7XG5cbiAgaWYgKGlzUXVvdGEgfHwgaXNBdXRoKSB7XG4gICAgY29uc29sZS53YXJuKGBGYXRhbCBBUEkgRXJyb3IgKCR7aXNRdW90YSA/ICdRdW90YScgOiAnQXV0aCd9KS4gVHJpZ2dlcmluZyBSZS1hdXRoLmAsIGVycik7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdyZXNlbGVjdC1hcGkta2V5JykpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8vIEhlbHBlciBmb3IgcmV0cnkgbG9naWMgd2l0aCBleHBvbmVudGlhbCBiYWNrb2ZmXG5hc3luYyBmdW5jdGlvbiByZXRyeVdpdGhCYWNrb2ZmPFQ+KFxuICBmbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgcmV0cmllcyA9IDMsXG4gIGJhc2VEZWxheSA9IDEwMDBcbik6IFByb21pc2U8VD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBmbigpO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgLy8gQ2hlY2sgZm9yIGZhdGFsIGVycm9ycyBmaXJzdC4gSWYgZmF0YWwsIGRvIG5vdCByZXRyeS5cbiAgICBpZiAoaGFuZGxlRmF0YWxFcnJvcihlcnJvcikpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnN0YXR1cyB8fCBlcnJvci5jb2RlO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSAoZXJyb3IubWVzc2FnZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIENoZWNrIGlmIGVycm9yIGlzIHJldHJ5YWJsZSAoVHJhbnNpZW50IDV4eCBzZXJ2ZXIgZXJyb3JzKVxuICAgIC8vIE5vdGU6IFdlIGhhbmRsZWQgNDI5L1F1b3RhIGFib3ZlIGFzIGZhdGFsIGJlY2F1c2UgdXN1YWxseSBpbiB0aGlzIGNvbnRleHQgaW1wbGllcyBEYWlseSBMaW1pdCwgbm90IGp1c3QgUVBNLlxuICAgIGNvbnN0IGlzUmV0cnlhYmxlID1cbiAgICAgIChzdGF0dXMgJiYgWzUwMCwgNTAzXS5pbmNsdWRlcyhzdGF0dXMpKSB8fFxuICAgICAgKG1lc3NhZ2UuaW5jbHVkZXMoJ2ludGVybmFsJykgfHxcbiAgICAgICAgbWVzc2FnZS5pbmNsdWRlcygnb3ZlcmxvYWRlZCcpIHx8XG4gICAgICAgIG1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSk7XG5cbiAgICBpZiAocmV0cmllcyA+IDAgJiYgaXNSZXRyeWFibGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihgUmV0cnlpbmcgb3BlcmF0aW9uIGR1ZSB0byBlcnJvcjogJHttZXNzYWdlfS4gQXR0ZW1wdHMgbGVmdDogJHtyZXRyaWVzfS4gV2FpdGluZyAke2Jhc2VEZWxheX1tcy5gKTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBiYXNlRGVsYXkpKTtcbiAgICAgIHJldHVybiByZXRyeVdpdGhCYWNrb2ZmKGZuLCByZXRyaWVzIC0gMSwgYmFzZURlbGF5ICogMik7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIERlZmluZSB0aGUgcmVzcG9uc2Ugc2NoZW1hIGZvciB0aGUgYm9vayB1c2luZyB0aGUgVHlwZSBlbnVtXG5jb25zdCBib29rU2NoZW1hID0ge1xuICB0eXBlOiBUeXBlLk9CSkVDVCxcbiAgcHJvcGVydGllczoge1xuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0eXBlOiBUeXBlLk9CSkVDVCxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdGl0bGUgb2YgdGhlIGJvb2sgaW4gSGVicmV3IE9OTFkuIERvIE5PVCBpbmNsdWRlIEVuZ2xpc2ggdHJhbnNsYXRpb24uXCJcbiAgICAgICAgfSxcbiAgICAgICAgdGFyZ2V0QWdlOiB7IHR5cGU6IFR5cGUuU1RSSU5HIH0sXG4gICAgICAgIG1haW5UaGVtZTogeyB0eXBlOiBUeXBlLlNUUklORyB9LFxuICAgICAgICBlZHVjYXRpb25hbE1lc3NhZ2U6IHsgdHlwZTogVHlwZS5TVFJJTkcgfSxcbiAgICAgICAgYXJ0U3R5bGU6IHtcbiAgICAgICAgICB0eXBlOiBUeXBlLlNUUklORyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXRhaWxlZCBkZXNjcmlwdGlvbiBvZiB0aGUgYXJ0IHN0eWxlLlwiXG4gICAgICAgIH0sXG4gICAgICAgIG1haW5DaGFyYWN0ZXJEZXNjcmlwdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbXByZWhlbnNpdmUgcGh5c2ljYWwgZGVzY3JpcHRpb24gb2YgdGhlIE1BSU4gY2hhcmFjdGVyIChjbG90aGluZywgaGFpciwgYWNjZXNzb3JpZXMpLiBCZSB2ZXJ5IHNwZWNpZmljIGFib3V0IGNvbG9ycy5cIlxuICAgICAgICB9LFxuICAgICAgICBtYWluQ2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrOiB7XG4gICAgICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiQSBzcGVjaWZpYywgdW5pcXVlIHZpc3VhbCBmZWF0dXJlIGZvciB0aGUgbWFpbiBjaGFyYWN0ZXIgdGhhdCBhY3RzIGFzIGEgdmlzdWFsIGFuY2hvciAoZS5nLiwgJ2JpZyByZWQgZ2xhc3NlcycsICdhIHN0YXIgcGF0Y2ggb24gdGhlIG92ZXJhbGxzJywgJ2EgZ2xvd2luZyBibHVlIHBlbmRhbnQnLCAnYSBwdXJwbGUgZmVhdGhlciBpbiBoYXQnKS4gVGhpcyBNVVNUIGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHNpbmdsZSBpbWFnZSBkZXNjcmlwdGlvbi5cIlxuICAgICAgICB9LFxuICAgICAgICBzZWNvbmRhcnlDaGFyYWN0ZXJEZXNjcmlwdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIklmIHRoZXJlIGlzIGEgY29uc3RhbnQgY29tcGFuaW9uIChhbmltYWwsIGZyaWVuZCwgc2libGluZykgdGhhdCBhcHBlYXJzIGluIG11bHRpcGxlIHBhZ2VzLCBkZXNjcmliZSB0aGVtIGhlcmUgd2l0aCBFWFRSRU1FIERFVEFJTC4gSW5jbHVkZTogU3BlY2llcywgQ29sb3IgKHNwZWNpZmljIHNoYWRlKSwgU2l6ZSwgQWNjZXNzb3JpZXMsIGFuZCBEaXN0aW5jdGl2ZSBNYXJrcy4gZS5nLiAnQSByb3R1bmQgYnJpZ2h0LXllbGxvdyBjaGljayB3aXRoIGxhcmdlIGFuaW1lLXN0eWxlIGJsdWUgZXllcywgYSB0aW55IG9yYW5nZSBiZWFrLCBhbmQgd2VhcmluZyBhIG1pbmlhdHVyZSByZWQgd29vbCBzY2FyZicuIFRoaXMgZGVzY3JpcHRpb24gTVVTVCBiZSB1bmlxdWUgYW5kIHVuY2hhbmdpbmcuXCJcbiAgICAgICAgfSxcbiAgICAgICAgc2Vjb25kYXJ5Q2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrOiB7XG4gICAgICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiQSBzcGVjaWZpYywgdW5pcXVlIHZpc3VhbCBmZWF0dXJlIGZvciB0aGUgc2Vjb25kYXJ5IGNoYXJhY3RlciAoaWYgcHJlc2VudCkgdGhhdCBhY3RzIGFzIGEgdmlzdWFsIGFuY2hvci5cIlxuICAgICAgICB9LFxuICAgICAgICBrZXlPYmplY3REZXNjcmlwdGlvbjoge1xuICAgICAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkRlc2NyaXB0aW9uIG9mIGFueSByZWN1cnJpbmcgbWFnaWNhbCBvciBrZXkgb2JqZWN0LlwiXG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlUHJpbWFyeUNvbG9yOiB7IHR5cGU6IFR5cGUuU1RSSU5HIH0sXG4gICAgICAgIHRpdGxlU2Vjb25kYXJ5Q29sb3I6IHsgdHlwZTogVHlwZS5TVFJJTkcgfSxcbiAgICAgICAgdGl0bGVFZmZlY3RUaGVtZToge1xuICAgICAgICAgIHR5cGU6IFR5cGUuU1RSSU5HLFxuICAgICAgICAgIGVudW06IFsnbWFnaWNhbCcsICduYXR1cmFsJywgJ3RlY2gnLCAnY2xhc3NpYycsICdwbGF5ZnVsJywgJ2VsZWdhbnQnXVxuICAgICAgICB9LFxuICAgICAgICB2aXN1YWxDb25zaXN0ZW5jeUd1aWRlOiB7XG4gICAgICAgICAgdHlwZTogVHlwZS5PQkpFQ1QsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgY2hhcmFjdGVyVHJhaXRzOiB7IHR5cGU6IFR5cGUuQVJSQVksIGl0ZW1zOiB7IHR5cGU6IFR5cGUuU1RSSU5HIH0gfSxcbiAgICAgICAgICAgIG9iamVjdFRyYWl0czogeyB0eXBlOiBUeXBlLkFSUkFZLCBpdGVtczogeyB0eXBlOiBUeXBlLlNUUklORyB9IH0sXG4gICAgICAgICAgICBiYWNrZ3JvdW5kU3R5bGU6IHsgdHlwZTogVHlwZS5TVFJJTkcgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFtcImNoYXJhY3RlclRyYWl0c1wiLCBcIm9iamVjdFRyYWl0c1wiLCBcImJhY2tncm91bmRTdHlsZVwiXVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IFtcInRpdGxlXCIsIFwidGFyZ2V0QWdlXCIsIFwibWFpblRoZW1lXCIsIFwiZWR1Y2F0aW9uYWxNZXNzYWdlXCIsIFwibWFpbkNoYXJhY3RlckRlc2NyaXB0aW9uXCIsIFwibWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFya1wiLCBcImFydFN0eWxlXCIsIFwia2V5T2JqZWN0RGVzY3JpcHRpb25cIiwgXCJ0aXRsZVByaW1hcnlDb2xvclwiLCBcInRpdGxlU2Vjb25kYXJ5Q29sb3JcIiwgXCJ0aXRsZUVmZmVjdFRoZW1lXCIsIFwidmlzdWFsQ29uc2lzdGVuY3lHdWlkZVwiXSxcbiAgICB9LFxuICAgIHBhZ2VzOiB7XG4gICAgICB0eXBlOiBUeXBlLkFSUkFZLFxuICAgICAgaXRlbXM6IHtcbiAgICAgICAgdHlwZTogVHlwZS5PQkpFQ1QsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBwYWdlTnVtYmVyOiB7IHR5cGU6IFR5cGUuSU5URUdFUiB9LFxuICAgICAgICAgIGhlYnJld1RleHQ6IHsgdHlwZTogVHlwZS5TVFJJTkcgfSxcbiAgICAgICAgICBpbWFnZVByb21wdDoge1xuICAgICAgICAgICAgdHlwZTogVHlwZS5TVFJJTkcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXRhaWxlZCBFTkdMSVNIIHZpc3VhbCBzY2VuZSBkZXNjcmlwdGlvbi4gSU1QT1JUQU5UOiBEZXNjcmliZSBhIFNQRUNJRklDIENBTUVSQSBBTkdMRSAoZS5nLiwgJ0Nsb3NlLXVwIG9uIGZhY2UnLCAnV2lkZSBzaG90IGZyb20gYWJvdmUnLCAnTG93IGFuZ2xlIGxvb2tpbmcgdXAnKSBhbmQgU1BFQ0lGSUMgQkFDS0dST1VORCBERVRBSUxTIHJlbGV2YW50IHRvIHRoZSBhY3Rpb24uIERvIE5PVCBqdXN0IHNheSAnaW4gdGhlIGZvcmVzdCcuIFNheSAnbmV4dCB0byBhIGdpYW50IG9hayB0cmVlIHdpdGggc3VubGlnaHQgZmlsdGVyaW5nIHRocm91Z2gnLlwiXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFtcInBhZ2VOdW1iZXJcIiwgXCJoZWJyZXdUZXh0XCIsIFwiaW1hZ2VQcm9tcHRcIl0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHJlcXVpcmVkOiBbXCJtZXRhZGF0YVwiLCBcInBhZ2VzXCJdLFxufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlU3RvcnlJZGVhID0gYXN5bmMgKGFnZVJhbmdlOiBzdHJpbmcsIGN1cnJlbnRUb3BpYzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgY29uc3QgYWkgPSBuZXcgR29vZ2xlR2VuQUkoeyBhcGlLZXk6IGdldEFwaUtleSgpIH0pO1xuICBjb25zdCBwcm9tcHQgPSBgWW91IGFyZSBhIGNyZWF0aXZlIGNoaWxkcmVuJ3MgYm9vayBlZGl0b3IuIFxuICBUaGUgdXNlciB3YW50cyBhbiBpZGVhIGZvciBhIGJvb2suXG4gIFRhcmdldCBBZ2U6ICR7YWdlUmFuZ2V9XG4gIFVzZXIncyByb3VnaCBpZGVhIChvcHRpb25hbCk6IFwiJHtjdXJyZW50VG9waWN9XCJcblxuICBQbGVhc2UgZ2VuZXJhdGUgYSBzaG9ydCwgc3RydWN0dXJlZCBjb25jZXB0IGluIEhFQlJFVyAo16LXkdeo15nXqikuXG4gIFN0cnVjdHVyZTpcbiAgMS4g16nXnSDXlNeh16TXqCAoVGl0bGUpXG4gIDIuINeT157XldeqINeo15DXqdeZ16ogKE1haW4gQ2hhcmFjdGVyIC0gTmFtZSArIEEgdW5pcXVlIHZpc3VhbCB0cmFpdC9tYXJrKVxuICAzLiDXqten16bXmdeoINeU16LXnNeZ15zXlCAoU2hvcnQgUGxvdCBTdW1tYXJ5KVxuICBcbiAgTWFrZSBpdCBlbmdhZ2luZywgbWFnaWNhbCwgYW5kIHN1aXRhYmxlIGZvciB0aGUgYWdlIGdyb3VwLiBcbiAgRG8gbm90IGluY2x1ZGUgbWFya2Rvd24gZm9ybWF0dGluZyBsaWtlICoqIG9yICMjLiBKdXN0IGNsZWFuIHRleHQuYDtcblxuICB0cnkge1xuICAgIC8vIFVzaW5nIGZsYXNoIGZvciBzcGVlZFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZjxHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZT4oKCkgPT4gYWkubW9kZWxzLmdlbmVyYXRlQ29udGVudCh7XG4gICAgICBtb2RlbDogJ2dlbWluaS0zLWZsYXNoLXByZXZpZXcnLFxuICAgICAgY29udGVudHM6IHsgcGFydHM6IFt7IHRleHQ6IHByb21wdCB9XSB9LFxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIG1heE91dHB1dFRva2VuczogMzAwLFxuICAgICAgfVxuICAgIH0pKTtcbiAgICByZXR1cm4gcmVzcG9uc2UudGV4dCB8fCBcIlwiO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgaWRlYTpcIiwgZXJyb3IpO1xuICAgIC8vIElmIGhhbmRsZUZhdGFsRXJyb3IgcmV0dXJucyB0cnVlLCBpdCdzIGEgY3JpdGljYWwgYXV0aC9xdW90YSBlcnJvciBhbmQgd2UgbGV0IHRoZSBVSSByZWRpcmVjdC5cbiAgICAvLyBJZiBpdCByZXR1cm5zIGZhbHNlLCB3ZSB0aHJvdyBzbyB0aGUgY29tcG9uZW50IGNhbiBzaG93IGEgc3BlY2lmaWMgYWxlcnQuXG4gICAgaWYgKCFoYW5kbGVGYXRhbEVycm9yKGVycm9yKSkge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVCb29rQ29udGVudCA9IGFzeW5jIChyZXF1ZXN0OiBCb29rUmVxdWVzdCk6IFByb21pc2U8Qm9vaz4gPT4ge1xuICAvLyBDb3B5cmlnaHQgY2hlY2sgYmVmb3JlIGdlbmVyYXRpb25cbiAgY29uc3QgeyB2YWxpZGF0ZUJvb2tSZXF1ZXN0LCBsb2dHZW5lcmF0ZWRCb29rIH0gPSBhd2FpdCBpbXBvcnQoJy4vcHJvbXB0R3VhcmQnKTtcbiAgY29uc3QgY29weXJpZ2h0Q2hlY2sgPSBhd2FpdCB2YWxpZGF0ZUJvb2tSZXF1ZXN0KHJlcXVlc3QudG9waWMpO1xuICBpZiAoIWNvcHlyaWdodENoZWNrLmFsbG93ZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoY29weXJpZ2h0Q2hlY2sucmVhc29uIHx8ICdDb250ZW50IGJsb2NrZWQnKTtcbiAgfVxuXG4gIGNvbnN0IGFpID0gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5OiBnZXRBcGlLZXkoKSB9KTtcbiAgY29uc3Qgc3lzdGVtSW5zdHJ1Y3Rpb24gPSBgWW91IGFyZSBhIHdvcmxkLWNsYXNzIGNoaWxkcmVuJ3MgYm9vayBhdXRob3IgYW5kIGFydCBkaXJlY3Rvci5cbiAgXG4gIFRBU0s6IENyZWF0ZSBhIG1hZ2ljYWwgY2hpbGRyZW4ncyBib29rIGluIEhlYnJldyB3aXRoIGRldGFpbGVkIEVuZ2xpc2ggYXJ0IGRpcmVjdGlvbi5cbiAgXG4gIFNUUklDVCBQQUdFIENPVU5UOiBFWEFDVExZICR7cmVxdWVzdC5wYWdlQ291bnR9IHBhZ2VzLlxuICBcbiAgR1VJREVMSU5FUzpcbiAgMS4gU1RPUlkgKEhlYnJldyk6IEVuZ2FnaW5nLCBhZ2UtYXBwcm9wcmlhdGUsIHBlcmZlY3QgZ3JhbW1hci5cbiAgICAgLSBDUklUSUNBTDogVGhlICd0aXRsZScgaW4gbWV0YWRhdGEgTVVTVCBiZSBpbiBIZWJyZXcgT05MWS4gRG8gbm90IGluY2x1ZGUgYW4gRW5nbGlzaCB0cmFuc2xhdGlvbi5cbiAgMi4gQVJUIERJUkVDVElPTiAoRW5nbGlzaCk6XG4gICAgIC0gJ21haW5DaGFyYWN0ZXJEZXNjcmlwdGlvbic6IEEgcHJlY2lzZSwgdW5jaGFuZ2luZyB2aXN1YWwgZGVmaW5pdGlvbi5cbiAgICAgLSAnbWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyayc6IENSRUFURSBBIFVOSVFVRSBJREVOVElGSUVSIChlLmcuLCBcIlJhaW5ib3cgU2NhcmZcIiwgXCJHb2xkZW4gR29nZ2xlc1wiKS4gVGhpcyBpcyBDUklUSUNBTCBmb3IgY29uc2lzdGVuY3kuXG4gICAgIC0gJ3Zpc3VhbENvbnNpc3RlbmN5R3VpZGUnOiBMaXN0IHNwZWNpZmljIGl0ZW1zL2NvbG9ycyB0aGF0IE1VU1QgYXBwZWFyIGluIGV2ZXJ5IGltYWdlLlxuICAgICAtICdpbWFnZVByb21wdCcgKGZvciBlYWNoIHBhZ2UpOiBBIEZVTEwgU0NFTkUgREVTQ1JJUFRJT04uIFxuICAzLiBWSVNVQUwgVkFSSUVUWSAoQ1JJVElDQUwpOlxuICAgICAtICoqVkFSWSBDQU1FUkEgQU5HTEVTKio6IERvIE5PVCB1c2UgdGhlIHNhbWUgXCJtZWRpdW0gc2hvdFwiIGZvciBldmVyeSBwYWdlLiBVc2UgQ2xvc2UtdXBzLCBXaWRlIHNob3RzLCBCaXJkJ3MtZXllIHZpZXcsIExvdyBhbmdsZXMuXG4gICAgIC0gKipWQVJZIEJBQ0tHUk9VTkRTKio6IEV2ZW4gaWYgdGhlIHNldHRpbmcgaXMgdGhlIHNhbWUgKGUuZy4sIGEgZm9yZXN0KSwgZm9jdXMgb24gRElGRkVSRU5UIHBhcnRzIG9mIGl0IChlLmcuLCBcIm5leHQgdG8gYSBzdHJlYW1cIiwgXCJpbnNpZGUgYSBob2xsb3cgbG9nXCIsIFwibG9va2luZyB1cCBhdCB0aGUgY2Fub3B5XCIpLlxuICAgICAtICoqRFlOQU1JQyBBQ1RJT04qKjogQ2hhcmFjdGVycyBzaG91bGQgYmUgZG9pbmcgZGlmZmVyZW50IHRoaW5ncywgbm90IGp1c3Qgc3RhbmRpbmcuXG4gIDQuIENPTVBPU0lUSU9OIEFXQVJFTkVTUzpcbiAgICAgLSBUaGUgaW1hZ2VzIG11c3QgYmUgRlVMTCBCTEVFRCwgZmlsbGluZyB0aGUgZW50aXJlIHNxdWFyZSAxOjEgY2FudmFzLlxuICAgICAtIENlbnRlciB0aGUgYWN0aW9uLlxuICAgICAtIERvIE5PVCBsZWF2ZSBlbXB0eSBzcGFjZSBmb3IgdGV4dC4gVGV4dCB3aWxsIGJlIGFkZGVkIGV4dGVybmFsbHkuXG4gIGA7XG5cbiAgbGV0IHByb21wdCA9IGBDcmVhdGUgYSBjaGlsZHJlbidzIGJvb2suXG4gIFRhcmdldCBBZ2U6ICR7cmVxdWVzdC5hZ2VSYW5nZX1cbiAgVG9waWM6ICR7cmVxdWVzdC50b3BpY31cbiAgUkVRVUlSRUQgTEVOR1RIOiBFWEFDVExZICR7cmVxdWVzdC5wYWdlQ291bnR9IHBhZ2VzLiBTdGFydCB3aXRoIHBhZ2UgMSBhcyB0aGUgY292ZXIgYW5kIGVuZCB3aXRoIHBhZ2UgJHtyZXF1ZXN0LnBhZ2VDb3VudH0uXG4gIEFydCBTdHlsZSBTZWxlY3Rpb246ICR7cmVxdWVzdC5hcnRTdHlsZX1gO1xuXG4gIGlmIChyZXF1ZXN0LnByZXZpb3VzQ29udGV4dCkge1xuICAgIHByb21wdCArPSBgXG4gICAgU0VRVUVMIE1PREU6IE1haW50YWluIGNoYXJhY3RlciBjb25zaXN0ZW5jeSB3aXRoIHRoZSBwcmV2aW91cyBzdG9yeTogXCIke3JlcXVlc3QucHJldmlvdXNDb250ZXh0LnRpdGxlfVwiLlxuICAgIFByZXZpb3VzIE1haW4gQ2hhcmFjdGVyOiAke3JlcXVlc3QucHJldmlvdXNDb250ZXh0LmNoYXJhY3RlckRlc2NyaXB0aW9ufS5cbiAgICAke3JlcXVlc3QucHJldmlvdXNDb250ZXh0LnNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uID8gYFByZXZpb3VzIFNlY29uZGFyeSBDaGFyYWN0ZXI6ICR7cmVxdWVzdC5wcmV2aW91c0NvbnRleHQuc2Vjb25kYXJ5Q2hhcmFjdGVyRGVzY3JpcHRpb259YCA6ICcnfVxuICAgIGA7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZjxHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZT4oKCkgPT4gYWkubW9kZWxzLmdlbmVyYXRlQ29udGVudCh7XG4gICAgICBtb2RlbDogJ2dlbWluaS0zLXByby1wcmV2aWV3JyxcbiAgICAgIGNvbnRlbnRzOiBwcm9tcHQsXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgcmVzcG9uc2VNaW1lVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICByZXNwb25zZVNjaGVtYTogYm9va1NjaGVtYSxcbiAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHN5c3RlbUluc3RydWN0aW9uLFxuICAgICAgfVxuICAgIH0pKTtcblxuICAgIGlmICghcmVzcG9uc2UudGV4dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGJvb2sgY29udGVudFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBib29rID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KSBhcyBCb29rO1xuXG4gICAgLy8gU2FmZXR5IGNoZWNrIGZvciBwYWdlIGNvdW50XG4gICAgY29uc29sZS5sb2coYFJlcXVlc3RlZCAke3JlcXVlc3QucGFnZUNvdW50fSBwYWdlcywgcmVjZWl2ZWQgJHtib29rLnBhZ2VzLmxlbmd0aH0gcGFnZXMuYCk7XG5cbiAgICAvLyBJbmplY3QgQXVkaW8gQ29uZmlndXJhdGlvbiBmcm9tIFJlcXVlc3RcbiAgICBib29rLm1ldGFkYXRhLmF1ZGlvQ29uZmlnID0ge1xuICAgICAgZW5hYmxlZDogcmVxdWVzdC5hdWRpb0VuYWJsZWQsXG4gICAgICB2b2ljZU5hbWU6IHJlcXVlc3Qudm9pY2VOYW1lXG4gICAgfTtcblxuICAgIGlmIChyZXF1ZXN0LnByZXZpb3VzQ29udGV4dD8uYmFzZUNoYXJhY3RlckltYWdlKSB7XG4gICAgICBib29rLm1ldGFkYXRhLmJhc2VDaGFyYWN0ZXJJbWFnZVVybCA9IHJlcXVlc3QucHJldmlvdXNDb250ZXh0LmJhc2VDaGFyYWN0ZXJJbWFnZTtcbiAgICB9XG5cbiAgICAvLyBSZWZpbmUgYWxsIGltYWdlIHByb21wdHMgdG8gaW5jbHVkZSB0aGUgY29uc2lzdGVuY3kgZ3VpZGUgZm9yIEJPVEggY2hhcmFjdGVyc1xuICAgIGNvbnN0IHRyYWl0cyA9IGJvb2subWV0YWRhdGEudmlzdWFsQ29uc2lzdGVuY3lHdWlkZS5jaGFyYWN0ZXJUcmFpdHMuam9pbihcIiwgXCIpO1xuICAgIGNvbnN0IG9ialRyYWl0cyA9IGJvb2subWV0YWRhdGEudmlzdWFsQ29uc2lzdGVuY3lHdWlkZS5vYmplY3RUcmFpdHMuam9pbihcIiwgXCIpO1xuICAgIGNvbnN0IG1haW5NYXJrID0gYm9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrIHx8IFwiRGlzdGluY3RpdmUgZmVhdHVyZVwiO1xuICAgIGNvbnN0IHNlY01hcmsgPSBib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRpc3RpbmN0aXZlTWFyaztcblxuICAgIGJvb2sucGFnZXMgPSBib29rLnBhZ2VzLm1hcCgocGFnZSwgaWR4KSA9PiB7XG4gICAgICAvLyAxLiBFc3RhYmxpc2ggdGhlIHZpc3VhbCBhbmNob3IgKENoYXJhY3RlcnMgJiBTdHlsZSlcbiAgICAgIGxldCByZWZpbmVkUHJvbXB0ID0gYFtNQUlOIENIQVJBQ1RFUl06ICR7Ym9vay5tZXRhZGF0YS5tYWluQ2hhcmFjdGVyRGVzY3JpcHRpb259LiBESVNUSU5DVElWRSBGRUFUVVJFOiAke21haW5NYXJrfS4gS2V5IEZlYXR1cmVzOiAke3RyYWl0c30uIGA7XG5cbiAgICAgIGlmIChib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uKSB7XG4gICAgICAgIHJlZmluZWRQcm9tcHQgKz0gYFtTRUNPTkRBUlkgQ0hBUkFDVEVSXTogJHtib29rLm1ldGFkYXRhLnNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9ufS4gRElTVElOQ1RJVkUgRkVBVFVSRTogJHtzZWNNYXJrIHx8ICdOb25lJ30uIGA7XG4gICAgICB9XG5cbiAgICAgIC8vIDIuIFNldCB0aGUgRW52aXJvbm1lbnQvQXRtb3NwaGVyZSBcbiAgICAgIC8vIE5PVEU6IFdlIGxhYmVsIHRoaXMgXCJHZW5lcmFsIENvbnRleHRcIiBzbyBpdCBkb2Vzbid0IG92ZXJyaWRlIHRoZSBzcGVjaWZpYyBzY2VuZSBhY3Rpb25cbiAgICAgIHJlZmluZWRQcm9tcHQgKz0gYFtHRU5FUkFMIENPTlRFWFRdOiAke2Jvb2subWV0YWRhdGEudmlzdWFsQ29uc2lzdGVuY3lHdWlkZS5iYWNrZ3JvdW5kU3R5bGV9LiBgO1xuICAgICAgaWYgKG9ialRyYWl0cykgcmVmaW5lZFByb21wdCArPSBgW1BST1BTXTogJHtvYmpUcmFpdHN9LiBgO1xuXG4gICAgICAvLyAzLiBEZWZpbmUgdGhlIHNwZWNpZmljIHNjZW5lIGFjdGlvbiAtIFRISVMgSVMgUFJJT1JJVFlcbiAgICAgIHJlZmluZWRQcm9tcHQgKz0gYFtTUEVDSUZJQyBTQ0VORSBBQ1RJT04gJiBBTkdMRV06ICR7cGFnZS5pbWFnZVByb21wdH0uIGA7XG5cbiAgICAgIHJldHVybiB7IC4uLnBhZ2UsIGltYWdlUHJvbXB0OiByZWZpbmVkUHJvbXB0IH07XG4gICAgfSk7XG5cbiAgICAvLyBEb24ndCBzYXZlIGhlcmUgLSBzYXZlZCBkdXJpbmcgZXhwb3J0IGluc3RlYWRcbiAgICByZXR1cm4gYm9vaztcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZW5lcmF0aW5nIGJvb2sgY29udGVudDpcIiwgZXJyb3IpO1xuICAgIC8vIEV4dHJhIGNhdGNoIGp1c3QgaW4gY2FzZSByZXRyeVdpdGhCYWNrb2ZmIGRpZG4ndCBjYXRjaCBpdFxuICAgIGhhbmRsZUZhdGFsRXJyb3IoZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVQYWdlSW1hZ2UgPSBhc3luYyAoXG4gIGFjdGlvblByb21wdDogc3RyaW5nLFxuICBjaGFyYWN0ZXJEZXNjcmlwdGlvbjogc3RyaW5nLFxuICBhcnRTdHlsZTogc3RyaW5nLFxuICBiYXNlQ2hhcmFjdGVySW1hZ2VVcmw/OiBzdHJpbmcsXG4gIGlzQ292ZXI6IGJvb2xlYW4gPSBmYWxzZSxcbiAgdGV4dFRvUmVuZGVyPzogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZyB8IG51bGw+ID0+IHtcbiAgY29uc3QgYWkgPSBuZXcgR29vZ2xlR2VuQUkoeyBhcGlLZXk6IGdldEFwaUtleSgpIH0pO1xuXG4gIGxldCBmaW5hbFByb21wdCA9IFwiXCI7XG4gIGxldCBtb2RlbE5hbWUgPSBcIlwiO1xuICBsZXQgaW1hZ2VDb25maWcgPSB7fTtcblxuICBpZiAoaXNDb3Zlcikge1xuICAgIC8vIENPVkVSIFNUUkFURUdZOiBVc2UgUHJvIG1vZGVsLCBiYWtlIHRleHQuXG4gICAgbW9kZWxOYW1lID0gJ2dlbWluaS0zLXByby1pbWFnZS1wcmV2aWV3JztcbiAgICBpbWFnZUNvbmZpZyA9IHsgYXNwZWN0UmF0aW86IFwiMToxXCIsIGltYWdlU2l6ZTogXCIxS1wiIH07XG5cbiAgICBmaW5hbFByb21wdCA9IGBcbiAgICAgIFtST0xFXTogRXhwZXJ0IENoaWxkcmVuJ3MgQm9vayBDb3ZlciBEZXNpZ25lci5cbiAgICAgIFtBUlQgU1RZTEVdOiAke2FydFN0eWxlfS5cbiAgICAgIFxuICAgICAgW0NBU1QgREVGSU5JVElPTlNdOiBcbiAgICAgICR7Y2hhcmFjdGVyRGVzY3JpcHRpb259XG4gICAgICBcbiAgICAgIFtTQ0VORSBERVNDUklQVElPTl06ICR7YWN0aW9uUHJvbXB0fVxuICAgICAgXG4gICAgICBbVElUTEUgVEVYVCAtIEFCU09MVVRFIFJFUVVJUkVNRU5UXTpcbiAgICAgIFRoZSBPTkxZIHRleHQgaW4gdGhpcyBlbnRpcmUgaW1hZ2UgaXM6IFwiJHt0ZXh0VG9SZW5kZXJ9XCJcbiAgICAgIFxuICAgICAgQ1JJVElDQUwgLSBURVhUIFJVTEVTOlxuICAgICAgMS4gT05MWSBkaXNwbGF5IHRoZSBleGFjdCB0aXRsZSBhYm92ZSAtIE5PIG90aGVyIHRleHQgd2hhdHNvZXZlclxuICAgICAgMi4gQUJTT0xVVEVMWSBOTzogc3VidGl0bGUsIGF1dGhvciwgYWdlIHJhbmdlLCBwYWdlIGNvdW50LCB0YWdsaW5lLCBkZXNjcmlwdGlvblxuICAgICAgMy4gQUJTT0xVVEVMWSBOTzogXCLXnteX15HXqFwiLCBcIteS15nXnFwiLCBcItei157XldeT15nXnVwiLCBudW1iZXJzLCBjcmVkaXRzLCB3YXRlcm1hcmtzXG4gICAgICA0LiBBQlNPTFVURUxZIE5POiBFbmdsaXNoIHRleHQsIExhdGluIGxldHRlcnMsIGFueSB0ZXh0IG5vdCBpbiB0aGUgdGl0bGVcbiAgICAgIDUuIFRoZSB0aXRsZSBzaG91bGQgYmUgaW4gdGhlIFRPUCBUSElSRCBvZiB0aGUgaW1hZ2VcbiAgICAgIDYuIFVzZSBhcnRpc3RpYyBIZWJyZXcgZm9udCBtYXRjaGluZyAke2FydFN0eWxlfSBzdHlsZVxuICAgICAgNy4gQWRkIGdsb3cvc2hhZG93IGJlaGluZCB0ZXh0IGZvciByZWFkYWJpbGl0eVxuICAgICAgXG4gICAgICBbQ0hBUkFDVEVSXTpcbiAgICAgIDEuIE1haW4gY2hhcmFjdGVyIG11c3QgbWF0Y2ggUmVmZXJlbmNlIEltYWdlIChpZiBwcm92aWRlZClcbiAgICAgIDIuIENoYXJhY3RlciBpbiBkeW5hbWljLCBpbnZpdGluZyBwb3NlXG4gICAgICBcbiAgICAgIFtURUNITklDQUxdOiA4ayByZXNvbHV0aW9uLCBjaW5lbWF0aWMgbGlnaHRpbmcsIHZpdmlkIGNvbG9ycy5cbiAgICAgIFtORUdBVElWRSBQUk9NUFRdOiBzdWJ0aXRsZSwgYXV0aG9yIG5hbWUsIHBhZ2UgY291bnQsIGFnZSByYW5nZSwgRW5nbGlzaCB0ZXh0LCBleHRyYSB0ZXh0LCB3YXRlcm1hcmssIHRhZ2xpbmUsIGNyZWRpdHMsINee15fXkdeoLCDXkteZ15wsINei157XldeT15nXnSwgbnVtYmVycyBhdCBib3R0b20sIGRlc2NyaXB0aW9uIHRleHQsIGFueSB0ZXh0IGJlc2lkZXMgdGl0bGUuXG4gICAgYDtcbiAgfSBlbHNlIHtcbiAgICAvLyBJTk5FUiBQQUdFIFNUUkFURUdZOiBVc2UgRmxhc2ggbW9kZWwsIE5PIHRleHQuXG4gICAgbW9kZWxOYW1lID0gJ2dlbWluaS0yLjUtZmxhc2gtaW1hZ2UnO1xuXG4gICAgLy8gRW5oYW5jZWQgcHJvbXB0IHdpdGggc3Ryb25nZXIgY2hhcmFjdGVyIGNvbnNpc3RlbmN5XG4gICAgZmluYWxQcm9tcHQgPSBgXG4gICAgICBbUk9MRV06IFByb2Zlc3Npb25hbCBDaGlsZHJlbidzIEJvb2sgSWxsdXN0cmF0b3Igc3BlY2lhbGl6aW5nIGluIGNoYXJhY3RlciBjb25zaXN0ZW5jeS5cbiAgICAgIFtBUlQgU1RZTEVdOiAke2FydFN0eWxlfS5cbiAgICAgIFxuICAgICAgW0NBU1QgREVGSU5JVElPTlMgLSBDUklUSUNBTCBGT1IgQ09OU0lTVEVOQ1ldOiBcbiAgICAgICR7Y2hhcmFjdGVyRGVzY3JpcHRpb259XG4gICAgICBcbiAgICAgIFtTQ0VORSBUTyBJTExVU1RSQVRFXTogXG4gICAgICAke2FjdGlvblByb21wdH1cbiAgICAgIFxuICAgICAgW0NIQVJBQ1RFUiBDT05TSVNURU5DWSAtIE1BTkRBVE9SWV06XG4gICAgICAxLiBTQU1FIENIQVJBQ1RFUiA9IElERU5USUNBTCBBUFBFQVJBTkNFIGluIGV2ZXJ5IGlsbHVzdHJhdGlvblxuICAgICAgMi4gTWFpbiBjaGFyYWN0ZXIgTVVTVCBoYXZlIHRoZSBFWEFDVCBzYW1lOlxuICAgICAgICAgLSBGYWNlIHNoYXBlIGFuZCBmZWF0dXJlc1xuICAgICAgICAgLSBIYWlyIGNvbG9yIGFuZCBzdHlsZVxuICAgICAgICAgLSBDbG90aGluZyBhbmQgYWNjZXNzb3JpZXNcbiAgICAgICAgIC0gQW55IGRpc3RpbmN0aXZlIG1hcmtzIG1lbnRpb25lZCBpbiBDQVNUIERFRklOSVRJT05TXG4gICAgICAzLiBJZiBhIFJlZmVyZW5jZSBJbWFnZSBpcyBwcm92aWRlZCwgdGhlIGNoYXJhY3RlciBNVVNUIG1hdGNoIGl0IEVYQUNUTFlcbiAgICAgIDQuIFNlY29uZGFyeSBjaGFyYWN0ZXIgKGlmIHByZXNlbnQpIG11c3QgYWxzbyBiZSBjb25zaXN0ZW50XG4gICAgICA1LiBETyBOT1QgY2hhbmdlIGNoYXJhY3RlciBhcHBlYXJhbmNlIGJldHdlZW4gcGFnZXNcbiAgICAgIFxuICAgICAgW0lMTFVTVFJBVElPTiBSVUxFU106XG4gICAgICAxLiAqKkFCU09MVVRFTFkgTk8gVEVYVCoqOiBObyB0ZXh0LCBjYXB0aW9ucywgc3BlZWNoIGJ1YmJsZXMsIG9yIHdvcmRzXG4gICAgICAyLiAqKkZVTEwgQkxFRUQqKjogVXNlIGVudGlyZSBjYW52YXMsIG5vIGJvcmRlcnMgb3IgbWFyZ2luc1xuICAgICAgMy4gKipEWU5BTUlDIENPTVBPU0lUSU9OKio6IFVzZSB0aGUgY2FtZXJhIGFuZ2xlIHNwZWNpZmllZCBpbiB0aGUgc2NlbmUgZGVzY3JpcHRpb25cbiAgICAgIFxuICAgICAgW0JBQ0tHUk9VTkQgSU5TVFJVQ1RJT05dOiBcbiAgICAgIE1hdGNoIGJhY2tncm91bmQgdG8gdGhlIHNwZWNpZmljIHNjZW5lIGFjdGlvbiBkZXNjcmliZWQgYWJvdmUuXG4gICAgICBVc2UgdmFyaWVkIGNhbWVyYSBhbmdsZXMgKENsb3NlLXVwLCBXaWRlIHNob3QsIExvdyBhbmdsZSkgZm9yIHZpc3VhbCB2YXJpZXR5LlxuICAgICAgXG4gICAgICBbVEVDSE5JQ0FMIFNQRUNTXTogOGsgcmVzb2x1dGlvbiwgY2luZW1hdGljIGxpZ2h0aW5nLCB2aXZpZCBzYXR1cmF0ZWQgY29sb3JzLlxuICAgICAgW05FR0FUSVZFXTogdGV4dCwgd3JpdGluZywgbGV0dGVycywgd29yZHMsIHdhdGVybWFyaywgbG9nbywgYmx1cnJ5LCBsb3cgcXVhbGl0eSwgaW5jb25zaXN0ZW50IGNoYXJhY3RlciwgZGlmZmVyZW50IG91dGZpdCwgY2hhbmdlZCBhcHBlYXJhbmNlLlxuICAgIGA7XG4gIH1cblxuICBjb25zdCBwYXJ0czogYW55W10gPSBbeyB0ZXh0OiBmaW5hbFByb21wdCB9XTtcblxuICAvLyBJZiB3ZSBoYXZlIGEgYmFzZSBjaGFyYWN0ZXIgaW1hZ2UsIHdlIE1VU1Qgc2VuZCBpdCBhcyBhIHJlZmVyZW5jZSBmb3IgRVZFUlkgcGFnZVxuICBpZiAoYmFzZUNoYXJhY3RlckltYWdlVXJsICYmIGJhc2VDaGFyYWN0ZXJJbWFnZVVybC5zdGFydHNXaXRoKCdkYXRhOmltYWdlLycpKSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGJhc2VDaGFyYWN0ZXJJbWFnZVVybC5tYXRjaCgvXmRhdGE6KC4rKTtiYXNlNjQsKC4rKSQvKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgcGFydHMudW5zaGlmdCh7XG4gICAgICAgIGlubGluZURhdGE6IHtcbiAgICAgICAgICBtaW1lVHlwZTogbWF0Y2hlc1sxXSxcbiAgICAgICAgICBkYXRhOiBtYXRjaGVzWzJdXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcGFydHMucHVzaCh7IHRleHQ6IFwiUkVGRVJFTkNFIElNQUdFIElOU1RSVUNUSU9OOiBUaGUgaW1hZ2UgYWJvdmUgaXMgdGhlIE1BSU4gY2hhcmFjdGVyIHJlZmVyZW5jZS4gTWF0Y2ggdGhpcyBjaGFyYWN0ZXIgZXhhY3RseS5cIiB9KTtcbiAgICB9XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZjxHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZT4oKCkgPT4gYWkubW9kZWxzLmdlbmVyYXRlQ29udGVudCh7XG4gICAgICBtb2RlbDogbW9kZWxOYW1lLFxuICAgICAgY29udGVudHM6IHsgcGFydHMgfSxcbiAgICAgIGNvbmZpZzogaXNDb3ZlciA/IHsgaW1hZ2VDb25maWcgfSA6IHVuZGVmaW5lZFxuICAgIH0pKTtcblxuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHJlc3BvbnNlLmNhbmRpZGF0ZXMgfHwgW10pIHtcbiAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xuICAgICAgICBpZiAocGFydC5pbmxpbmVEYXRhICYmIHBhcnQuaW5saW5lRGF0YS5kYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIGBkYXRhOiR7cGFydC5pbmxpbmVEYXRhLm1pbWVUeXBlfTtiYXNlNjQsJHtwYXJ0LmlubGluZURhdGEuZGF0YX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgaW1hZ2U6XCIsIGVycm9yKTtcbiAgICBoYW5kbGVGYXRhbEVycm9yKGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFuYWx5emVCb29rUGRmID0gYXN5bmMgKHBkZkJhc2U2NDogc3RyaW5nKTogUHJvbWlzZTxQcmV2aW91c0Jvb2tDb250ZXh0PiA9PiB7XG4gIGNvbnN0IGFpID0gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5OiBnZXRBcGlLZXkoKSB9KTtcblxuICBjb25zdCBwcm9tcHQgPSBgXG4gICAgQW5hbHl6ZSB0aGlzIFBERiBjaGlsZHJlbidzIGJvb2suIFxuICAgIEV4dHJhY3QgdGhlIGZvbGxvd2luZyBpbmZvcm1hdGlvbiB0byBjcmVhdGUgYSBzZXF1ZWwgY29udGV4dDpcbiAgICAxLiBUaXRsZSBvZiB0aGUgYm9vay5cbiAgICAyLiBBIHN1bW1hcnkgb2YgdGhlIHBsb3QuXG4gICAgMy4gQSBkZXRhaWxlZCB2aXN1YWwgZGVzY3JpcHRpb24gb2YgdGhlIE1BSU4gY2hhcmFjdGVyIChhcHBlYXJhbmNlLCBjbG90aGVzLCBoYWlyLCBjb2xvcnMpLlxuICAgIDQuIEEgZGV0YWlsZWQgdmlzdWFsIGRlc2NyaXB0aW9uIG9mIGFueSBTRUNPTkRBUlkgY2hhcmFjdGVyIChzaWRla2ljaykgaWYgcHJlc2VudC5cbiAgICA1LiBUaGUgYXJ0IHN0eWxlIHVzZWQuXG4gICAgXG4gICAgUmV0dXJuIHRoZSByZXN1bHQgYXMgYSBKU09OIG9iamVjdC5cbiAgYDtcblxuICBjb25zdCBleHRyYWN0aW9uU2NoZW1hID0ge1xuICAgIHR5cGU6IFR5cGUuT0JKRUNULFxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgIHRpdGxlOiB7IHR5cGU6IFR5cGUuU1RSSU5HIH0sXG4gICAgICBzdW1tYXJ5OiB7IHR5cGU6IFR5cGUuU1RSSU5HIH0sXG4gICAgICBjaGFyYWN0ZXJEZXNjcmlwdGlvbjogeyB0eXBlOiBUeXBlLlNUUklORyB9LFxuICAgICAgc2Vjb25kYXJ5Q2hhcmFjdGVyRGVzY3JpcHRpb246IHsgdHlwZTogVHlwZS5TVFJJTkcgfSxcbiAgICAgIGFydFN0eWxlOiB7IHR5cGU6IFR5cGUuU1RSSU5HIH0sXG4gICAgfSxcbiAgICByZXF1aXJlZDogW1widGl0bGVcIiwgXCJzdW1tYXJ5XCIsIFwiY2hhcmFjdGVyRGVzY3JpcHRpb25cIiwgXCJhcnRTdHlsZVwiXSxcbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlXaXRoQmFja29mZjxHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZT4oKCkgPT4gYWkubW9kZWxzLmdlbmVyYXRlQ29udGVudCh7XG4gICAgICBtb2RlbDogJ2dlbWluaS0zLWZsYXNoLXByZXZpZXcnLFxuICAgICAgY29udGVudHM6IHtcbiAgICAgICAgcGFydHM6IFtcbiAgICAgICAgICB7IGlubGluZURhdGE6IHsgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnLCBkYXRhOiBwZGZCYXNlNjQgfSB9LFxuICAgICAgICAgIHsgdGV4dDogcHJvbXB0IH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICByZXNwb25zZU1pbWVUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIHJlc3BvbnNlU2NoZW1hOiBleHRyYWN0aW9uU2NoZW1hXG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgaWYgKCFyZXNwb25zZS50ZXh0KSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYW5hbHl6ZSBQREZcIik7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCkgYXMgUHJldmlvdXNCb29rQ29udGV4dDtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbmFseXppbmcgUERGOlwiLCBlcnJvcik7XG4gICAgaGFuZGxlRmF0YWxFcnJvcihlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbi8vIEFVRElPIEdFTkVSQVRJT04gVVRJTFNcblxuLy8gRGVjb2RlIGJhc2U2NCB0byBiaW5hcnkgc3RyaW5nIHRvIFVpbnQ4QXJyYXkgdG8gSW50MTZBcnJheVxuZnVuY3Rpb24gZGVjb2RlQXVkaW8oYmFzZTY0OiBzdHJpbmcpOiBJbnQxNkFycmF5IHtcbiAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIHJldHVybiBuZXcgSW50MTZBcnJheShieXRlcy5idWZmZXIpO1xufVxuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVQYWdlQXVkaW8gPSBhc3luYyAodGV4dDogc3RyaW5nLCBhdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dCwgdm9pY2VOYW1lOiBzdHJpbmcgPSAnUHVjaycpOiBQcm9taXNlPEF1ZGlvQnVmZmVyIHwgbnVsbD4gPT4ge1xuICBjb25zdCBhaSA9IG5ldyBHb29nbGVHZW5BSSh7IGFwaUtleTogZ2V0QXBpS2V5KCkgfSk7XG5cbiAgLy8gVmFsaWRhdGUgYW5kIFRydW5jYXRlIFRleHRcbiAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnRyaW0oKSkgcmV0dXJuIG51bGw7XG5cbiAgLy8gVHJ1bmNhdGUgdG8gfjUwMCBjaGFycyB0byBhdm9pZCA1MDAgSW50ZXJuYWwgRXJyb3IgZnJvbSBUVFMgbW9kZWwgd2hpY2ggaGFzIGlucHV0IGxpbWl0c1xuICBjb25zdCBzYWZlVGV4dCA9IHRleHQudHJpbSgpLnNsaWNlKDAsIDUwMCk7XG5cbiAgY29uc3QgcHJvbXB0ID0gYFJlYWQgdGhlIGZvbGxvd2luZyBIZWJyZXcgdGV4dCBjbGVhcmx5LCBzbG93bHksIGFuZCB3YXJtbHksIHN1aXRhYmxlIGZvciBhIGNoaWxkcmVuJ3MgYm9vayBzdG9yeXRlbGxpbmc6XG4gICAgXG4gICAgJHtzYWZlVGV4dH1gO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmPEdlbmVyYXRlQ29udGVudFJlc3BvbnNlPigoKSA9PiBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHtcbiAgICAgIG1vZGVsOiBcImdlbWluaS0yLjUtZmxhc2gtcHJldmlldy10dHNcIixcbiAgICAgIGNvbnRlbnRzOiBbeyBwYXJ0czogW3sgdGV4dDogcHJvbXB0IH1dIH1dLFxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIHJlc3BvbnNlTW9kYWxpdGllczogW01vZGFsaXR5LkFVRElPXSxcbiAgICAgICAgc3BlZWNoQ29uZmlnOiB7XG4gICAgICAgICAgdm9pY2VDb25maWc6IHtcbiAgICAgICAgICAgIHByZWJ1aWx0Vm9pY2VDb25maWc6IHsgdm9pY2VOYW1lOiB2b2ljZU5hbWUgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pKTtcblxuICAgIGNvbnN0IGJhc2U2NEF1ZGlvID0gcmVzcG9uc2UuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy5pbmxpbmVEYXRhPy5kYXRhO1xuXG4gICAgaWYgKCFiYXNlNjRBdWRpbykgcmV0dXJuIG51bGw7XG5cbiAgICAvLyBEZWNvZGUgUENNIGRhdGFcbiAgICBjb25zdCBwY21EYXRhID0gZGVjb2RlQXVkaW8oYmFzZTY0QXVkaW8pO1xuXG4gICAgLy8gQ29udmVydCBJbnQxNiBQQ00gdG8gRmxvYXQzMiBmb3IgQXVkaW9Db250ZXh0ICgtMS4wIHRvIDEuMClcbiAgICBjb25zdCBmbG9hdDMyRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkocGNtRGF0YS5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGNtRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgZmxvYXQzMkRhdGFbaV0gPSBwY21EYXRhW2ldIC8gMzI3NjguMDtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgQXVkaW8gQnVmZmVyIChNb25vLCAyNGtIeiBhcyBwZXIgc3RhbmRhcmQgR2VuQUkgb3V0cHV0IHVzdWFsbHksIGJ1dCBjb250ZXh0IHNhbXBsZSByYXRlIG1hdHRlcnMpXG4gICAgLy8gTm90ZTogVGhlIHJhdyBvdXRwdXQgaXMgdXN1YWxseSAyNDAwMEh6LlxuICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlcigxLCBmbG9hdDMyRGF0YS5sZW5ndGgsIDI0MDAwKTtcbiAgICBhdWRpb0J1ZmZlci5nZXRDaGFubmVsRGF0YSgwKS5zZXQoZmxvYXQzMkRhdGEpO1xuXG4gICAgcmV0dXJuIGF1ZGlvQnVmZmVyO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VuZXJhdGluZyBhdWRpbzpcIiwgZXJyb3IpO1xuXG4gICAgLy8gUHJvcGFnYXRlIGZhdGFsIGVycm9ycyB0byBwcm9tcHQga2V5IGNoYW5nZVxuICAgIGhhbmRsZUZhdGFsRXJyb3IoZXJyb3IpO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5BSSIsIlR5cGUiLCJNb2RhbGl0eSIsImFwaUtleU1hbmFnZXIiLCJnZXRBcGlLZXkiLCJrZXkiLCJnZXRLZXkiLCJFcnJvciIsImhhbmRsZUZhdGFsRXJyb3IiLCJlcnIiLCJlcnJvck9iaiIsImVycm9yIiwibXNnIiwibWVzc2FnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b0xvd2VyQ2FzZSIsInN0YXR1cyIsImNvZGUiLCJpc1F1b3RhIiwiaW5jbHVkZXMiLCJpc0F1dGgiLCJjb25zb2xlIiwid2FybiIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsInJldHJ5V2l0aEJhY2tvZmYiLCJmbiIsInJldHJpZXMiLCJiYXNlRGVsYXkiLCJpc1JldHJ5YWJsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImJvb2tTY2hlbWEiLCJ0eXBlIiwiT0JKRUNUIiwicHJvcGVydGllcyIsIm1ldGFkYXRhIiwidGl0bGUiLCJTVFJJTkciLCJkZXNjcmlwdGlvbiIsInRhcmdldEFnZSIsIm1haW5UaGVtZSIsImVkdWNhdGlvbmFsTWVzc2FnZSIsImFydFN0eWxlIiwibWFpbkNoYXJhY3RlckRlc2NyaXB0aW9uIiwibWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyayIsInNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uIiwic2Vjb25kYXJ5Q2hhcmFjdGVyRGlzdGluY3RpdmVNYXJrIiwia2V5T2JqZWN0RGVzY3JpcHRpb24iLCJ0aXRsZVByaW1hcnlDb2xvciIsInRpdGxlU2Vjb25kYXJ5Q29sb3IiLCJ0aXRsZUVmZmVjdFRoZW1lIiwiZW51bSIsInZpc3VhbENvbnNpc3RlbmN5R3VpZGUiLCJjaGFyYWN0ZXJUcmFpdHMiLCJBUlJBWSIsIml0ZW1zIiwib2JqZWN0VHJhaXRzIiwiYmFja2dyb3VuZFN0eWxlIiwicmVxdWlyZWQiLCJwYWdlcyIsInBhZ2VOdW1iZXIiLCJJTlRFR0VSIiwiaGVicmV3VGV4dCIsImltYWdlUHJvbXB0IiwiZ2VuZXJhdGVTdG9yeUlkZWEiLCJhZ2VSYW5nZSIsImN1cnJlbnRUb3BpYyIsImFpIiwiYXBpS2V5IiwicHJvbXB0IiwicmVzcG9uc2UiLCJtb2RlbHMiLCJnZW5lcmF0ZUNvbnRlbnQiLCJtb2RlbCIsImNvbnRlbnRzIiwicGFydHMiLCJ0ZXh0IiwiY29uZmlnIiwibWF4T3V0cHV0VG9rZW5zIiwiZ2VuZXJhdGVCb29rQ29udGVudCIsInJlcXVlc3QiLCJ2YWxpZGF0ZUJvb2tSZXF1ZXN0IiwibG9nR2VuZXJhdGVkQm9vayIsImNvcHlyaWdodENoZWNrIiwidG9waWMiLCJhbGxvd2VkIiwicmVhc29uIiwic3lzdGVtSW5zdHJ1Y3Rpb24iLCJwYWdlQ291bnQiLCJwcmV2aW91c0NvbnRleHQiLCJjaGFyYWN0ZXJEZXNjcmlwdGlvbiIsInJlc3BvbnNlTWltZVR5cGUiLCJyZXNwb25zZVNjaGVtYSIsImJvb2siLCJwYXJzZSIsImxvZyIsImxlbmd0aCIsImF1ZGlvQ29uZmlnIiwiZW5hYmxlZCIsImF1ZGlvRW5hYmxlZCIsInZvaWNlTmFtZSIsImJhc2VDaGFyYWN0ZXJJbWFnZSIsImJhc2VDaGFyYWN0ZXJJbWFnZVVybCIsInRyYWl0cyIsImpvaW4iLCJvYmpUcmFpdHMiLCJtYWluTWFyayIsInNlY01hcmsiLCJtYXAiLCJwYWdlIiwiaWR4IiwicmVmaW5lZFByb21wdCIsImdlbmVyYXRlUGFnZUltYWdlIiwiYWN0aW9uUHJvbXB0IiwiaXNDb3ZlciIsInRleHRUb1JlbmRlciIsImZpbmFsUHJvbXB0IiwibW9kZWxOYW1lIiwiaW1hZ2VDb25maWciLCJhc3BlY3RSYXRpbyIsImltYWdlU2l6ZSIsInN0YXJ0c1dpdGgiLCJtYXRjaGVzIiwibWF0Y2giLCJ1bnNoaWZ0IiwiaW5saW5lRGF0YSIsIm1pbWVUeXBlIiwiZGF0YSIsInB1c2giLCJ1bmRlZmluZWQiLCJjYW5kaWRhdGUiLCJjYW5kaWRhdGVzIiwicGFydCIsImNvbnRlbnQiLCJhbmFseXplQm9va1BkZiIsInBkZkJhc2U2NCIsImV4dHJhY3Rpb25TY2hlbWEiLCJzdW1tYXJ5IiwiZGVjb2RlQXVkaW8iLCJiYXNlNjQiLCJiaW5hcnlTdHJpbmciLCJhdG9iIiwibGVuIiwiYnl0ZXMiLCJVaW50OEFycmF5IiwiaSIsImNoYXJDb2RlQXQiLCJJbnQxNkFycmF5IiwiYnVmZmVyIiwiZ2VuZXJhdGVQYWdlQXVkaW8iLCJhdWRpb0NvbnRleHQiLCJ0cmltIiwic2FmZVRleHQiLCJzbGljZSIsInJlc3BvbnNlTW9kYWxpdGllcyIsIkFVRElPIiwic3BlZWNoQ29uZmlnIiwidm9pY2VDb25maWciLCJwcmVidWlsdFZvaWNlQ29uZmlnIiwiYmFzZTY0QXVkaW8iLCJwY21EYXRhIiwiZmxvYXQzMkRhdGEiLCJGbG9hdDMyQXJyYXkiLCJhdWRpb0J1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsImdldENoYW5uZWxEYXRhIiwic2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./services/geminiService.ts\n");

/***/ }),

/***/ "(ssr)/./services/googleDrive.ts":
/*!*********************************!*\
  !*** ./services/googleDrive.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GOOGLE_CLIENT_ID: () => (/* binding */ GOOGLE_CLIENT_ID),\n/* harmony export */   clearDriveAccess: () => (/* binding */ clearDriveAccess),\n/* harmony export */   getDriveAccessToken: () => (/* binding */ getDriveAccessToken),\n/* harmony export */   hasDriveAccess: () => (/* binding */ hasDriveAccess),\n/* harmony export */   setDriveAccessToken: () => (/* binding */ setDriveAccessToken),\n/* harmony export */   uploadBookToDrive: () => (/* binding */ uploadBookToDrive),\n/* harmony export */   uploadToDrive: () => (/* binding */ uploadToDrive)\n/* harmony export */ });\n/* __next_internal_client_entry_do_not_use__ setDriveAccessToken,getDriveAccessToken,hasDriveAccess,clearDriveAccess,uploadToDrive,uploadBookToDrive,GOOGLE_CLIENT_ID auto */ // Google Drive service for uploading files\n// Uses OAuth2 to authenticate and upload files\nconst GOOGLE_CLIENT_ID = \"1053745923463-unb5d0288ujvdfavlg4kvtkq2m22sjvh.apps.googleusercontent.com\" || 0;\n// Store access token\nlet accessToken = null;\nconst setDriveAccessToken = (token)=>{\n    accessToken = token;\n    // Also store in sessionStorage for persistence\n    if (false) {}\n};\nconst getDriveAccessToken = ()=>{\n    if (accessToken) return accessToken;\n    if (false) {}\n    return null;\n};\nconst hasDriveAccess = ()=>{\n    return !!getDriveAccessToken();\n};\nconst clearDriveAccess = ()=>{\n    accessToken = null;\n    if (false) {}\n};\n// Create or get the KidCraft folder in Drive\nconst getOrCreateFolder = async (token)=>{\n    const folderName = 'KidCraft AI Books';\n    // Search for existing folder\n    const searchResponse = await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${folderName}' and mimeType='application/vnd.google-apps.folder' and trashed=false`, {\n        headers: {\n            Authorization: `Bearer ${token}`\n        }\n    });\n    const searchResult = await searchResponse.json();\n    if (searchResult.files && searchResult.files.length > 0) {\n        return searchResult.files[0].id;\n    }\n    // Create new folder\n    const createResponse = await fetch('https://www.googleapis.com/drive/v3/files', {\n        method: 'POST',\n        headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            name: folderName,\n            mimeType: 'application/vnd.google-apps.folder'\n        })\n    });\n    const folder = await createResponse.json();\n    return folder.id;\n};\n// Upload file to Google Drive\nconst uploadToDrive = async (file, fileName, mimeType)=>{\n    const token = getDriveAccessToken();\n    if (!token) {\n        throw new Error('  -Google Drive');\n    }\n    try {\n        // Get or create the KidCraft folder\n        const folderId = await getOrCreateFolder(token);\n        // Create multipart upload body\n        const metadata = {\n            name: fileName,\n            parents: [\n                folderId\n            ]\n        };\n        const form = new FormData();\n        form.append('metadata', new Blob([\n            JSON.stringify(metadata)\n        ], {\n            type: 'application/json'\n        }));\n        form.append('file', file);\n        // Upload file\n        const uploadResponse = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,webViewLink,webContentLink', {\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer ${token}`\n            },\n            body: form\n        });\n        if (!uploadResponse.ok) {\n            const error = await uploadResponse.json();\n            throw new Error(error.error?.message || 'Upload failed');\n        }\n        const result = await uploadResponse.json();\n        // Make file publicly accessible\n        await fetch(`https://www.googleapis.com/drive/v3/files/${result.id}/permissions`, {\n            method: 'POST',\n            headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                role: 'reader',\n                type: 'anyone'\n            })\n        });\n        return {\n            fileId: result.id,\n            webViewLink: result.webViewLink || `https://drive.google.com/file/d/${result.id}/view`,\n            webContentLink: result.webContentLink || `https://drive.google.com/uc?id=${result.id}&export=download`\n        };\n    } catch (error) {\n        console.error('Drive upload error:', error);\n        throw error;\n    }\n};\n// Upload ZIP and PDF to Drive and return links\nconst uploadBookToDrive = async (zipBlob, pdfBlob, bookTitle)=>{\n    const safeTitle = bookTitle.replace(/[\\\\/:*?\"<>|]/g, '_');\n    const timestamp = new Date().toISOString().split('T')[0];\n    const [zipResult, pdfResult] = await Promise.all([\n        uploadToDrive(zipBlob, `${safeTitle}_${timestamp}.zip`, 'application/zip'),\n        uploadToDrive(pdfBlob, `${safeTitle}_${timestamp}.pdf`, 'application/pdf')\n    ]);\n    return {\n        zipLink: zipResult.webViewLink,\n        pdfLink: pdfResult.webViewLink\n    };\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRO1lBQ1JSLFNBQVM7Z0JBQ0xDLGVBQWUsQ0FBQyxPQUFPLEVBQUViLE9BQU87Z0JBQ2hDLGdCQUFnQjtZQUNwQjtZQUNBcUIsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNqQnFCLE1BQU07Z0JBQ05OLE1BQU07WUFDVjtRQUNKO1FBR0osT0FBTztZQUNITyxRQUFRRixPQUFPekIsRUFBRTtZQUNqQjRCLGFBQWFILE9BQU9HLFdBQVcsSUFBSSxDQUFDLGdDQUFnQyxFQUFFSCxPQUFPekIsRUFBRSxDQUFDLEtBQUssQ0FBQztZQUN0RjZCLGdCQUFnQkosT0FBT0ksY0FBYyxJQUFJLENBQUMsK0JBQStCLEVBQUVKLE9BQU96QixFQUFFLENBQUMsZ0JBQWdCLENBQUM7UUFDMUc7SUFDSixFQUFFLE9BQU91QixPQUFZO1FBQ2pCTyxRQUFRUCxLQUFLLENBQUMsdUJBQXVCQTtRQUNyQyxNQUFNQTtJQUNWO0FBQ0osRUFBQztBQUVELCtDQUErQztBQUN4QyxNQUFNUSxvQkFBb0IsT0FDN0JDLFNBQ0FDLFNBQ0FDO0lBRUEsTUFBTUMsWUFBWUQsVUFBVUUsT0FBTyxDQUFDLGlCQUFpQjtJQUNyRCxNQUFNQyxZQUFZLElBQUlDLE9BQU9DLFdBQVcsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO0lBRXhELE1BQU0sQ0FBQ0MsV0FBV0MsVUFBVSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUM3Q25DLGNBQWN1QixTQUFTLEdBQUdHLFVBQVUsQ0FBQyxFQUFFRSxVQUFVLElBQUksQ0FBQyxFQUFFO1FBQ3hENUIsY0FBY3dCLFNBQVMsR0FBR0UsVUFBVSxDQUFDLEVBQUVFLFVBQVUsSUFBSSxDQUFDLEVBQUU7S0FDM0Q7SUFFRCxPQUFPO1FBQ0hRLFNBQVNKLFVBQVViLFdBQVc7UUFDOUJrQixTQUFTSixVQUFVZCxXQUFXO0lBQ2xDO0FBQ0osRUFBQztBQUUwQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMRU5PVk9cXERlc2t0b3BcXHNoYWhhclxcYm9va2FpXFxzZXJ2aWNlc1xcZ29vZ2xlRHJpdmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXHJcblxyXG4vLyBHb29nbGUgRHJpdmUgc2VydmljZSBmb3IgdXBsb2FkaW5nIGZpbGVzXHJcbi8vIFVzZXMgT0F1dGgyIHRvIGF1dGhlbnRpY2F0ZSBhbmQgdXBsb2FkIGZpbGVzXHJcblxyXG5jb25zdCBHT09HTEVfQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRCB8fCAnJ1xyXG5cclxuaW50ZXJmYWNlIERyaXZlVXBsb2FkUmVzdWx0IHtcclxuICAgIGZpbGVJZDogc3RyaW5nXHJcbiAgICB3ZWJWaWV3TGluazogc3RyaW5nXHJcbiAgICB3ZWJDb250ZW50TGluazogc3RyaW5nXHJcbn1cclxuXHJcbi8vIFN0b3JlIGFjY2VzcyB0b2tlblxyXG5sZXQgYWNjZXNzVG9rZW46IHN0cmluZyB8IG51bGwgPSBudWxsXHJcblxyXG5leHBvcnQgY29uc3Qgc2V0RHJpdmVBY2Nlc3NUb2tlbiA9ICh0b2tlbjogc3RyaW5nKSA9PiB7XHJcbiAgICBhY2Nlc3NUb2tlbiA9IHRva2VuXHJcbiAgICAvLyBBbHNvIHN0b3JlIGluIHNlc3Npb25TdG9yYWdlIGZvciBwZXJzaXN0ZW5jZVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZHJpdmVfYWNjZXNzX3Rva2VuJywgdG9rZW4pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXREcml2ZUFjY2Vzc1Rva2VuID0gKCk6IHN0cmluZyB8IG51bGwgPT4ge1xyXG4gICAgaWYgKGFjY2Vzc1Rva2VuKSByZXR1cm4gYWNjZXNzVG9rZW5cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdkcml2ZV9hY2Nlc3NfdG9rZW4nKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGhhc0RyaXZlQWNjZXNzID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgcmV0dXJuICEhZ2V0RHJpdmVBY2Nlc3NUb2tlbigpXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjbGVhckRyaXZlQWNjZXNzID0gKCkgPT4ge1xyXG4gICAgYWNjZXNzVG9rZW4gPSBudWxsXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdkcml2ZV9hY2Nlc3NfdG9rZW4nKVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDcmVhdGUgb3IgZ2V0IHRoZSBLaWRDcmFmdCBmb2xkZXIgaW4gRHJpdmVcclxuY29uc3QgZ2V0T3JDcmVhdGVGb2xkZXIgPSBhc3luYyAodG9rZW46IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XHJcbiAgICBjb25zdCBmb2xkZXJOYW1lID0gJ0tpZENyYWZ0IEFJIEJvb2tzJ1xyXG5cclxuICAgIC8vIFNlYXJjaCBmb3IgZXhpc3RpbmcgZm9sZGVyXHJcbiAgICBjb25zdCBzZWFyY2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcz9xPW5hbWU9JyR7Zm9sZGVyTmFtZX0nIGFuZCBtaW1lVHlwZT0nYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicgYW5kIHRyYXNoZWQ9ZmFsc2VgLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9XHJcbiAgICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIGNvbnN0IHNlYXJjaFJlc3VsdCA9IGF3YWl0IHNlYXJjaFJlc3BvbnNlLmpzb24oKVxyXG5cclxuICAgIGlmIChzZWFyY2hSZXN1bHQuZmlsZXMgJiYgc2VhcmNoUmVzdWx0LmZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXR1cm4gc2VhcmNoUmVzdWx0LmZpbGVzWzBdLmlkXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIG5ldyBmb2xkZXJcclxuICAgIGNvbnN0IGNyZWF0ZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCxcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcclxuICAgICAgICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcidcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICApXHJcblxyXG4gICAgY29uc3QgZm9sZGVyID0gYXdhaXQgY3JlYXRlUmVzcG9uc2UuanNvbigpXHJcbiAgICByZXR1cm4gZm9sZGVyLmlkXHJcbn1cclxuXHJcbi8vIFVwbG9hZCBmaWxlIHRvIEdvb2dsZSBEcml2ZVxyXG5leHBvcnQgY29uc3QgdXBsb2FkVG9Ecml2ZSA9IGFzeW5jIChcclxuICAgIGZpbGU6IEJsb2IsXHJcbiAgICBmaWxlTmFtZTogc3RyaW5nLFxyXG4gICAgbWltZVR5cGU6IHN0cmluZ1xyXG4pOiBQcm9taXNlPERyaXZlVXBsb2FkUmVzdWx0PiA9PiB7XHJcbiAgICBjb25zdCB0b2tlbiA9IGdldERyaXZlQWNjZXNzVG9rZW4oKVxyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcign15zXkCDXnteX15XXkdeoINecLUdvb2dsZSBEcml2ZScpXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBHZXQgb3IgY3JlYXRlIHRoZSBLaWRDcmFmdCBmb2xkZXJcclxuICAgICAgICBjb25zdCBmb2xkZXJJZCA9IGF3YWl0IGdldE9yQ3JlYXRlRm9sZGVyKHRva2VuKVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgbXVsdGlwYXJ0IHVwbG9hZCBib2R5XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IGZpbGVOYW1lLFxyXG4gICAgICAgICAgICBwYXJlbnRzOiBbZm9sZGVySWRdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKClcclxuICAgICAgICBmb3JtLmFwcGVuZCgnbWV0YWRhdGEnLCBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSkpXHJcbiAgICAgICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKVxyXG5cclxuICAgICAgICAvLyBVcGxvYWQgZmlsZVxyXG4gICAgICAgIGNvbnN0IHVwbG9hZFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICAgICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS91cGxvYWQvZHJpdmUvdjMvZmlsZXM/dXBsb2FkVHlwZT1tdWx0aXBhcnQmZmllbGRzPWlkLHdlYlZpZXdMaW5rLHdlYkNvbnRlbnRMaW5rJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBmb3JtXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGlmICghdXBsb2FkUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCB1cGxvYWRSZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLmVycm9yPy5tZXNzYWdlIHx8ICdVcGxvYWQgZmFpbGVkJylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwbG9hZFJlc3BvbnNlLmpzb24oKVxyXG5cclxuICAgICAgICAvLyBNYWtlIGZpbGUgcHVibGljbHkgYWNjZXNzaWJsZVxyXG4gICAgICAgIGF3YWl0IGZldGNoKFxyXG4gICAgICAgICAgICBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtyZXN1bHQuaWR9L3Blcm1pc3Npb25zYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiAncmVhZGVyJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW55b25lJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmlsZUlkOiByZXN1bHQuaWQsXHJcbiAgICAgICAgICAgIHdlYlZpZXdMaW5rOiByZXN1bHQud2ViVmlld0xpbmsgfHwgYGh0dHBzOi8vZHJpdmUuZ29vZ2xlLmNvbS9maWxlL2QvJHtyZXN1bHQuaWR9L3ZpZXdgLFxyXG4gICAgICAgICAgICB3ZWJDb250ZW50TGluazogcmVzdWx0LndlYkNvbnRlbnRMaW5rIHx8IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vdWM/aWQ9JHtyZXN1bHQuaWR9JmV4cG9ydD1kb3dubG9hZGBcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRHJpdmUgdXBsb2FkIGVycm9yOicsIGVycm9yKVxyXG4gICAgICAgIHRocm93IGVycm9yXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFVwbG9hZCBaSVAgYW5kIFBERiB0byBEcml2ZSBhbmQgcmV0dXJuIGxpbmtzXHJcbmV4cG9ydCBjb25zdCB1cGxvYWRCb29rVG9Ecml2ZSA9IGFzeW5jIChcclxuICAgIHppcEJsb2I6IEJsb2IsXHJcbiAgICBwZGZCbG9iOiBCbG9iLFxyXG4gICAgYm9va1RpdGxlOiBzdHJpbmdcclxuKTogUHJvbWlzZTx7IHppcExpbms6IHN0cmluZzsgcGRmTGluazogc3RyaW5nIH0+ID0+IHtcclxuICAgIGNvbnN0IHNhZmVUaXRsZSA9IGJvb2tUaXRsZS5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJ18nKVxyXG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cclxuXHJcbiAgICBjb25zdCBbemlwUmVzdWx0LCBwZGZSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIHVwbG9hZFRvRHJpdmUoemlwQmxvYiwgYCR7c2FmZVRpdGxlfV8ke3RpbWVzdGFtcH0uemlwYCwgJ2FwcGxpY2F0aW9uL3ppcCcpLFxyXG4gICAgICAgIHVwbG9hZFRvRHJpdmUocGRmQmxvYiwgYCR7c2FmZVRpdGxlfV8ke3RpbWVzdGFtcH0ucGRmYCwgJ2FwcGxpY2F0aW9uL3BkZicpXHJcbiAgICBdKVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgemlwTGluazogemlwUmVzdWx0LndlYlZpZXdMaW5rLFxyXG4gICAgICAgIHBkZkxpbms6IHBkZlJlc3VsdC53ZWJWaWV3TGlua1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBHT09HTEVfQ0xJRU5UX0lEIH1cclxuIl0sIm5hbWVzIjpbIkdPT0dMRV9DTElFTlRfSUQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX0NMSUVOVF9JRCIsImFjY2Vzc1Rva2VuIiwic2V0RHJpdmVBY2Nlc3NUb2tlbiIsInRva2VuIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0RHJpdmVBY2Nlc3NUb2tlbiIsImdldEl0ZW0iLCJoYXNEcml2ZUFjY2VzcyIsImNsZWFyRHJpdmVBY2Nlc3MiLCJyZW1vdmVJdGVtIiwiZ2V0T3JDcmVhdGVGb2xkZXIiLCJmb2xkZXJOYW1lIiwic2VhcmNoUmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic2VhcmNoUmVzdWx0IiwianNvbiIsImZpbGVzIiwibGVuZ3RoIiwiaWQiLCJjcmVhdGVSZXNwb25zZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsIm1pbWVUeXBlIiwiZm9sZGVyIiwidXBsb2FkVG9Ecml2ZSIsImZpbGUiLCJmaWxlTmFtZSIsIkVycm9yIiwiZm9sZGVySWQiLCJtZXRhZGF0YSIsInBhcmVudHMiLCJmb3JtIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJCbG9iIiwidHlwZSIsInVwbG9hZFJlc3BvbnNlIiwib2siLCJlcnJvciIsIm1lc3NhZ2UiLCJyZXN1bHQiLCJyb2xlIiwiZmlsZUlkIiwid2ViVmlld0xpbmsiLCJ3ZWJDb250ZW50TGluayIsImNvbnNvbGUiLCJ1cGxvYWRCb29rVG9Ecml2ZSIsInppcEJsb2IiLCJwZGZCbG9iIiwiYm9va1RpdGxlIiwic2FmZVRpdGxlIiwicmVwbGFjZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiemlwUmVzdWx0IiwicGRmUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsInppcExpbmsiLCJwZGZMaW5rIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./services/googleDrive.ts\n");

/***/ }),

/***/ "(ssr)/./types.ts":
/*!******************!*\
  !*** ./types.ts ***!
  \******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppView: () => (/* binding */ AppView),\n/* harmony export */   GenerationStatus: () => (/* binding */ GenerationStatus)\n/* harmony export */ });\nvar AppView = /*#__PURE__*/ function(AppView) {\n    AppView[\"HOME\"] = \"HOME\";\n    AppView[\"CREATE\"] = \"CREATE\";\n    AppView[\"EDITOR\"] = \"EDITOR\";\n    AppView[\"READING\"] = \"READING\";\n    return AppView;\n}({});\nvar GenerationStatus = /*#__PURE__*/ function(GenerationStatus) {\n    GenerationStatus[\"IDLE\"] = \"IDLE\";\n    GenerationStatus[\"GENERATING_TEXT\"] = \"GENERATING_TEXT\";\n    GenerationStatus[\"GENERATING_IMAGES\"] = \"GENERATING_IMAGES\";\n    GenerationStatus[\"SUCCESS\"] = \"SUCCESS\";\n    GenerationStatus[\"ERROR\"] = \"ERROR\";\n    return GenerationStatus;\n}({});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNPLHFDQUFLQTs7Ozs7V0FBQUE7TUFLWDtBQTZETSw4Q0FBS0M7Ozs7OztXQUFBQTtNQU1YIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExFTk9WT1xcRGVza3RvcFxcc2hhaGFyXFxib29rYWlcXHR5cGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGVudW0gQXBwVmlldyB7XG4gIEhPTUUgPSAnSE9NRScsXG4gIENSRUFURSA9ICdDUkVBVEUnLFxuICBFRElUT1IgPSAnRURJVE9SJyxcbiAgUkVBRElORyA9ICdSRUFESU5HJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb29rUGFnZSB7XG4gIHBhZ2VOdW1iZXI6IG51bWJlcjtcbiAgaGVicmV3VGV4dDogc3RyaW5nO1xuICBpbWFnZVByb21wdDogc3RyaW5nO1xuICBnZW5lcmF0ZWRJbWFnZVVybD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb29rTWV0YWRhdGEge1xuICB0aXRsZTogc3RyaW5nO1xuICB0YXJnZXRBZ2U6IHN0cmluZztcbiAgbWFpblRoZW1lOiBzdHJpbmc7XG4gIGVkdWNhdGlvbmFsTWVzc2FnZTogc3RyaW5nO1xuICBtYWluQ2hhcmFjdGVyRGVzY3JpcHRpb246IHN0cmluZztcbiAgbWFpbkNoYXJhY3RlckRpc3RpbmN0aXZlTWFyazogc3RyaW5nOyAvLyBOZXc6IFVuaXF1ZSB2aXN1YWwgYW5jaG9yXG4gIHNlY29uZGFyeUNoYXJhY3RlckRlc2NyaXB0aW9uPzogc3RyaW5nOyAvLyBOZXc6IEZvciBzaWRla2lja3MgKGUuZy4sIHRoZSBiaXJkKVxuICBzZWNvbmRhcnlDaGFyYWN0ZXJEaXN0aW5jdGl2ZU1hcms/OiBzdHJpbmc7IC8vIE5ldzogVW5pcXVlIHZpc3VhbCBhbmNob3IgZm9yIHNpZGVraWNrXG4gIGFydFN0eWxlOiBzdHJpbmc7XG4gIGtleU9iamVjdERlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGJhc2VDaGFyYWN0ZXJJbWFnZVVybD86IHN0cmluZztcbiAgdGl0bGVQcmltYXJ5Q29sb3I6IHN0cmluZztcbiAgdGl0bGVTZWNvbmRhcnlDb2xvcjogc3RyaW5nO1xuICB0aXRsZUVmZmVjdFRoZW1lOiAnbWFnaWNhbCcgfCAnbmF0dXJhbCcgfCAndGVjaCcgfCAnY2xhc3NpYycgfCAncGxheWZ1bCcgfCAnZWxlZ2FudCc7XG4gIC8vIE5ldzogU3BlY2lmaWMgdmlzdWFsIGd1aWRlIHRvIGVuc3VyZSBjb25zaXN0ZW5jeVxuICB2aXN1YWxDb25zaXN0ZW5jeUd1aWRlOiB7XG4gICAgY2hhcmFjdGVyVHJhaXRzOiBzdHJpbmdbXTsgLy8gZS5nLiBbXCJCbHVlIGhhdFwiLCBcIlJlZCBib290c1wiLCBcIkdvbGRlbiBjdXJsc1wiXVxuICAgIG9iamVjdFRyYWl0czogc3RyaW5nW107ICAgIC8vIGUuZy4gW1wiR2xvd2luZyBncmVlbiBzdGFmZlwiLCBcIldvb2RlbiB0ZXh0dXJlXCJdXG4gICAgYmFja2dyb3VuZFN0eWxlOiBzdHJpbmc7ICAgLy8gZS5nLiBcIlBhc3RlbCBkcmVhbXNjYXBlIHdpdGggZmxvYXRpbmcgaXNsYW5kc1wiXG4gIH07XG4gIC8vIE5ldzogQXVkaW8gQ29uZmlndXJhdGlvblxuICBhdWRpb0NvbmZpZz86IHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIHZvaWNlTmFtZTogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJvb2sge1xuICBtZXRhZGF0YTogQm9va01ldGFkYXRhO1xuICBwYWdlczogQm9va1BhZ2VbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmV2aW91c0Jvb2tDb250ZXh0IHtcbiAgdGl0bGU6IHN0cmluZztcbiAgc3VtbWFyeTogc3RyaW5nO1xuICBjaGFyYWN0ZXJEZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzZWNvbmRhcnlDaGFyYWN0ZXJEZXNjcmlwdGlvbj86IHN0cmluZztcbiAgYXJ0U3R5bGU6IHN0cmluZztcbiAgYmFzZUNoYXJhY3RlckltYWdlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tSZXF1ZXN0IHtcbiAgYWdlUmFuZ2U6IHN0cmluZztcbiAgdG9waWM6IHN0cmluZztcbiAgcGFnZUNvdW50OiBudW1iZXI7XG4gIGFydFN0eWxlPzogc3RyaW5nO1xuICBwcmV2aW91c0NvbnRleHQ/OiBQcmV2aW91c0Jvb2tDb250ZXh0O1xuICBhdWRpb0VuYWJsZWQ6IGJvb2xlYW47XG4gIHZvaWNlTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBHZW5lcmF0aW9uU3RhdHVzIHtcbiAgSURMRSA9ICdJRExFJyxcbiAgR0VORVJBVElOR19URVhUID0gJ0dFTkVSQVRJTkdfVEVYVCcsXG4gIEdFTkVSQVRJTkdfSU1BR0VTID0gJ0dFTkVSQVRJTkdfSU1BR0VTJyxcbiAgU1VDQ0VTUyA9ICdTVUNDRVNTJyxcbiAgRVJST1IgPSAnRVJST1InLFxufVxuIl0sIm5hbWVzIjpbIkFwcFZpZXciLCJHZW5lcmF0aW9uU3RhdHVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./types.ts\n");

/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/dynamic-access-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/server/app-render/dynamic-access-async-storage.external.js" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/dynamic-access-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "module":
/*!*************************!*\
  !*** external "module" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("module");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/is-bot":
/*!***********************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/is-bot" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:buffer");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/promises":
/*!***************************************!*\
  !*** external "node:stream/promises" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/promises");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:zlib");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@babel","vendor-chunks/@grpc","vendor-chunks/protobufjs","vendor-chunks/google-auth-library","vendor-chunks/jszip","vendor-chunks/pako","vendor-chunks/ws","vendor-chunks/readable-stream","vendor-chunks/@protobufjs","vendor-chunks/@firebase","vendor-chunks/gaxios","vendor-chunks/jws","vendor-chunks/@swc","vendor-chunks/firebase","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/idb","vendor-chunks/gcp-metadata","vendor-chunks/string_decoder","vendor-chunks/inherits","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/fflate","vendor-chunks/@google","vendor-chunks/long","vendor-chunks/gtoken","vendor-chunks/util-deprecate","vendor-chunks/safe-buffer","vendor-chunks/process-nextick-args","vendor-chunks/lodash.camelcase","vendor-chunks/lie","vendor-chunks/jwa","vendor-chunks/jspdf","vendor-chunks/isarray","vendor-chunks/immediate","vendor-chunks/html2canvas","vendor-chunks/extend","vendor-chunks/core-util-is","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js","vendor-chunks/@react-oauth"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Cshahar%5Cbookai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();